{"version":3,"kind":"Notebook","sha256":"22626dfe7bd9dc5b1171f016164f961a3cd5479c47e9fde2224d445ecaa972c2","slug":"notebooks.snotel-data-access","location":"/notebooks/snotel_data_access.ipynb","dependencies":[],"frontmatter":{"title":"SNOTEL Data Access","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"snow-observations-cookbook-test","language":"python"},"authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/SnowEx/snow-observations-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/SnowEx/snow-observations-cookbook/blob/main/notebooks/snotel_data_access.ipynb","edit_url":"https://github.com/SnowEx/snow-observations-cookbook/edit/main/notebooks/snotel_data_access.ipynb","exports":[{"format":"ipynb","filename":"snotel_data_access.ipynb","url":"/snow-observations-cookbook/build/snotel_data_access-351850611995b8a94e36ef519ce419a9.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook allows for easy access to snow depths and SWE from the Snow Telemetry (SNOTEL) network. A simple example is used to show quick access to SNOTEL data over Creamer’s Field, AK using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qF5yHYWdWL"},{"type":"inlineCode","value":"metloom","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IaBwiynJZy"},{"type":"text","value":" package.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aSIwqeJKlQ"}],"key":"po902D3rFL"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Credit: M3Works for the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OJa2hQzvfD"},{"type":"inlineCode","value":"metloom","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"caay30Nt8R"},{"type":"text","value":" package, which can be found here: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"inrB9o542X"},{"type":"link","url":"https://github.com/M3Works/metloom/tree/main","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://​github​.com​/M3Works​/metloom​/tree​/main","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CDwo879YBH"}],"urlSource":"https://github.com/M3Works/metloom/tree/main","error":true,"key":"ofuwSjMm4M"}],"key":"mSUG6YQ7la"}],"key":"TZrt1j0Kka"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from datetime import datetime\nimport pandas as pd\nimport geopandas as gpd\nfrom pathlib import Path\nimport matplotlib.pyplot as plt","key":"hrHZVXSUEr"},{"type":"outputs","id":"QaTBFwBbuyE-CFregQO0t","children":[],"key":"OwatOftsgl"}],"key":"LGf7jsTgxg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Metloom allows for easy access to several weather station types, including SNOTEL, MesoWest, and NorwayMet. The primary query function for each is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BKhk9KXTpt"},{"type":"inlineCode","value":"SnotelPointData","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SSEpE3YJFt"},{"type":"text","value":" (replace “Snotel” with station of choice), which also allows us to view the locations of weather stations. We’ll start this example doing just that.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kYDChLcOtq"}],"key":"HuYZArN3pH"}],"key":"YHwIFNRX4u"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import the SNOTEL pointdata classes\nfrom metloom.pointdata import SnotelPointData\n\n# Import the SNOTEL variable classes\nfrom metloom.variables import SnotelVariables","key":"PspLYeSwwJ"},{"type":"outputs","id":"BUQ-b01C1a1PPgae00toY","children":[],"key":"qiIHvOxWSw"}],"key":"Ar5fCBSOG5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We are going to look for active SNOTEL stations near Creamer’s Field in Fairbanks, AK. The below cells search for SNOTEL stations within 0.5 degrees latitude/longitude of the provided polygon.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DLYTqFCQzF"}],"key":"ePoNMOhayA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We will also go ahead and define the variables we want from the station, using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HU0pMTByHL"},{"type":"inlineCode","value":"SnotelPointData.ALLOWED_VARIABLES","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qrx0HPVRUe"},{"type":"text","value":". Some of the allowed variables include:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LtN0PzJlra"}],"key":"BjdRnrHsJn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SNOWDEPTH","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ddHu7mRqqz"},{"type":"text","value":": Snow depth, typically in inches.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"RQ6vEr0Mjv"}],"key":"Ra0DQ2d9f8"}],"key":"BhBCDRxkzR"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SWE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UkPq0zd14V"},{"type":"text","value":": Snow water equivalent, typically in inches.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pBl333Pa3c"}],"key":"YjDzKZpSn8"}],"key":"OWirmaXwmf"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"PRECIPITATION","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"nNGtE2bqhj"},{"type":"text","value":": Accumulated precipitation, in inches.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AwxFuLrX3O"}],"key":"D8kyiB3qGJ"}],"key":"JsRAUp5GWE"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"TMP","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"HstSmaFccq"},{"type":"text","value":": Air temperature, in degrees Fahrenheit.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sHjU9STV0o"}],"key":"tOOqOQz25t"}],"key":"V8XCC0PaJy"}],"key":"QKqjycmzx8"}],"key":"GAAsAYrxX1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Load FLCF lidar box from SnowEx campaigns\nsf_path = Path(\"data/cffl_lidar_box.geojson\").expanduser()\nsf = gpd.read_file(str(sf_path))\nsf[\"name\"] = [\"FLCF\"]\n\n# Load the desired variables for SNOTEL query\nvariables = [SnotelPointData.ALLOWED_VARIABLES.SNOWDEPTH]","key":"hmu45TxEHB"},{"type":"outputs","id":"iILYDM9OoZHe5XWKQklx0","children":[],"key":"HSYb7Hv90w"}],"key":"bmPIDRy31i"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Find SNOTEL stations within polygon with desired variables\npoints = SnotelPointData.points_from_geometry(sf, variables)\n\n# Print nearby SNOTEL stations within 0.5 degrees of polygon\nprint(SnotelPointData.points_from_geometry(sf, variables, buffer=0.5).points)","key":"h0q8exheDZ"},{"type":"outputs","id":"R7ye2Ahcr1lZ0QcxDDe3q","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"[SnotelPointData('1302:AK:SNTL', 'Creamers Field')]\n"},"key":"zM6jr4BbHE"}],"key":"Sc88T84M4b"}],"key":"rbHo7NI94m"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Looks like we have a SNOTEL station here! Note the printed output: Metloom returns the station ID number (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LsFFRUokqz"},{"type":"inlineCode","value":"1302","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j5VMugcbrw"},{"type":"text","value":"), the state it’s in (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LQDJkci9xV"},{"type":"inlineCode","value":"AK","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dJJNIWSRgP"},{"type":"text","value":"), and the type of weather station (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Xi5LnTFDWz"},{"type":"inlineCode","value":"SNTL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"toRUWilHEL"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"reYfLkDITC"}],"key":"Znk5ZcaPVS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s see where it’s located in Creamer’s Field, relative to the polyon we provided.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UNwtrO53fZ"}],"key":"hm5ei7c8d3"}],"key":"QsQ5cneddr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot lidar box over ESRI tiles\nm = sf.explore(\n    tooltip=False, color=\"grey\", highlight=False, tiles=\"Esri.WorldImagery\",\n    style_kwds={\"opacity\": 0.2}, popup=[\"name\"]\n)\n# Add plot showing location of SNOTEL station(s)\ndf = points.to_dataframe()\ndf.explore(m=m, tooltip=[\"name\", \"id\"], color=\"red\", marker_kwds={\"radius\":4})","key":"BTJiPekcYn"},{"type":"outputs","id":"MwX20qcwS5FcXJhAIgJCt","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"<folium.folium.Map at 0x7fa2cf717620>","content_type":"text/plain"},"text/html":{"content":"<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_ab0f5686e50accf9acf6932767f88b75 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumpopup {\n                            margin: auto;\n                        }\n                       .foliumpopup table{\n                            margin: auto;\n                        }\n                        .foliumpopup tr{\n                            text-align: left;\n                        }\n                        .foliumpopup th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_ab0f5686e50accf9acf6932767f88b75&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_ab0f5686e50accf9acf6932767f88b75 = L.map(\n                &quot;map_ab0f5686e50accf9acf6932767f88b75&quot;,\n                {\n                    center: [64.87346723629585, -147.70673132863286],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 10,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n            L.control.scale().addTo(map_ab0f5686e50accf9acf6932767f88b75);\n\n            \n\n        \n    \n            var tile_layer_5e5332f86cd5ff837445a28ce516a9f6 = L.tileLayer(\n                &quot;https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 18,\n  &quot;maxNativeZoom&quot;: 18,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;Tiles \\u0026copy; Esri \\u0026mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_5e5332f86cd5ff837445a28ce516a9f6.addTo(map_ab0f5686e50accf9acf6932767f88b75);\n        \n    \n            map_ab0f5686e50accf9acf6932767f88b75.fitBounds(\n                [[64.85824559308716, -147.7518789161763], [64.88868887950454, -147.6615837410894]],\n                {}\n            );\n        \n    \n        function geo_json_147c8ac10bc2e6f445faa1784b724e93_styler(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;color&quot;: &quot;grey&quot;, &quot;fillColor&quot;: &quot;grey&quot;, &quot;fillOpacity&quot;: 0.5, &quot;opacity&quot;: 0.2, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_147c8ac10bc2e6f445faa1784b724e93_pointToLayer(feature, latlng) {\n            var opts = {\n  &quot;stroke&quot;: true,\n  &quot;color&quot;: &quot;#3388ff&quot;,\n  &quot;weight&quot;: 3,\n  &quot;opacity&quot;: 1.0,\n  &quot;lineCap&quot;: &quot;round&quot;,\n  &quot;lineJoin&quot;: &quot;round&quot;,\n  &quot;dashArray&quot;: null,\n  &quot;dashOffset&quot;: null,\n  &quot;fill&quot;: true,\n  &quot;fillColor&quot;: &quot;#3388ff&quot;,\n  &quot;fillOpacity&quot;: 0.2,\n  &quot;fillRule&quot;: &quot;evenodd&quot;,\n  &quot;bubblingMouseEvents&quot;: true,\n  &quot;radius&quot;: 2,\n};\n            \n            let style = geo_json_147c8ac10bc2e6f445faa1784b724e93_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.CircleMarker(latlng, opts)\n        }\n\n        function geo_json_147c8ac10bc2e6f445faa1784b724e93_onEachFeature(feature, layer) {\n\n            layer.on({\n            });\n        };\n        var geo_json_147c8ac10bc2e6f445faa1784b724e93 = L.geoJson(null, {\n                onEachFeature: geo_json_147c8ac10bc2e6f445faa1784b724e93_onEachFeature,\n            \n                style: geo_json_147c8ac10bc2e6f445faa1784b724e93_styler,\n                pointToLayer: geo_json_147c8ac10bc2e6f445faa1784b724e93_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_147c8ac10bc2e6f445faa1784b724e93_add (data) {\n            geo_json_147c8ac10bc2e6f445faa1784b724e93\n                .addData(data);\n        }\n            geo_json_147c8ac10bc2e6f445faa1784b724e93_add({&quot;bbox&quot;: [-147.7518789161763, 64.85824559308716, -147.6615837410894, 64.88868887950454], &quot;features&quot;: [{&quot;bbox&quot;: [-147.7518789161763, 64.85824559308716, -147.6615837410894, 64.88868887950454], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[[-147.7518789161763, 64.88830524865706, 0.0], [-147.7510392851389, 64.85824559308716, 0.0], [-147.6615837410894, 64.85875714704834, 0.0], [-147.6619112303887, 64.88868887950454, 0.0], [-147.7518789161763, 64.88830524865706, 0.0]]]], &quot;type&quot;: &quot;MultiPolygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Name&quot;: &quot;Creamer/Farmers&quot;, &quot;__folium_color&quot;: &quot;grey&quot;, &quot;altitudeMode&quot;: null, &quot;begin&quot;: null, &quot;description&quot;: &quot;\\u003chtml xmlns:fo=\\&quot;http://www.w3.org/1999/XSL/Format\\&quot; xmlns:msxsl=\\&quot;urn:schemas-microsoft-com:xslt\\&quot;\\u003e\\n\\n\\u003chead\\u003e\\n\\n\\u003cMETA http-equiv=\\&quot;Content-Type\\&quot; content=\\&quot;text/html\\&quot;\\u003e\\n\\n\\u003cmeta http-equiv=\\&quot;content-type\\&quot; content=\\&quot;text/html; charset=UTF-8\\&quot;\\u003e\\n\\n\\u003c/head\\u003e\\n\\n\\u003cbody style=\\&quot;margin:0px 0px 0px 0px;overflow:auto;background:#FFFFFF;\\&quot;\\u003e\\n\\n\\u003ctable style=\\&quot;font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-collapse:collapse;padding:3px 3px 3px 3px\\&quot;\\u003e\\n\\n\\u003ctr style=\\&quot;text-align:center;font-weight:bold;background:#9CBCE2\\&quot;\\u003e\\n\\n\\u003ctd\\u003eCreamer/Farmers\\u003c/td\\u003e\\n\\n\\u003c/tr\\u003e\\n\\n\\u003ctr\\u003e\\n\\n\\u003ctd\\u003e\\n\\n\\u003ctable style=\\&quot;font-family:Arial,Verdana,Times;font-size:12px;text-align:left;width:100%;border-spacing:0px; padding:3px 3px 3px 3px\\&quot;\\u003e\\n\\n\\u003ctr\\u003e\\n\\n\\u003ctd\\u003eFID\\u003c/td\\u003e\\n\\n\\u003ctd\\u003e3\\u003c/td\\u003e\\n\\n\\u003c/tr\\u003e\\n\\n\\u003ctr bgcolor=\\&quot;#D4E4F3\\&quot;\\u003e\\n\\n\\u003ctd\\u003eId\\u003c/td\\u003e\\n\\n\\u003ctd\\u003e0\\u003c/td\\u003e\\n\\n\\u003c/tr\\u003e\\n\\n\\u003ctr\\u003e\\n\\n\\u003ctd\\u003eSite_ID\\u003c/td\\u003e\\n\\n\\u003ctd\\u003eCreamer/Farmers\\u003c/td\\u003e\\n\\n\\u003c/tr\\u003e\\n\\n\\u003c/table\\u003e\\n\\n\\u003c/td\\u003e\\n\\n\\u003c/tr\\u003e\\n\\n\\u003c/table\\u003e\\n\\n\\u003c/body\\u003e\\n\\n\\u003c/html\\u003e&quot;, &quot;drawOrder&quot;: null, &quot;end&quot;: null, &quot;extrude&quot;: 0, &quot;icon&quot;: null, &quot;name&quot;: &quot;FLCF&quot;, &quot;snippet&quot;: &quot;&quot;, &quot;tessellate&quot;: -1, &quot;timestamp&quot;: null, &quot;visibility&quot;: -1}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_147c8ac10bc2e6f445faa1784b724e93.bindPopup(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;name&quot;];\n    let aliases = [&quot;name&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i].toLocaleString()}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v]).toLocaleString()}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;className&quot;: &quot;foliumpopup&quot;,\n});\n                     \n    \n            geo_json_147c8ac10bc2e6f445faa1784b724e93.addTo(map_ab0f5686e50accf9acf6932767f88b75);\n        \n    \n        function geo_json_0936d0445aa734ab03dac151f5c1333f_styler(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;color&quot;: &quot;red&quot;, &quot;fillColor&quot;: &quot;red&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_0936d0445aa734ab03dac151f5c1333f_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_0936d0445aa734ab03dac151f5c1333f_pointToLayer(feature, latlng) {\n            var opts = {\n  &quot;stroke&quot;: true,\n  &quot;color&quot;: &quot;#3388ff&quot;,\n  &quot;weight&quot;: 3,\n  &quot;opacity&quot;: 1.0,\n  &quot;lineCap&quot;: &quot;round&quot;,\n  &quot;lineJoin&quot;: &quot;round&quot;,\n  &quot;dashArray&quot;: null,\n  &quot;dashOffset&quot;: null,\n  &quot;fill&quot;: true,\n  &quot;fillColor&quot;: &quot;#3388ff&quot;,\n  &quot;fillOpacity&quot;: 0.2,\n  &quot;fillRule&quot;: &quot;evenodd&quot;,\n  &quot;bubblingMouseEvents&quot;: true,\n  &quot;radius&quot;: 4,\n};\n            \n            let style = geo_json_0936d0445aa734ab03dac151f5c1333f_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.CircleMarker(latlng, opts)\n        }\n\n        function geo_json_0936d0445aa734ab03dac151f5c1333f_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_0936d0445aa734ab03dac151f5c1333f.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_0936d0445aa734ab03dac151f5c1333f_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_0936d0445aa734ab03dac151f5c1333f = L.geoJson(null, {\n                onEachFeature: geo_json_0936d0445aa734ab03dac151f5c1333f_onEachFeature,\n            \n                style: geo_json_0936d0445aa734ab03dac151f5c1333f_styler,\n                pointToLayer: geo_json_0936d0445aa734ab03dac151f5c1333f_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_0936d0445aa734ab03dac151f5c1333f_add (data) {\n            geo_json_0936d0445aa734ab03dac151f5c1333f\n                .addData(data);\n        }\n            geo_json_0936d0445aa734ab03dac151f5c1333f_add({&quot;bbox&quot;: [-147.73617, 64.86534, -147.73617, 64.86534], &quot;features&quot;: [{&quot;bbox&quot;: [-147.73617, 64.86534, -147.73617, 64.86534], &quot;geometry&quot;: {&quot;coordinates&quot;: [-147.73617, 64.86534, 440.0], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;red&quot;, &quot;datasource&quot;: &quot;NRCS&quot;, &quot;id&quot;: &quot;1302:AK:SNTL&quot;, &quot;name&quot;: &quot;Creamers Field&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_0936d0445aa734ab03dac151f5c1333f.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;name&quot;, &quot;id&quot;];\n    let aliases = [&quot;name&quot;, &quot;id&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i]}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_0936d0445aa734ab03dac151f5c1333f.addTo(map_ab0f5686e50accf9acf6932767f88b75);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>","content_type":"text/html"}}},"key":"f0vLSmjdyG"}],"key":"X4NcYex7Zn"}],"key":"oNjDzPstML"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we know which SNOTEL is in the area, we can query for the data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HJyhXZJlo8"}],"key":"BAhNFC4amH"}],"key":"sLSloTXPCx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define SNOTEL station from FLCF\npt = SnotelPointData(\"1302:AK:SNTL\", \"Creamer's Field\")","key":"tiutdd3gl6"},{"type":"outputs","id":"cgik-LzymKaHNV11y_mzv","children":[],"key":"EtCq4YG52D"}],"key":"u44C4UNcZ9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As with other API requests, we can subset the data with a date range, given as datetime objects.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gzFL8aRttF"}],"key":"gP7yFpIegH"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Note here that we are requesting for snow depths on a daily basis. If desired, we could also obtain the hourly data instead, using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bPqToa5yZe"},{"type":"inlineCode","value":"pt.get_hourly_data()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sDcQB1QuCJ"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QJmGFYqUJA"}],"key":"TfSRR7Fajw"}],"key":"vGuPGmKhth"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Start and end date of SNOTEL query\nstart_date = datetime(2022, 3, 1)\nend_date = datetime(2023, 4, 1)\n\n# Query SNOTEL snow depths\ndf = pt.get_daily_data(start_date, end_date, variables)","key":"qG34yI5tt8"},{"type":"outputs","id":"INCOpQsXyTHwOmz7IX_N-","children":[],"key":"adwgnt7puw"}],"key":"rb9CCE3Aqe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"df.head()","key":"DRPVbjXIuc"},{"type":"outputs","id":"ZmVWIBDkcR9WgkJjbMiX3","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"                                                                 geometry  \\\ndatetime                  site                                              \n2022-03-01 09:00:00+00:00 1302:AK:SNTL  POINT Z (-147.73617 64.86534 440)   \n2022-03-02 09:00:00+00:00 1302:AK:SNTL  POINT Z (-147.73617 64.86534 440)   \n2022-03-03 09:00:00+00:00 1302:AK:SNTL  POINT Z (-147.73617 64.86534 440)   \n2022-03-04 09:00:00+00:00 1302:AK:SNTL  POINT Z (-147.73617 64.86534 440)   \n2022-03-05 09:00:00+00:00 1302:AK:SNTL  POINT Z (-147.73617 64.86534 440)   \n\n                                        SNOWDEPTH SNOWDEPTH_units datasource  \ndatetime                  site                                                \n2022-03-01 09:00:00+00:00 1302:AK:SNTL       31.0              in       NRCS  \n2022-03-02 09:00:00+00:00 1302:AK:SNTL       30.0              in       NRCS  \n2022-03-03 09:00:00+00:00 1302:AK:SNTL       29.0              in       NRCS  \n2022-03-04 09:00:00+00:00 1302:AK:SNTL       29.0              in       NRCS  \n2022-03-05 09:00:00+00:00 1302:AK:SNTL       29.0              in       NRCS  ","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>geometry</th>\n      <th>SNOWDEPTH</th>\n      <th>SNOWDEPTH_units</th>\n      <th>datasource</th>\n    </tr>\n    <tr>\n      <th>datetime</th>\n      <th>site</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2022-03-01 09:00:00+00:00</th>\n      <th>1302:AK:SNTL</th>\n      <td>POINT Z (-147.73617 64.86534 440)</td>\n      <td>31.0</td>\n      <td>in</td>\n      <td>NRCS</td>\n    </tr>\n    <tr>\n      <th>2022-03-02 09:00:00+00:00</th>\n      <th>1302:AK:SNTL</th>\n      <td>POINT Z (-147.73617 64.86534 440)</td>\n      <td>30.0</td>\n      <td>in</td>\n      <td>NRCS</td>\n    </tr>\n    <tr>\n      <th>2022-03-03 09:00:00+00:00</th>\n      <th>1302:AK:SNTL</th>\n      <td>POINT Z (-147.73617 64.86534 440)</td>\n      <td>29.0</td>\n      <td>in</td>\n      <td>NRCS</td>\n    </tr>\n    <tr>\n      <th>2022-03-04 09:00:00+00:00</th>\n      <th>1302:AK:SNTL</th>\n      <td>POINT Z (-147.73617 64.86534 440)</td>\n      <td>29.0</td>\n      <td>in</td>\n      <td>NRCS</td>\n    </tr>\n    <tr>\n      <th>2022-03-05 09:00:00+00:00</th>\n      <th>1302:AK:SNTL</th>\n      <td>POINT Z (-147.73617 64.86534 440)</td>\n      <td>29.0</td>\n      <td>in</td>\n      <td>NRCS</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}},"key":"jKEmryqmm0"}],"key":"AAeGSB14Pz"}],"key":"SaJLHDZQZS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Easy enough! We now have a data frame containing the basic information of the SNOTEL site, as well as the snow depth in inches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wzeym9ItSc"}],"key":"wZj8JO89TC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Since inches aren’t very useful in scientific analysis, and SNOWDEPTH can be a hassle to type out, let’s make a new column that shows the depth in meters.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GWG3Ve2NeU"}],"key":"jFbxwbtCHI"}],"key":"EPXggsxfK2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Convert snow depth to meters\ndf['snow_depth_meters'] = df['SNOWDEPTH']*0.0254","key":"x5QzXNizTs"},{"type":"outputs","id":"9U6li2_spIYdEjbCqbWxX","children":[],"key":"Fk1Q42jJut"}],"key":"JlXZrqiJ38"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"From there, it’s simple to plot the snow depth data as a time series.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BVuLtTD3lE"}],"key":"O9GOydFsFV"}],"key":"H2WIisgWSv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot time series of daily SNOTEL data\nfig, ax = plt.subplots()\ndf.reset_index().set_index(\"datetime\")[\"snow_depth_meters\"].plot(ax=ax)\nax.set_xlabel(\"Date\", fontsize=12)\nax.set_ylabel(\"Snow depth [m]\", fontsize=12)\nax.set_title(\"SNOTEL: Creamer's Field (1302)\", fontsize=12)\nfig.tight_layout()","key":"H99GDz7HTF"},{"type":"outputs","id":"pUMPCTp47_2GYJAneKIas","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"b904811a80cee3969798a882b1eca3e5","path":"/snow-observations-cookbook/build/b904811a80cee3969798a882b1eca3e5.png"}}},"key":"XntdtqRj9R"}],"key":"oZ3DV3GItY"}],"key":"ZuUYP9C4dq"}],"key":"xkmLNuhzoS"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Terrestrial Laser Scanning","url":"/notebooks/tls-data-access","group":"Observations"}}},"domain":"http://localhost:3000"}