<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Microstructure - Snow Observations Cookbook</title><meta property="og:title" content="Microstructure - Snow Observations Cookbook"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg"/><meta property="og:image" content="/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg"/><link rel="stylesheet" href="/snow-observations-cookbook/_preview/5/build/_assets/app-AIT5GAEP.css"/><link rel="stylesheet" href="/snow-observations-cookbook/_preview/5/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-T52X8HNYE8"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-T52X8HNYE8');</script><link rel="icon" href="/snow-observations-cookbook/_preview/5/favicon.ico"/><link rel="stylesheet" href="/snow-observations-cookbook/_preview/5/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="https://projectpythia.org"><div class="myst-home-link-logo mr-3 flex items-center"><img src="/snow-observations-cookbook/_preview/5/build/config-item-24692dda-6a6974aa05c5eb73c6410f77cd3d9bc6.svg" class="h-9 dark:hidden" height="2.25rem"/><img src="/snow-observations-cookbook/_preview/5/build/config-item-84d6d338-5088869e64f16c6dba2fd8196f6bbba1.svg" class="hidden h-9 dark:block" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"><div class="myst-top-nav-item relative inline-block mx-2 grow-0"><a href="https://projectpythia.org" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Home</a></div><div class="myst-top-nav-item relative inline-block mx-2 grow-0"><a href="https://foundations.projectpythia.org" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Foundations</a></div><div class="myst-top-nav-item relative inline-block mx-2 grow-0"><a href="https://cookbooks.projectpythia.org/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Cookbooks</a></div><div class="myst-top-nav-item relative inline-block mx-2 grow-0"><a href="https://projectpythia.org/resource-gallery/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Resources</a></div><div class="myst-top-nav-item relative inline-block mx-2 grow-0"><a href="https://projectpythia.org/#join-us" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Community</a></div></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"><div class="myst-action-menu relative" data-headlessui-state=""><div><button class="myst-action-menu-button flex text-sm bg-transparent rounded-full focus:outline-none" id="headlessui-menu-button-:Rr5cp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Open Menu</span><div class="flex items-center text-stone-200 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="p-1"><path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="hidden sm:block"><a href="https://projectpythia.org" target="_blank" rel="noopener noreferrer" class="inline-block px-4 py-2 mx-1 mt-0 leading-none border rounded text-md border-stone-700 dark:border-white text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 hover:bg-neutral-100">Project Pythia</a></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"><a href="https://projectpythia.org" target="_blank" rel="noopener noreferrer" class="myst-primary-sidebar-item-short p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Home</a><a href="https://foundations.projectpythia.org" target="_blank" rel="noopener noreferrer" class="myst-primary-sidebar-item-short p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Foundations</a><a href="https://cookbooks.projectpythia.org/" target="_blank" rel="noopener noreferrer" class="myst-primary-sidebar-item-short p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Cookbooks</a><a href="https://projectpythia.org/resource-gallery/" target="_blank" rel="noopener noreferrer" class="myst-primary-sidebar-item-short p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Resources</a><a href="https://projectpythia.org/#join-us" target="_blank" rel="noopener noreferrer" class="myst-primary-sidebar-item-short p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Community</a></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="Snow Observations Cookbook" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/snow-observations-cookbook/_preview/5/">Snow Observations Cookbook</a><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Preamble" class="block break-words rounded py-2 grow cursor-pointer">Preamble</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmpsp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmpsp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Data Access" class="block break-words rounded py-2 grow cursor-pointer">Data Access</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rupsp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rupsp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Observations" class="block break-words rounded py-2 grow cursor-pointer">Observations</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16psp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16psp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer" class="myst-fm-license-cc-badge opacity-50 hover:opacity-100 text-inherit hover:text-inherit myst-fm-license-content" aria-label="Content License: Creative Commons Attribution 4.0 International (CC-BY-4.0)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-license-cc-icon myst-fm-license-cc-icon-main inline-block mx-1"><title>Content License: Creative Commons Attribution 4.0 International (CC-BY-4.0)</title><path d="M12 2.2c2.7 0 5 1 7 2.9.9.9 1.6 2 2.1 3.1.5 1.2.7 2.4.7 3.8 0 1.3-.2 2.6-.7 3.8-.5 1.2-1.2 2.2-2.1 3.1-1 .9-2 1.7-3.2 2.2-1.2.5-2.5.7-3.7.7s-2.6-.3-3.8-.8c-1.2-.5-2.2-1.2-3.2-2.1s-1.6-2-2.1-3.2-.8-2.4-.8-3.7c0-1.3.2-2.5.7-3.7S4.2 6 5.1 5.1C7 3.2 9.3 2.2 12 2.2zM12 4c-2.2 0-4.1.8-5.6 2.3C5.6 7.1 5 8 4.6 9c-.4 1-.6 2-.6 3s.2 2.1.6 3c.4 1 1 1.8 1.8 2.6S8 19 9 19.4c1 .4 2 .6 3 .6s2.1-.2 3-.6c1-.4 1.9-1 2.7-1.8 1.5-1.5 2.3-3.3 2.3-5.6 0-1.1-.2-2.1-.6-3.1-.4-1-1-1.8-1.7-2.6C16.1 4.8 14.2 4 12 4zm-.1 6.4l-1.3.7c-.1-.3-.3-.5-.5-.6-.2-.1-.4-.2-.6-.2-.9 0-1.3.6-1.3 1.7 0 .5.1.9.3 1.3.2.3.5.5 1 .5.6 0 1-.3 1.2-.8l1.2.6c-.3.5-.6.9-1.1 1.1-.5.3-1 .4-1.5.4-.9 0-1.6-.3-2.1-.8-.5-.6-.8-1.3-.8-2.3 0-.9.3-1.7.8-2.2.6-.6 1.3-.8 2.1-.8 1.2 0 2.1.4 2.6 1.4zm5.6 0l-1.3.7c-.1-.3-.3-.5-.5-.6-.2-.1-.4-.2-.6-.2-.9 0-1.3.6-1.3 1.7 0 .5.1.9.3 1.3.2.3.5.5 1 .5.6 0 1-.3 1.2-.8l1.2.6c-.3.5-.6.9-1.1 1.1-.4.2-.9.3-1.4.3-.9 0-1.6-.3-2.1-.8s-.8-1.3-.8-2.2c0-.9.3-1.7.8-2.2.5-.5 1.2-.8 2-.8 1.2 0 2.1.4 2.6 1.4z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-license-cc-icon myst-fm-license-cc-icon-by inline-block mr-1"><title>Credit must be given to the creator</title><path d="M12 2.2c2.7 0 5 .9 6.9 2.8 1.9 1.9 2.8 4.2 2.8 6.9s-.9 5-2.8 6.8c-2 1.9-4.3 2.9-7 2.9-2.6 0-4.9-1-6.9-2.9-1.8-1.7-2.8-4-2.8-6.7s1-5 2.9-6.9C7 3.2 9.3 2.2 12 2.2zM12 4c-2.2 0-4.1.8-5.6 2.3C4.8 8 4 9.9 4 12c0 2.2.8 4 2.4 5.6C8 19.2 9.8 20 12 20c2.2 0 4.1-.8 5.7-2.4 1.5-1.5 2.3-3.3 2.3-5.6 0-2.2-.8-4.1-2.3-5.7C16.1 4.8 14.2 4 12 4zm2.6 5.6v4h-1.1v4.7h-3v-4.7H9.4v-4c0-.2.1-.3.2-.4.1-.2.2-.2.4-.2h4c.2 0 .3.1.4.2.2.1.2.2.2.4zm-4-2.5c0-.9.5-1.4 1.4-1.4s1.4.5 1.4 1.4c0 .9-.5 1.4-1.4 1.4s-1.4-.5-1.4-1.4z"></path></svg></a><a href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener noreferrer" title="Code License: Apache License 2.0 (Apache-2.0)" class="myst-fm-license-badge text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-license-icon myst-fm-license-icon-osi mx-1 inline-block opacity-60 hover:opacity-100 hover:text-[#599F46] myst-fm-license-code"><path d="M13.2 15.6c1.4-.5 2.1-1.6 2.1-3.3S13.8 8.9 12 8.9c-1.9 0-3.3 1.6-3.3 3.3 0 1.8.8 3 2.2 3.4l-2.3 5.9c-3.1-.8-6.3-4.6-6.3-9.3 0-5.5 4.3-10 9.7-10s9.8 4.5 9.8 10c0 4.7-3.1 8.5-6.3 9.3l-2.3-5.9z"></path></svg></a><a href="https://en.wikipedia.org/wiki/Open_access" target="_blank" rel="noopener noreferrer" title="Open Access" class="myst-fm-open-access-badge text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-block-open-access-icon mr-1 inline-block opacity-60 hover:opacity-100 hover:text-[#E18435]"><path d="M17.1 12.6h-2V7.5c0-1.7-1.4-3.1-3-3.1-.8 0-1.6.3-2.2.9-.6.5-.9 1.3-.9 2.2v.7H7v-.7c0-1.4.5-2.7 1.5-3.7s2.2-1.5 3.6-1.5 2.6.5 3.6 1.5 1.5 2.3 1.5 3.7v5.1z"></path><path d="M12 21.8c-.8 0-1.6-.2-2.3-.5-.7-.3-1.4-.8-1.9-1.3-.6-.6-1-1.2-1.3-2-.3-.8-.5-1.6-.5-2.4s.2-1.6.5-2.4c.3-.7.7-1.4 1.3-2s1.2-1 1.9-1.3c.7-.3 1.5-.5 2.3-.5.8 0 1.6.2 2.3.5.7.3 1.4.8 1.9 1.3.6.6 1 1.2 1.3 2 .3.8.5 1.6.5 2.4s-.2 1.6-.5 2.4c-.3.7-.7 1.4-1.3 2-.6.6-1.2 1-1.9 1.3-.7.3-1.5.5-2.3.5zm0-10.3c-2.2 0-4 1.8-4 4.1s1.8 4.1 4 4.1 4-1.8 4-4.1-1.8-4.1-4-4.1z"></path><circle cx="12" cy="15.6" r="1.7"></circle></svg></a><a href="https://github.com/SnowEx/snow-observations-cookbook" title="GitHub Repository: SnowEx/snow-observations-cookbook" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/SnowEx/snow-observations-cookbook/edit/HEAD/notebooks/microstructure-tutorial.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div><button class="myst-fm-launch-button inline-flex size-[24px] hover:text-[#E18435] items-center justify-center" aria-label="Launch in external computing interface" title="Launch in external computing interface" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Re8ucp:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="myst-fm-launch-icon"><path d="M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div><h1 class="myst-fm-block-title mb-0">Microstructure</h1><header class="myst-fm-authors-affiliations mt-4 not-prose"><div class="myst-fm-authors-list"><span class="myst-fm-author font-semibold text-sm myst-fm-author-item inline-block"><button class="myst-fm-author-popover focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78ucp:" data-state="closed"><span class="myst-fm-author-name">The NASA Snow Observations Community</span></button></span></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div class="myst-jp-nb-toolbar sticky top-[60px] pb-[14px] flex justify-end w-full z-20 pointer-events-none"><div class="myst-jp-nb-toolbar-inner flex p-1 m-1 space-x-1 border rounded-full shadow pointer-events-auto border-stone-300 bg-white/80 dark:bg-stone-900/80 backdrop-blur"><div class="myst-jp-nb-toolbar-power rounded"><button class="myst-jp-nb-toolbar-power-btn flex text-center rounded-full cursor-pointer text-stone-800 dark:text-white hover:opacity-100 opacity-60" aria-label="start compute environment"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="inline-block w-6 h-6 align-top"><title>Launch kernel</title><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"></path></svg></button></div></div></div><div id="skip-to-article"></div><div id="VMIIj1ReSF" class="myst-jp-nb-block relative group/block"><p>by Mike Durand, School of Earth Sciences and Byrd Polar &amp; Climate Research Center <a target="_blank" rel="noreferrer" href="mailto:durand.8@osu.edu" class="">durand.8@osu.edu</a></p><h2 id="learning-objectives" class="relative group"><span class="heading-text">Learning Objectives</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#learning-objectives" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>At the end of this tutorial you should be able to...</p><ul><li><p>Explain why microstructure is important for remote sensing</p></li><li><p>Define measures of microstructure, especially specific surface area</p></li><li><p>Access and visualize tree different microstructure measurements from SnowEx Grand Mesa 2020</p></li></ul><h2 id="caveats" class="relative group"><span class="heading-text">Caveats</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#caveats" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The integrating sphere and the SMP data are published at NSIDC; you can read the pages there for documentation etc. However the microCT data are not yet published; please contact Lauren Farnsworth (<a target="_blank" rel="noreferrer" href="mailto:lauren.b.farnsworth@usace.army.mil" class="">lauren<wbr/>.b<wbr/>.farnsworth@usace<wbr/>.army<wbr/>.mil</a>) for questions on the CT data.</p><h2 id="fun-facts-about-snow-microstructure" class="relative group"><span class="heading-text">Fun Facts About Snow Microstructure</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#fun-facts-about-snow-microstructure" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Snow microstructure plays a super important role in snow physics and snow remote sensing, so a lot of effort went towards measuring it in SnowEx 2020!</p><p>There are several different quantities that are used to measure snow microstructure, including “grain size”. Grain size measurements are challenging to make in a repeatable way, and are also challenging to relate to the physical quantities that control remote sensing measurements. In the last ~15 years or so, a lot of effort has gone into more objective ways to measure microstructure.</p><p>Snow microstructure  governs response of remote sensing to snow cover for visible, near-infrared and high-frequency microwave wavelengths. See Figure 1, below, and read <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1016/j.rse.2007.07.029" target="_blank" rel="noreferrer" class="hover-link">Dozier <em>et al.</em>, 2009</a></cite></span>, for more information.</p><img id="NvFYY1YSpA" style="width:500px;margin-left:auto;margin-right:auto" src="/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg" data-canonical-url="./images/microstructure/dozier2009_fig2.jpg" class=""/><p><strong>Snow microstructure governs visible and near-infrared reflectance. This is figure 2 from<div class=""><div class=""></div></div></strong></p><p>Radar measurements such as those made by the Ku-band SWEARR instrument are also very sensitive to snow microstructure.</p><img id="IEIA8203B8" style="width:500px;margin-left:auto;margin-right:auto" src="/snow-observations-cookbook/_preview/5/build/modeled-swe-L-respon-e0c27380e322c4557b8296a45ebe2cb6.png" data-canonical-url="./images/microstructure/modeled-swe-L-response.png" class=""/><p><strong>Modeled response of radar backscatter to SWE and single-scatter albedo (which in turn is a function of snow microstructure), based on a simple model suggested by<div class=""><div class=""></div></div></strong></p><p>Snow microstructure is super important to efforts to launch a Ku-band SAR to measure global snow water equivalent (SWE). An important area of research right now is exploring how to use estimates of microstructure (e.g. from snowpack evolution models) to improve SWE retrievals.</p><p>Snow microstructure evolves through the season, and varies a lot with depth. Snow microstructure evolution is controlled by other snow properties, such as snow temperature, snow height and snow liquid water content. A really great resource on snow microstructure is Kelly Elder’s recent talks:</p><ul><li><p><a target="_blank" rel="noreferrer" href="https://boisestate.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=9a051fe4-db09-4f1d-92db-acd1003cc5cc" class="">Snow Metamorphism</a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://boisestate.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=136f7580-c1e2-4c55-ab33-acca003c23d6" class="">Snow Grain Identification</a></p></li></ul></div><div id="yl6HMCqI31" class="myst-jp-nb-block relative group/block"><h2 id="snowex-microstructure-measurement-background" class="relative group"><span class="heading-text">SnowEx Microstructure Measurement Background</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#snowex-microstructure-measurement-background" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><h3 id="basic-microstructure-definitions" class="relative group"><span class="heading-text">Basic Microstructure Definitions</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#basic-microstructure-definitions" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Microstructure definitions take a bit of getting used to. It’s very easy to get confused. Specific surface area (SSA) is one of the most important quantity used to measure snow microstructure, so that’s the focus here. Note that SSA is not the be-all and end-all, so there’s a short table describing how to relate SSA to other quantities just below.  A couple of good reads on all of this is <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.3189/172756502781831287" target="_blank" rel="noreferrer" class="hover-link">Mätzler, 2002</a></cite></span> and <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1016/j.coldregions.2010.06.006" target="_blank" rel="noreferrer" class="hover-link">Matzl &amp; Schneebeli, 2010</a></cite></span>.</p><img id="FCWTMD7ReQ" style="width:500px;margin-left:auto;margin-right:auto" src="/snow-observations-cookbook/_preview/5/build/lowe_etal_2011_v2-31cd1b64128fcf6d20ddd779feda911b.png" data-canonical-url="./images/microstructure/lowe_etal_2011_v2.png" class=""/><p><strong>Coarse and fine snow microstructure revealed by microCT. The microCT snow renderings on the left are Figure 2 from<div class=""><div class=""></div></div>. The colorbars indicate that fine-grained snow (a) has high SSA and low D <sub>eq</sub> , whereas coarse-grained snow (b) has low SSA and high D <sub>eq</sub> .</strong></p><p>Use Figure 3 above to ground these definitions: SSA is the surface area of the ice-air interface, normalized in some way. Confusingly, SSA is defined in a couple of different ways in the literature: sometimes, surface area within a particular volume of interest (VOI) is normalized by the mass of the ice in the VOI. As defined in this way, SSA has units of length squared per mass, usually expressed as m<sup>2</sup>/kg. Instead of normalizing by mass, SSA is sometimes defined by normalizing by the volume of the VOI (this is SSA<sub>v</sub> in <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1016/j.coldregions.2010.06.006" target="_blank" rel="noreferrer" class="hover-link">Matzl &amp; Schneebeli, 2010</a></cite></span>), and sometimes by normalizing by the volume of the ice in the VOI (this is SSA<sub>i</sub> in <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1016/j.coldregions.2010.06.006" target="_blank" rel="noreferrer" class="hover-link">Matzl &amp; Schneebeli, 2010</a></cite></span>, and q in <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.3189/172756502781831287" target="_blank" rel="noreferrer" class="hover-link">Mätzler, 2002</a></cite></span>). Here let’s just go with the first definition I mentioned:</p><div id="SK0yXH9K6S" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mi>S</mi><mi>A</mi><mo>=</mo><mfrac><mtext>Surface area of ice-air interface</mtext><mtext>Mass of ice</mtext></mfrac><mspace width="1em"/></mrow><annotation encoding="application/x-tex">SSA = \frac{\text{Surface area of ice-air interface}}{\text{Mass of ice}} \quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">SS</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Mass of ice</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Surface area of ice-air interface</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#SK0yXH9K6S" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->1<!-- -->)</a></div></div><p>SSA tends to take values between 5 and 150 m<sup>2</sup>/kg: fresh, fine-grained snow has high SSA, and coarse snow has low SSA. Because it takes a little while for SSA values to become intuitive, a useful derived metric is the equivalent grain diameter (D<sub>eq</sub>; note that this is identical to D<sub>q</sub> in <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.3189/172756502781831287" target="_blank" rel="noreferrer" class="hover-link">Mätzler, 2002</a></cite></span>), which by definition is the diameter that a sphere would have if it had a particular value of SSA. This is a one-to-one relationship, so there are no assumptions involved.</p><div id="leVQHJf0YH" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>D</mi><mrow><mi>e</mi><mi>q</mi></mrow></msub><mo>=</mo><mfrac><mn>6</mn><mrow><mi>S</mi><mi>S</mi><mi>A</mi><msub><mi>ρ</mi><mi>i</mi></msub></mrow></mfrac><mspace width="1em"/></mrow><annotation encoding="application/x-tex">D_{eq} = \frac{6}{SSA \rho_i} \quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2019em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">SS</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#leVQHJf0YH" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->2<!-- -->)</a></div></div></div><div id="awlkklrJhx" class="myst-jp-nb-block relative group/block"><p>Relationships of specific surface area to other metrics are given in this list if you’re curious but otherwise just skip past this bit</p><ul><li><p>Sometimes people refer to the “optical grain diameter”, which is the same as D<sub>eq</sub>. The “optical” refers to <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1029/1999JD900496" target="_blank" rel="noreferrer" class="hover-link">Grenfell &amp; Warren, 1999</a></cite></span>, who showed that any snow with a particular SSA had similar (not identical) radiative transfer properties regardless of particle shape in the visible and near-infrared parts of the spectrum. But note the same is not true in the microwave spectrum.</p></li><li><p>Autocorrelation length is usually one of two metrics that summarize the two-point microstructure autocorelation function of the three-dimensional ice-air matrix. Think of the probability that you change media (from ice to air or vice versa) as you move a certain distance within the snow microstructure. The length that defines the likelihood that you’ll change media is (an approximation of the correlation length). SSA is by definition (with almost no assumptions) equal to the slope of the autocorrelation function at the origin. But microwave scattering is controlled by correlations at longer lags. For more check out <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.3189/172756502781831287" target="_blank" rel="noreferrer" class="hover-link">Mätzler, 2002</a></cite></span>. The lack of closing the loop between SSA and correlation length is a significant issue when we have measurements of SSA and microwaves as we do in SnowEx.</p></li><li><p>Geometric grain size is what we usually measure when we measure with a hand lens. You can try to relate it to SSA or corelation length, but it is not always possible, and will change with different observers.</p></li></ul><p>Time to stop this list but there are many other metrics as well.</p></div><div id="hWOm4x3I5z" class="myst-jp-nb-block relative group/block"><h3 id="microstructure-instruments" class="relative group"><span class="heading-text">Microstructure Instruments</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#microstructure-instruments" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now that we know what we’re trying to measure (SSA, or correlation length) how do we actually measure? let’s talk just about three techniques used in SnowEx 2020 Grand Mesa.</p><img id="xk920soOXH" style="width:800px;margin-left:auto;margin-right:auto" src="/snow-observations-cookbook/_preview/5/build/microCT-f4cb6f3cc8c7afa8b7bb3532c9393262.png" data-canonical-url="./images/microstructure/microCT.png" class=""/><p><strong>Left: Lauren Farnsworth transports microCT samples from field sites back to Grand Mesa Lodge in a cold storage container. Right: the microCT machine in the lab at CRREL.</strong></p><p>Micro-computed tomography (microCT) is the only laboratory-based method used here, and it is the gold standard, although it does still come with caveats. The idea of microCT is to remove a sample of snow from a snow pit face, and either cast it with a compound such as diethyl pthalate that is still a liquid at 0° C, or preserve the same at a very cold temperature. Then the sample is sent back to the laboratory, and bombared with x-rays, similar to how you get x-rays to see if a bone is broken at the doctor. For much more on microCT, check out <span class="cite-group parenthetical"><cite class="" data-state="closed"><span class="hover-link">HEGGLI <em>et al.</em>, 2011</span></cite></span>. microCT can be used to extract a ton of information about snow microstructure, including SSA, correlation length and many others.</p><img id="qOOKscx8Sv" style="width:800px;margin-left:auto;margin-right:auto" src="/snow-observations-cookbook/_preview/5/build/IntegratingSpheres-150db32cda29e9bb8d27df45bce09d61.png" data-canonical-url="./images/microstructure/IntegratingSpheres.png" class=""/><p><strong>Left: Kehan Yang operates an IceCube unit at the Grand Mesa Lodge intercomparison snowpit. Top right: schematic showing the integrating sphere measurement principle, from<div class=""><div class=""></div></div>. Bottom right: snow in the IceCube sampling container, from<div class=""><div class=""></div></div>.</strong></p><p>Integrating spheres are field-based and you make the measurements on samples extracted from the snowpit face. The principle of the measurement is based on firing a laser at the snow sample, within a special reflective hollow sphere, where one side is filled by the snow sample, and measuring how much of the laser is reflected at a sensor at a known geometry. For more information, check out <span class="cite-group parenthetical"><cite class="" data-state="closed"><span class="hover-link">Gallet <em>et al.</em>, 2009</span></cite></span>.  Most integrating sphere measurements are either made by a commercial firm (A2 Photonics) known as the <a target="_blank" rel="noreferrer" href="https://a2photonicsensors.com/icecube-ssa/" class="">IceCube</a> or a version constructed at the University of Sherbrooke known as the IRIS <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.3189/2012jog11j248" target="_blank" rel="noreferrer" class="hover-link">Montpetit <em>et al.</em>, 2012</a></cite></span>. These approaches are set up to measure SSA only. There were three of these at Grand Mesa - one of the Sherbrooke IRIS units, and two IceCubes, one from Finnish Meteorological Institute, and one from Ohio State University.</p><img id="ShBb2kAADV" style="width:800px;margin-left:auto;margin-right:auto" src="/snow-observations-cookbook/_preview/5/build/SMP-0a2dc7ab07e8fd97fedff24b7dc16b05.png" data-canonical-url="./images/microstructure/SMP.png" class=""/><p><strong>Left: Megan Mason operates the SMP. Right: Closeup of the SMP sensor tip.</strong></p><p>Snow micropenetrometers are also a field-based approach, but they do not require a snowpit, enabling far more observations to be made. Instead, an automated motor pushes a probe vertically downwards into the snowpack. The probe measures the force required to break snow microstructure, yielding a wealth of information. Snow density, specific surface area and correlation length can be retrieved; for background see <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1016/j.coldregions.2011.09.001" target="_blank" rel="noreferrer" class="hover-link">Löwe &amp; Herwijnen, 2012</a></cite></span> and <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1002/2014jf003266" target="_blank" rel="noreferrer" class="hover-link">Proksch <em>et al.</em>, 2015</a></cite></span>. The micropen effort at Grand Mesa was led by Boise State University. A key thing to be aware of is that differences in the various SMP instruments mean that the empirical relationship of <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1002/2014jf003266" target="_blank" rel="noreferrer" class="hover-link">Proksch <em>et al.</em>, 2015</a></cite></span> will give quite poor results for the particular instrument used in SnowEx, as fully explained in <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.5194/tc-14-1829-2020" target="_blank" rel="noreferrer" class="hover-link">Calonne <em>et al.</em>, 2020</a></cite></span>.</p><p>These methods are not the only ways to measure microstructure! There are several others not mentioned here, but not used at Grand Mesa 2020. Ask if interested.</p><h2 id="snowex-microstructure-measurement-data-overview" class="relative group"><span class="heading-text">SnowEx Microstructure Measurement Data Overview</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#snowex-microstructure-measurement-data-overview" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Of the three methods described above, microCT is by far the most expensive and most time consuming. Samples have to be transported back to the laboratory and the processing time requires a microCT machine. Thus the fewest CT sapmles are taken.</p><p>The integrating spheres require a snowpit to be dug, so we have an intermediate number of them: ~100.</p><p>The micropen measurements are by far the fastest to make, so a cross pattern of SMP measurements was made on orthogonal directions intersecting at the snowpit. There are thousands of SMP profiles from Grand Mesa 2020.</p></div><div id="nNaKkQso2J" class="myst-jp-nb-block relative group/block"><h2 id="working-with-the-data" class="relative group"><span class="heading-text">Working with the data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#working-with-the-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We’re going to do two things! First, we’ll intercompare the three different integrating sphere instruments at four different pits where we had multiple instruments operating. We’d expect these data to be fairly self-consistent. Second, we’ll compare all three methods (integrating sphere, SMP and microCT) at a single pit where we had all of these measurements present. Here especially with the SMP we would expect to need to intercalibrate the data to match local conditions; so far SSA has only been fit to SMP force measurements in one study, and we should assume we’ll need a local calibration to get a tight fit.</p></div><div id="de9FSf9vBH" class="myst-jp-nb-block relative group/block"><h3 id="id-0-load-needed-modules" class="relative group"><span class="heading-text">0. Load needed modules</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-0-load-needed-modules" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="E6R2JQxKx9" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from snowexsql.lambda_client import SnowExLambdaClient

# Modules needed to work with data
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
import contextily as cx

from snowmicropyn import Profile
from snowmicropyn import proksch2015

import os
import warnings
warnings.filterwarnings(&#x27;ignore&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="3U9Vwk6FiBBwLYbzXGD2_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="EVVSce9Nna" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Initialize client
client = SnowExLambdaClient()

# Get all measurement classes dynamically
classes = client.get_measurement_classes()
LayerMeasurements = classes[&#x27;LayerMeasurements&#x27;]

print(&quot;🔍 Testing Lambda connection...&quot;)
connection_test = client.test_connection()
print(f&quot;✅ Connected: {connection_test.get(&#x27;connected&#x27;, False)}&quot;)
if connection_test.get(&#x27;connected&#x27;):
    print(f&quot;📊 Database: {connection_test.get(&#x27;version&#x27;, &#x27;Unknown version&#x27;)}&quot;)
else:
    print(&quot;❌ Connection failed&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="N2md9hg5ZWmJSxU8GdJv3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>🔍 Testing Lambda connection...
</span></code></pre></div></div><div data-name="safe-output-error"><div><pre class="myst-jp-error-output text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">NoCredentialsError</span><span>                        Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/lambda_client.py:237</span><span>, in </span><span style="color:rgb(0, 187, 187)">SnowExLambdaClient._invoke_lambda</span><span style="color:rgb(0, 0, 187)">(self, action, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    236</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">try</span><span>:
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">237</span><span>     response = </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">lambda_client</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">invoke</span><span style="background-color:rgb(187, 187, 0)">(</span><span>
</span><span style="color:rgb(0, 187, 0)">    238</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">FunctionName</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">function_name</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    239</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">InvocationType</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&#x27;</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">RequestResponse</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&#x27;</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    240</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">Payload</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">json</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">dumps</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">payload</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    241</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    243</span><span>     result = json.loads(response[</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">Payload</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>].read().decode(</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">utf-8</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>))

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/client.py:602</span><span>, in </span><span style="color:rgb(0, 187, 187)">ClientCreator._create_api_method.&lt;locals&gt;._api_call</span><span style="color:rgb(0, 0, 187)">(self, *args, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    601</span><span> </span><span style="color:rgb(95, 135, 135);font-style:italic"># The &quot;self&quot; in this scope is referring to the BaseClient.</span><span>
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">602</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_make_api_call</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">operation_name</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/context.py:123</span><span>, in </span><span style="color:rgb(0, 187, 187)">with_current_context.&lt;locals&gt;.decorator.&lt;locals&gt;.wrapper</span><span style="color:rgb(0, 0, 187)">(*args, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    122</span><span>     hook()
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">123</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0)">func</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">args</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/client.py:1060</span><span>, in </span><span style="color:rgb(0, 187, 187)">BaseClient._make_api_call</span><span style="color:rgb(0, 0, 187)">(self, operation_name, api_params)</span><span>
</span><span style="color:rgb(0, 187, 0)">   1059</span><span>     apply_request_checksum(request_dict)
</span><span style="color:rgb(0, 187, 0)">-&gt; </span><span style="color:rgb(0, 187, 0)">1060</span><span>     http, parsed_response = </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_make_request</span><span style="background-color:rgb(187, 187, 0)">(</span><span>
</span><span style="color:rgb(0, 187, 0)">   1061</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">operation_model</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">request_dict</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">request_context</span><span>
</span><span style="color:rgb(0, 187, 0)">   1062</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">   1064</span><span> </span><span style="color:rgb(0, 135, 0)">self</span><span>.meta.events.emit(
</span><span style="color:rgb(0, 187, 0)">   1065</span><span>     </span><span style="color:rgb(187, 187, 0)">f</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">after-call.</span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span>service_id</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">.</span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span>operation_name</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>,
</span><span style="color:rgb(0, 187, 0)">   1066</span><span>     http_response=http,
</span><span style="color:rgb(0, 187, 0)">   (...)</span><span style="color:rgb(0, 187, 0)">   1069</span><span>     context=request_context,
</span><span style="color:rgb(0, 187, 0)">   1070</span><span> )

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/client.py:1084</span><span>, in </span><span style="color:rgb(0, 187, 187)">BaseClient._make_request</span><span style="color:rgb(0, 0, 187)">(self, operation_model, request_dict, request_context)</span><span>
</span><span style="color:rgb(0, 187, 0)">   1083</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">try</span><span>:
</span><span style="color:rgb(0, 187, 0)">-&gt; </span><span style="color:rgb(0, 187, 0)">1084</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_endpoint</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">make_request</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">operation_model</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">request_dict</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">   1085</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">except</span><span> </span><span style="color:rgb(215, 95, 95);font-weight:bold">Exception</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">as</span><span> e:

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/endpoint.py:119</span><span>, in </span><span style="color:rgb(0, 187, 187)">Endpoint.make_request</span><span style="color:rgb(0, 0, 187)">(self, operation_model, request_dict)</span><span>
</span><span style="color:rgb(0, 187, 0)">    114</span><span> logger.debug(
</span><span style="color:rgb(0, 187, 0)">    115</span><span>     </span><span style="color:rgb(187, 187, 0)">&quot;</span><span style="color:rgb(187, 187, 0)">Making request for </span><span style="color:rgb(175, 95, 135);font-weight:bold">%s</span><span style="color:rgb(187, 187, 0)"> with params: </span><span style="color:rgb(175, 95, 135);font-weight:bold">%s</span><span style="color:rgb(187, 187, 0)">&quot;</span><span>,
</span><span style="color:rgb(0, 187, 0)">    116</span><span>     operation_model,
</span><span style="color:rgb(0, 187, 0)">    117</span><span>     request_dict,
</span><span style="color:rgb(0, 187, 0)">    118</span><span> )
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">119</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_send_request</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">request_dict</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">operation_model</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/endpoint.py:196</span><span>, in </span><span style="color:rgb(0, 187, 187)">Endpoint._send_request</span><span style="color:rgb(0, 0, 187)">(self, request_dict, operation_model)</span><span>
</span><span style="color:rgb(0, 187, 0)">    195</span><span> </span><span style="color:rgb(0, 135, 0)">self</span><span>._update_retries_context(context, attempts)
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">196</span><span> request = </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">create_request</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">request_dict</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">operation_model</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    197</span><span> success_response, exception = </span><span style="color:rgb(0, 135, 0)">self</span><span>._get_response(
</span><span style="color:rgb(0, 187, 0)">    198</span><span>     request, operation_model, context
</span><span style="color:rgb(0, 187, 0)">    199</span><span> )

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/endpoint.py:132</span><span>, in </span><span style="color:rgb(0, 187, 187)">Endpoint.create_request</span><span style="color:rgb(0, 0, 187)">(self, params, operation_model)</span><span>
</span><span style="color:rgb(0, 187, 0)">    131</span><span>     event_name = </span><span style="color:rgb(187, 187, 0)">f</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">request-created.</span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span>service_id</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">.</span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span>operation_model.name</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">132</span><span>     </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_event_emitter</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">emit</span><span style="background-color:rgb(187, 187, 0)">(</span><span>
</span><span style="color:rgb(0, 187, 0)">    133</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">event_name</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    134</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">request</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">request</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    135</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">operation_name</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">operation_model</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">name</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    136</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    137</span><span> prepared_request = </span><span style="color:rgb(0, 135, 0)">self</span><span>.prepare_request(request)

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/hooks.py:412</span><span>, in </span><span style="color:rgb(0, 187, 187)">EventAliaser.emit</span><span style="color:rgb(0, 0, 187)">(self, event_name, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    411</span><span> aliased_event_name = </span><span style="color:rgb(0, 135, 0)">self</span><span>._alias_event_name(event_name)
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">412</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_emitter</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">emit</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">aliased_event_name</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/hooks.py:256</span><span>, in </span><span style="color:rgb(0, 187, 187)">HierarchicalEmitter.emit</span><span style="color:rgb(0, 0, 187)">(self, event_name, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    246</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">&quot;&quot;&quot;</span><span>
</span><span style="color:rgb(0, 187, 0)">    247</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">Emit an event by name with arguments passed as keyword args.</span><span>
</span><span style="color:rgb(0, 187, 0)">    248</span><span> 
</span><span style="color:rgb(0, 187, 0)">   (...)</span><span style="color:rgb(0, 187, 0)">    254</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">         handlers.</span><span>
</span><span style="color:rgb(0, 187, 0)">    255</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">&quot;&quot;&quot;</span><span>
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">256</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_emit</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">event_name</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/hooks.py:239</span><span>, in </span><span style="color:rgb(0, 187, 187)">HierarchicalEmitter._emit</span><span style="color:rgb(0, 0, 187)">(self, event_name, kwargs, stop_on_response)</span><span>
</span><span style="color:rgb(0, 187, 0)">    238</span><span> logger.debug(</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">Event </span><span style="color:rgb(175, 95, 135);font-weight:bold">%s</span><span style="color:rgb(187, 187, 0)">: calling handler </span><span style="color:rgb(175, 95, 135);font-weight:bold">%s</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>, event_name, handler)
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">239</span><span> response = </span><span style="background-color:rgb(187, 187, 0)">handler</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    240</span><span> responses.append((handler, response))

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/signers.py:108</span><span>, in </span><span style="color:rgb(0, 187, 187)">RequestSigner.handler</span><span style="color:rgb(0, 0, 187)">(self, operation_name, request, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    103</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">def</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187)">handler</span><span>(</span><span style="color:rgb(0, 135, 0)">self</span><span>, operation_name=</span><span style="color:rgb(0, 135, 0);font-weight:bold">None</span><span>, request=</span><span style="color:rgb(0, 135, 0);font-weight:bold">None</span><span>, **kwargs):
</span><span style="color:rgb(0, 187, 0)">    104</span><span>     </span><span style="color:rgb(95, 135, 135);font-style:italic"># This is typically hooked up to the &quot;request-created&quot; event</span><span>
</span><span style="color:rgb(0, 187, 0)">    105</span><span>     </span><span style="color:rgb(95, 135, 135);font-style:italic"># from a client&#x27;s event emitter.  When a new request is created</span><span>
</span><span style="color:rgb(0, 187, 0)">    106</span><span>     </span><span style="color:rgb(95, 135, 135);font-style:italic"># this method is invoked to sign the request.</span><span>
</span><span style="color:rgb(0, 187, 0)">    107</span><span>     </span><span style="color:rgb(95, 135, 135);font-style:italic"># Don&#x27;t call this method directly.</span><span>
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">108</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">sign</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">operation_name</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">request</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/signers.py:200</span><span>, in </span><span style="color:rgb(0, 187, 187)">RequestSigner.sign</span><span style="color:rgb(0, 0, 187)">(self, operation_name, request, region_name, signing_type, expires_in, signing_name)</span><span>
</span><span style="color:rgb(0, 187, 0)">    198</span><span>         </span><span style="color:rgb(0, 135, 0);font-weight:bold">raise</span><span> e
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">200</span><span> </span><span style="background-color:rgb(187, 187, 0)">auth</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">add_auth</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">request</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/auth.py:422</span><span>, in </span><span style="color:rgb(0, 187, 187)">SigV4Auth.add_auth</span><span style="color:rgb(0, 0, 187)">(self, request)</span><span>
</span><span style="color:rgb(0, 187, 0)">    421</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">if</span><span> </span><span style="color:rgb(0, 135, 0)">self</span><span>.credentials </span><span style="color:rgb(175, 0, 255);font-weight:bold">is</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">None</span><span>:
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">422</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">raise</span><span> NoCredentialsError()
</span><span style="color:rgb(0, 187, 0)">    423</span><span> datetime_now = get_current_datetime()

</span><span style="color:rgb(187, 0, 0)">NoCredentialsError</span><span>: Unable to locate credentials

During handling of the above exception, another exception occurred:

</span><span style="color:rgb(187, 0, 0)">Exception</span><span>                                 Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 187)">Cell</span><span style="color:rgb(0, 187, 187)"> </span><span style="color:rgb(0, 187, 0)">In[2]</span><span style="color:rgb(0, 187, 0)">, line 9</span><span>
</span><span style="color:rgb(0, 187, 0)">      6</span><span> LayerMeasurements = classes[</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">LayerMeasurements</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>]
</span><span style="color:rgb(0, 187, 0)">      8</span><span> </span><span style="color:rgb(0, 135, 0)">print</span><span>(</span><span style="color:rgb(187, 187, 0)">&quot;</span><span style="color:rgb(187, 187, 0)">🔍 Testing Lambda connection...</span><span style="color:rgb(187, 187, 0)">&quot;</span><span>)
</span><span style="color:rgb(0, 187, 0)">----&gt; </span><span style="color:rgb(0, 187, 0)">9</span><span> connection_test = </span><span style="background-color:rgb(187, 187, 0)">client</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">test_connection</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">     10</span><span> </span><span style="color:rgb(0, 135, 0)">print</span><span>(</span><span style="color:rgb(187, 187, 0)">f</span><span style="color:rgb(187, 187, 0)">&quot;</span><span style="color:rgb(187, 187, 0)">✅ Connected: </span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span>connection_test.get(</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">connected</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>,</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 135, 0);font-weight:bold">False</span><span>)</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">&quot;</span><span>)
</span><span style="color:rgb(0, 187, 0)">     11</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">if</span><span> connection_test.get(</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span style="color:rgb(187, 187, 0)">connected</span><span style="color:rgb(187, 187, 0)">&#x27;</span><span>):

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/lambda_client.py:269</span><span>, in </span><span style="color:rgb(0, 187, 187)">SnowExLambdaClient.test_connection</span><span style="color:rgb(0, 0, 187)">(self)</span><span>
</span><span style="color:rgb(0, 187, 0)">    262</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">def</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187)">test_connection</span><span>(</span><span style="color:rgb(0, 135, 0)">self</span><span>) -&gt; Dict[</span><span style="color:rgb(0, 135, 0)">str</span><span>, Any]:
</span><span style="color:rgb(0, 187, 0)">    263</span><span> </span><span style="color:rgb(undefined, undefined, undefined)">    </span><span style="color:rgb(187, 187, 0);font-style:italic">&quot;&quot;&quot;</span><span>
</span><span style="color:rgb(0, 187, 0)">    264</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">    Test database connection through Lambda</span><span>
</span><span style="color:rgb(0, 187, 0)">    265</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">    </span><span>
</span><span style="color:rgb(0, 187, 0)">    266</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">    Returns:</span><span>
</span><span style="color:rgb(0, 187, 0)">    267</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">        Dict with connection status and database version info</span><span>
</span><span style="color:rgb(0, 187, 0)">    268</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">    &quot;&quot;&quot;</span><span>
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">269</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">_invoke_lambda</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&#x27;</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">test_connection</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&#x27;</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/lambda_client.py:260</span><span>, in </span><span style="color:rgb(0, 187, 187)">SnowExLambdaClient._invoke_lambda</span><span style="color:rgb(0, 0, 187)">(self, action, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    258</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">raise</span><span> </span><span style="color:rgb(215, 95, 95);font-weight:bold">Exception</span><span>(</span><span style="color:rgb(187, 187, 0)">f</span><span style="color:rgb(187, 187, 0)">&quot;</span><span style="color:rgb(187, 187, 0)">Failed to parse Lambda response: </span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span style="color:rgb(0, 135, 0)">str</span><span>(e)</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">&quot;</span><span>)
</span><span style="color:rgb(0, 187, 0)">    259</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">except</span><span> </span><span style="color:rgb(215, 95, 95);font-weight:bold">Exception</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">as</span><span> e:
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">260</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">raise</span><span> </span><span style="color:rgb(215, 95, 95);font-weight:bold">Exception</span><span>(</span><span style="color:rgb(187, 187, 0)">f</span><span style="color:rgb(187, 187, 0)">&quot;</span><span style="color:rgb(187, 187, 0)">Lambda invocation failed: </span><span style="color:rgb(175, 95, 135);font-weight:bold">{</span><span style="color:rgb(0, 135, 0)">str</span><span>(e)</span><span style="color:rgb(175, 95, 135);font-weight:bold">}</span><span style="color:rgb(187, 187, 0)">&quot;</span><span>)

</span><span style="color:rgb(187, 0, 0)">Exception</span><span>: Lambda invocation failed: Unable to locate credentials</span></code></pre></div></div></div></div><div id="aokhnygoee" class="myst-jp-nb-block relative group/block"><h3 id="id-1-intercompare-integrating-sphere-datasets" class="relative group"><span class="heading-text">1. Intercompare Integrating Sphere Datasets</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-intercompare-integrating-sphere-datasets" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="ijPAHSeXGO" class="myst-jp-nb-block relative group/block"><p>There were three integrating spheres. The IRIS unit from University of Sherbrooke was operated by Celine Vargel. The IceCube unit from the Finnish Meteorological Institute was operated by Juha Lemmetyinen. And the IceCube unit from Ohio State was operated by Kehan Yang and Kate Hale. Carefully read the <a target="_blank" rel="noreferrer" href="https://nsidc.org/data/SNEX20_SSA/versions/1" class="">documentation page</a> at NSIDC if you are interested in the data. If you are using the data for a project, please contact the authors and mention what you’re doing - they’ll appreciate it! Contact for SSA is Mike Durand (<a target="_blank" rel="noreferrer" href="mailto:durand.8@osu.edu" class="">durand.8@osu.edu</a>).</p></div><div id="pmoZD19Wpw" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SSA = LayerMeasurements.from_filter(
    type=&#x27;specific_surface_area&#x27;,
    limit=3000,
    verbose=True
)

SSA.head() #check out the results of the query</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="KykG6e6zey5Q2v8N1lbK9" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="wEdSlw2N29" class="myst-jp-nb-block relative group/block"><p>Since we want to intercompare integrating spheres, we need to isolate only the sites that actually had multiple integrating spheres measuring the same snow.</p></div><div id="BTCQX3uz6c" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Grab all the sites with equivalent diameter data (set reduces a list to only its unique entries)
sites = SSA[&#x27;site_name&#x27;].unique()

# Store all site names that have multiple SSA instruments
multi_instr_sites = []
instruments = []

for site in sites:

    # Grab all the layers associated to this site
    site_data = SSA.loc[SSA[&#x27;site_name&#x27;] == site]

    # Do a set on all the instruments used here
    instruments_used = site_data[&#x27;instrument_name&#x27;].unique()

    if len(instruments_used) &gt; 1:
        multi_instr_sites.append(site)

# Get a unqique list of SSA instruments that were colocated
instruments = SSA[&#x27;instrument_name&#x27;].unique()

instruments #check out the list of instruments. note that the IceCube values are displayed as serial numbers</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="DwhkDrN4h-JaFeLoE_2Iv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tTkrACKuqh" class="myst-jp-nb-block relative group/block"><p>Finally, plot all Integrating Sphere SSA profiles at all Multi-Integrating Sphere Sites</p></div><div id="t8YezX983b" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Setup the subplot for each site for each instrument
fig, axes = plt.subplots(1, len(multi_instr_sites), figsize=(4*len(multi_instr_sites), 8))

# Establish plot colors unique to the instrument
c = [&#x27;k&#x27;, &#x27;m&#x27;, &#x27;c&#x27;]
colors = {inst:c[i] for i,inst in enumerate(instruments)}

# Loop over all the multi-instrument sites 
for i, site in enumerate(multi_instr_sites):
    
    # Grab the plot for this site
    ax = axes[i]
    
    # Loop over all the instruments at this site
    for instr in instruments:

        # Grab our profile by site and instrument
        ind = SSA[&#x27;site_name&#x27;] == site 
        ind2 = SSA[&#x27;instrument_name&#x27;] == instr
        profile = SSA.loc[ind &amp; ind2].copy()

        # Don&#x27;t plot it unless there is data
        if len(profile.index) &gt; 0:
            
            # Sort by depth so samples that are take out of order won&#x27;t mess up the plot
            profile = profile.sort_values(by=&#x27;depth&#x27;)
            
            # Layer profiles are always stored as strings. 
            profile[&#x27;value&#x27;] = profile[&#x27;value&#x27;].astype(float)
            
            # Plot our profile
            ax.plot(profile[&#x27;value&#x27;], profile[&#x27;depth&#x27;], colors[instr], label=instr)
   
    # Labeling and plot style choices
    ax.legend()
    ax.set_xlabel(&#x27;SSA [m2/kg]&#x27;)
    ax.set_ylabel(&#x27;Height above snow-soil interface [cm]&#x27;)
    ax.set_title(&#x27;Site {}&#x27;.format(site.upper()))
    
    # Set the x limits to show more detail
    ax.set_xlim((8, 75))
    
plt.tight_layout()
plt.show()
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="SUks3Oj0fMgiPlO6w1vXN" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="xA9aDrWh11" class="myst-jp-nb-block relative group/block"><h3 id="id-2-pull-the-snowmicropenetrometer-data-and-compute-ssa" class="relative group"><span class="heading-text">2. Pull the snowmicropenetrometer data and compute SSA</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-pull-the-snowmicropenetrometer-data-and-compute-ssa" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The next step is to grab some SMP data to compare to. We’re going to get the SMP at site 2N13, where we have a copule of SSA profiles from integrating spheres (as well as microCT data, to be looked at in the next step!).</p><p>The SMP measurements for SnowEx 2020 GrandMesa were all made by Megan Mason. If you’re interested in working with the SMP data, please carefully read the NSIDC <a target="_blank" rel="noreferrer" href="https://nsidc.org/data/SNEX20_SMP/versions/1" class="">documentation page</a>. If you’re planning to work with the data, please reach out to the author; the contact is (Megan Mason <a target="_blank" rel="noreferrer" href="mailto:megan.a.mason@nasa.gov" class="">megan<wbr/>.a<wbr/>.mason@nasa<wbr/>.gov</a>).</p><p>As mentioned above, <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.5194/tc-14-1829-2020" target="_blank" rel="noreferrer" class="hover-link">Calonne <em>et al.</em>, 2020</a></cite></span> tested applying the relationship of <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1002/2014jf003266" target="_blank" rel="noreferrer" class="hover-link">Proksch <em>et al.</em>, 2015</a></cite></span> and got quite poor results, explained them by the difference in hardware between generations of SMP instruments. We were unaware of that when designing the tutorial, and so set up use of the so-called official SMP processing repository, linked below, which has not yet been updated with the latest relationship. This would make a great project, as mentioned later!</p><p>First up, we’ll visualize the location of the SMP profiles, along with the snowpit location. All the data we will be working with is associated with the site label ‘2N13’. We’ll begin by querying all site names in the database and look for that string. We’ll use the <code>get_sites</code> method in the SnowEx API that provides basic information on the name and location of all layer measurement sites.</p></div><div id="dFhpDk2EYi" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Get all sites containing &#x27;2N13&#x27;
sites_with_2N13 = [site for site in LayerMeasurements.all_sites if &#x27;2N13&#x27; in site]
print(f&quot;Found {len(sites_with_2N13)} sites containing &#x27;2N13&#x27;:&quot;)
siteLocations = LayerMeasurements.get_sites(site_names=sites_with_2N13)
siteLocations</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="EnDhEJgqaz-Tha1pJe_Xv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="P6gGbf9F31" class="myst-jp-nb-block relative group/block"><p>The site labeled <code>COGM2N13_20200206</code> refers to the snowpit location, while the remaining 15 sites are SMP observations.</p><p>Next we will plot the locations of these observations to assess their spatial proximity:</p></div><div id="feEOSaCily" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Separate the pit location from SMP locations
pit_location = siteLocations[siteLocations[&#x27;name&#x27;] == &#x27;COGM2N13_20200206&#x27;]
smp_locations = siteLocations[siteLocations[&#x27;name&#x27;] != &#x27;COGM2N13_20200206&#x27;]

# Convert to Web Mercator for basemap
smp_locations_wm = smp_locations.to_crs(epsg=3857)
pit_location_wm = pit_location.to_crs(epsg=3857)

# Create the plot
fig, ax = plt.subplots(figsize=(10, 10))
smp_locations_wm.plot(ax=ax, marker=&#x27;o&#x27;, color=&#x27;orange&#x27;, markersize=100, edgecolor=&#x27;black&#x27;, label=&#x27;SMP Locations&#x27;)
pit_location_wm.plot(ax=ax, marker=&#x27;s&#x27;, color=&#x27;black&#x27;, markersize=150, edgecolor=&#x27;black&#x27;, label=&#x27;Pit Location&#x27;)

# Add labels for SMP locations
for idx, row in smp_locations_wm.iterrows():
    ax.annotate(row[&#x27;name&#x27;], 
                xy=(row.geometry.x, row.geometry.y),
                xytext=(5, 5), 
                textcoords=&#x27;offset points&#x27;,
                fontsize=6,
                bbox=dict(boxstyle=&#x27;round,pad=0.3&#x27;, facecolor=&#x27;white&#x27;, alpha=0.7, edgecolor=&#x27;none&#x27;))

# Add label for pit location
for idx, row in pit_location_wm.iterrows():
    ax.annotate(row[&#x27;name&#x27;], 
                xy=(row.geometry.x, row.geometry.y),
                xytext=(5, 5), 
                textcoords=&#x27;offset points&#x27;,
                fontsize=6,
                bbox=dict(boxstyle=&#x27;round,pad=0.3&#x27;, facecolor=&#x27;white&#x27;, alpha=0.7, edgecolor=&#x27;none&#x27;))

# Zoom out by adding buffer to axis limits
xlim = ax.get_xlim()
ylim = ax.get_ylim()
x_buffer = (xlim[1] - xlim[0]) * 0.5
y_buffer = (ylim[1] - ylim[0]) * 0.5
ax.set_xlim(xlim[0] - x_buffer, xlim[1] + x_buffer)
ax.set_ylim(ylim[0] - y_buffer, ylim[1] + y_buffer)

# Add basemap - using Esri World Imagery for satellite view with terrain
cx.add_basemap(ax, source=cx.providers.Esri.WorldImagery, alpha=0.5)

# Avoid using Scientific notation for coords
ax.ticklabel_format(style=&#x27;plain&#x27;, useOffset=False)

ax.set_xlabel(&#x27;Easting [m]&#x27;, fontsize=12)
ax.set_ylabel(&#x27;Northing [m]&#x27;, fontsize=12)
ax.set_title(&#x27;Site Locations&#x27;, fontsize=14)
ax.legend()
plt.tight_layout()
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="-vSfQdjwNGo4d-Kcn_zBu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ylpYtRiXe6" class="myst-jp-nb-block relative group/block"><p>Next up, let’s find the closest SMP profile to the snowpit, and then find the profile ID of that profile, which is in the comments in the database.</p></div><div id="Kp1tbGMNLV" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Find the closest SMP location to the pit
from shapely.geometry import Point

# Get pit coordinates
pit_coords = pit_location.geometry.values[0]

# Calculate distance from each SMP location to the pit
smp_locations[&#x27;distance_to_pit&#x27;] = smp_locations.geometry.apply(lambda x: x.distance(pit_coords))

# Find the closest SMP location
closest_smp = smp_locations.loc[smp_locations[&#x27;distance_to_pit&#x27;].idxmin()]

print(f&quot;Closest SMP location to pit: {closest_smp[&#x27;name&#x27;]}&quot;)
print(f&quot;Distance: {closest_smp[&#x27;distance_to_pit&#x27;]:.2f} meters&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="MTvFagQQ2f5Bvi54NVBvo" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="aVnOXjDyyq" class="myst-jp-nb-block relative group/block"><p>So the id of the closest SMP profile is <code>2N13-M1174</code>.</p><p>Now we’ll work on acquiring the associated data. Note that the SMP datasets are quite large and store a suite of observations. The SnowEx database currently stores a subset of the data, the force and depth profiles, but the remaining observations are not yet in the database. So for this exercise we will need to download the raw output from the sensor and do some additional processing.</p><p>To do this we go to the <a target="_blank" rel="noreferrer" href="https://nsidc.org/data/SNEX20_SMP/versions/1" class="">SMP page on NSIDC</a>, choose “Download” and searched for the <code>2N13-M1174</code> ID. We’ve downloaded two raw point files, located in the <code>data\microstructure\SMP</code> directory in this repository, just for the sake of this tutorial.</p><p>Now we have to compute SSA from the SMP data. For this, we’ll use the “snowmicropyn” modules created by the Swiss SLF. You can read more about them <a target="_blank" rel="noreferrer" href="https://snowmicropyn.readthedocs.io/en/latest/" class="">at this site</a>. The software is a little out of date on Python versions; just ignore any warnings that pop up below! Also, the use of the  <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1002/2014jf003266" target="_blank" rel="noreferrer" class="hover-link">Proksch <em>et al.</em>, 2015</a></cite></span> relationship is also out-of-date, as mentioned above.</p></div><div id="kQu9M9ZTJm" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">p = Profile.load(&#x27;data/microstructure/SMP/SNEX20_SMP_S19M1174_2N13_20200206.PNT&#x27;,)
plt.plot(p.samples.distance, p.samples.force)
# Prettify our plot a bit
plt.title(p.name)
plt.ylabel(&#x27;Force [N]&#x27;)
plt.xlabel(&#x27;Depth [mm]&#x27;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="dK_2eeNLQnf-A9dJIl8T5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ykxzFTP4WK" class="myst-jp-nb-block relative group/block"><p>The above shows the entire SMP profile; this includes the part of the force profile that is above the snow surface, and thus needs to be removed, in order to apply calculations only to the snow (not the air!).</p></div><div id="vXJlJFA3R9" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">#extract the part of the profile that is in the snow (i.e. remove air)
depth_surf=p.detect_surface()
depth_ground=p.detect_ground()
samples_snow=p.samples_within_distance(begin=depth_surf, end=depth_ground, relativize=False)
samples_snow.distance-=depth_surf
plt.plot(samples_snow.distance, samples_snow.force)
plt.title(p.name)
plt.ylabel(&#x27;Force [N]&#x27;)
plt.xlabel(&#x27;Depth [mm]&#x27;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="601Ypaqi_fchMHbFzmMbt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Hrp964dG1D" class="myst-jp-nb-block relative group/block"><p>The above part of the profile is just the part that is in the snow. PLEASE NOTE that the automated functions are not infallible, and need to be used with care. For now, these need to be compared back to the notes and interpreted manually.</p></div><div id="QAVZRriffP" class="myst-jp-nb-block relative group/block"><p>The next step is the actual calculation of SSA from the force data. It then displays the data and lets you see that there is now a column called SSA! Note that this function is “proksch2015”. You can read about how it works in Martin Proksch’s paper <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.1002/2014jf003266" target="_blank" rel="noreferrer" class="hover-link">Proksch <em>et al.</em>, 2015</a></cite></span>.</p></div><div id="uhxUhVp0lw" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># call using the snowmicropyn library proksch2015
p2015 = proksch2015.calc(p.samples) 
p2015.head() #check out the first few values of SSA</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="KpR61vXtvUOXOUA2KlJwD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Ag5h939dEc" class="myst-jp-nb-block relative group/block"><h3 id="id-3-read-microct-data-and-compare-integrating-sphere-smp-and-ct-data" class="relative group"><span class="heading-text">3. Read microCT data, and compare integrating sphere, SMP and CT data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-read-microct-data-and-compare-integrating-sphere-smp-and-ct-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="kKGFiUd36K" class="myst-jp-nb-block relative group/block"><p>The microCT samples were extracted in the field and processed at CRREL by Lauren Farnsworth, and is not yet published at NSIDC. Please contact her with questions (<a target="_blank" rel="noreferrer" href="mailto:lauren.b.farnsworth@usace.army.mil" class="">lauren<wbr/>.b<wbr/>.farnsworth@usace<wbr/>.army<wbr/>.mil</a>)!</p><p>This module reads in microCT datafiles which are stored as text. Some additional data are available, showing the computer generated slices through the ice-air interface: contact Mike (<a target="_blank" rel="noreferrer" href="mailto:durand.8@osu.edu" class="">durand.8@osu.edu</a>) if you want to look at a subset of these data that Lauren has shared.</p><p>Equivalent grain size is a useful quantity to compare: because it’s proportional to 1/SSA, and because after a point as you increase SSA more and more, all fine-grained snow acts more-or-less the same (converging to e.g. the “fine-grained” curve in Figure 1, above), we’ll look at equivalent diameter instead of SSA in this comparison.</p></div><div id="jnNg6TiY31" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># function to read all microCT data in
#    by Mike Durand June 2021

def read_CT_txt_files(DataDir):
        
    filenames = (f for f in os.scandir(DataDir) if not f.name.startswith(&#x27;.&#x27;))
    n=len(list(filenames)) #to preallocate S    
    
    SSA=np.empty([n])
    height_min=np.empty([n])
    height_max=np.empty([n])

    filenames = (f for f in os.scandir(DataDir) if not f.name.startswith(&#x27;.&#x27;))
    
    count=0
    
    for entry in filenames:

        fname=DataDir + entry.name                
        
        #parse depth range
        split_name=fname.split(&#x27;_&#x27;)
        height_range=split_name[1]
        height_min_max=height_range[0:-2].split(&#x27;-&#x27;)            
        height_max[count]=float(height_min_max[0])
        height_min[count]=float(height_min_max[1])                   
                        
        with open(fname,&quot;r&quot;,encoding=&#x27;iso-8859-1&#x27;) as datafile:            
            for line in datafile:                
                if &#x27;Object surface / volume ratio&#x27; in line:                
                    split_line=line.split(&#x27;,&#x27;)                                        
                    SSA[count]=float(split_line[2])
                    count+=1                    

    #convert from 1/mm to m^2/kg 
    SSA*=1000./917. 
    
    # sort data
    isort=np.argsort(height_min)
    height_min=height_min[isort]
    height_max=height_max[isort]
    SSA=SSA[isort]
 
    return SSA,height_min,height_max</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="RNVUJC4s7IW8bu0s2BKnz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Am67d0B1H6" class="myst-jp-nb-block relative group/block"><h2 id="read-micro-ct-data-for-2n13" class="relative group"><span class="heading-text">Read micro CT data for 2N13</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#read-micro-ct-data-for-2n13" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The full dataset of micro CT data can be found at <a target="_blank" rel="noreferrer" href="https://doi.org/10.5281/zenodo.5504396/files/microstructure.zip" class="">https://<wbr/>zenodo<wbr/>.org<wbr/>/record<wbr/>/5504396<wbr/>/files<wbr/>/microstructure<wbr/>.zip</a>. Here we have already downloaded 5 of those files, just for illustration purposes.</p></div><div id="YnJgWjQD6p" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># read micro CT for 2N13
data_dir=&#x27;data/microstructure/microCT/txt/&#x27;
[SSA_CT,height_min,height_max]=read_CT_txt_files(data_dir)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="StVzD-wsHi8slzaIFVa1l" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="nK3XoFzjSn" class="myst-jp-nb-block relative group/block"><p>Let’s get all the Specific Surface Area from the database for those sites associated with 2N13. We can use the list of sites we already generated above:</p></div><div id="qsFxxY2UOv" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SSA_2N13 = LayerMeasurements.from_filter(
    site=sites_with_2N13,
    type = &#x27;specific_surface_area&#x27;,
    limit = 3000,
    verbose = True)
SSA_2N13.head()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="J7UFNWPvW4flMNsKvi6XF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="iPTrNllbo9" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">instruments_site = SSA_2N13[&#x27;instrument_name&#x27;].unique()

# Loop over all the integrating sphere instruments at this site. plot equivalent diameter
fig,ax = plt.subplots(figsize=(6,8))
for instr in instruments_site:

    # Grab our profile by site and instrument
    ind = SSA_2N13[&#x27;instrument_name&#x27;] == instr
    profile = SSA_2N13.loc[ind].copy()
    # Don&#x27;t plot it unless there is data
    if len(profile.index) &gt; 0:

        # Sort by depth so samples that are take out of order won&#x27;t mess up the plot
        profile = profile.sort_values(by=&#x27;depth&#x27;)

        # Layer profiles are always stored as strings. 
        profile[&#x27;value&#x27;] = 6/917/profile[&#x27;value&#x27;].astype(float)*1000

        # Plot our profile
        ax.plot(profile[&#x27;value&#x27;], profile[&#x27;depth&#x27;], colors[instr], label=instr)
        
#All that&#x27;s left to do is plot the CT and the SMP and label the plot!
ax.plot(6/917/SSA_CT*1000,height_min,label=&#x27;microCT&#x27;)        #CT data

ax.plot(6/917/p2015.P2015_ssa*1000,(max(p2015.distance)-p2015.distance)/10,label=&#x27;SMP&#x27;) #SMP data

# Labeling and plot style choices
ax.legend()
ax.set_xlabel(&#x27;Equivalent diameter, mm&#x27;)
ax.set_ylabel(&#x27;Height above snow-soil interface [cm]&#x27;)
ax.set_title(&#x27;Site {}&#x27;.format(site.upper()))
    
plt.tight_layout()
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="SvEe5L1ydr_aPwuxtNNK5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="vixvgJeOl2" class="myst-jp-nb-block relative group/block"><p>Wow, so the datasets are so very different, with the SMP being by far the most different. Comparing with <span class="cite-group parenthetical"><cite class="" data-state="closed"><a href="https://doi.org/10.5194/tc-14-1829-2020" target="_blank" rel="noreferrer" class="hover-link">Calonne <em>et al.</em>, 2020</a></cite></span> shows that the SMP is off in the same direction as diagnosed in that paper. Thus, the difference is most likely due to the difference in SMP instruments. Dr. Mel Sandells of Northumbria University has a github branch of the SMP software SnowMicropyn that has the newer fit relationship integrated in the software. It would be a nice project to loop in Mel’s branch with this notebook and see how well things compare to SnowEx data. I’d be happy to help anyone interested get rolling on that!</p><p>There’s also significant differences between the microCT and the two integrating spheres. This is science - sometimes when we start intercomparing these quantities, we do not get a perfect match. This would also be a fascinating thing to explore in a Hackweek project.</p></div><div id="tEHnb23qAl" class="myst-jp-nb-block relative group/block"><p>Some of the ways to could connect microstructure measurements to other quantities would be with the SWESARR radar data. Although the radar data does seem to have some orthorectification issues that haven’t been fully worked out, I can imagine these being worked around by careful choice of places you match up the microstructure to the radar. Note that places that are shallower tend to have larger D<sub>eq</sub> and vice versa, and the spatial variability in SSA was fairly low in general in Grand Mesa 2020, so looking at multiple SSA vs radar samples might not yield a great correlation.</p><p>One thing that could be of great value is to calibrate the SMP estimates of SSA to the integrating spheres. It might also be interesting to compare the data to hand hardness measured in the snowpit, and to traditional hand lens measurements.</p></div><div class="myst-backmatter-parts"><div class="myst-backmatter flex flex-col w-full md:flex-row group/backmatter"><h2 id="acknowledgments" class="myst-backmatter-title mt-5 text-base font-semibold group md:w-[200px] self-start md:flex-none opacity-90 group-hover/backmatter:opacity-100">Acknowledgments<a class="no-underline text-inherit hover:text-inherit ml-2 select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#acknowledgments" title="Link to Acknowledgments" aria-label="Link to Acknowledgments">¶</a></h2><div class="myst-backmatter-content grow opacity-90 group-hover/backmatter:opacity-100 col-screen"><p>Contributions from: Micah Johnson, Mike Durand, HP Marshall, Tate Meehan, Megan Mason, Scott Henderson. This relies heavily on the snowexsqul database and example scripts created by Micah Johnson.</p></div></div></div><section id="references" class="myst-bibliography article-grid subgrid-gap col-screen"><div><header class="myst-bibliography-header text-lg font-semibold text-stone-900 dark:text-white group">References<a class="no-underline text-inherit hover:text-inherit ml-2 select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#references" title="Link to References" aria-label="Link to References">¶</a></header></div><div class="myst-bibliography-list pl-3 mb-8 text-xs text-stone-500 dark:text-stone-300"><ol><li class="myst-bibliography-item break-words" id="cite-Dozier2009">Dozier, J., Green, R. O., Nolin, A. W., & Painter, T. H. (2009). Interpretation of snow properties from imaging spectrometry. <i>Remote Sensing of Environment</i>, <i>113</i>, S25 S37. <a target="_blank" rel="noreferrer" href="https://doi.org/10.1016/j.rse.2007.07.029">10.1016/j.rse.2007.07.029</a></li><li class="myst-bibliography-item break-words" id="cite-Matzler2002">Mätzler, C. (2002). Relation between grain-size and correlation length of snow. <i>Journal of Glaciology</i>, <i>48</i>(162), 461–466. <a target="_blank" rel="noreferrer" href="https://doi.org/10.3189/172756502781831287">10.3189/172756502781831287</a></li><li class="myst-bibliography-item break-words" id="cite-Matzl2010">Matzl, M., & Schneebeli, M. (2010). Stereological measurement of the specific surface area of seasonal snow types: Comparison to other methods, and implications for mm-scale vertical profiling. <i>Cold Regions Science and Technology</i>, <i>64</i>(1), 1–8. <a target="_blank" rel="noreferrer" href="https://doi.org/10.1016/j.coldregions.2010.06.006">10.1016/j.coldregions.2010.06.006</a></li><li class="myst-bibliography-item break-words" id="cite-Grenfell1999">Grenfell, T. C., & Warren, S. G. (1999). Representation of a nonspherical ice particle by a collection of independent spheres for scattering and absorption of radiation. <i>Journal of Geophysical Research - Atmospheres</i>, <i>104</i>(D24), 31697 31709. <a target="_blank" rel="noreferrer" href="https://doi.org/10.1029/1999JD900496">doi:10.1029/1999JD900496</a></li><li class="myst-bibliography-item break-words" id="cite-Heggli2011">HEGGLI, M., CHLE, B., Matzl, M., PINZER, B., RICHE, F., STEINER, S., STEINFELD, D., & Schneebeli, M. (2011). Measuring snow in 3-D using X-ray tomography: assessment of visualization techniques. <i>Annals of Glaciology</i>, <i>52</i>(58), 231.</li><li class="myst-bibliography-item break-words" id="cite-Gallet2009">Gallet, J. C., Domine, F., Zender, C. S., & Picard, G. (2009). Measurement of the specific surface area of snow using infrared reflectance in an integrating sphere at 1310 and 1550 nm. <i>The Cryosphere</i>, <i>3</i>, 167 182.</li><li class="myst-bibliography-item break-words" id="cite-Montpetit2012">Montpetit, B., Royer, A., Langlois, A., Cliche, P., Roy, A., Champollion, N., Picard, G., Domine, F., & Obbard, R. (2012). New shortwave infrared albedo measurements for snow specific surface area retrieval. <i>Journal of Glaciology</i>, <i>58</i>(211), 941 952. <a target="_blank" rel="noreferrer" href="https://doi.org/10.3189/2012jog11j248">10.3189/2012jog11j248</a></li><li class="myst-bibliography-item break-words" id="cite-Lowe2012">Löwe, H., & Herwijnen, A. van. (2012). A Poisson shot noise model for micro-penetration of snow. <i>Cold Regions Science and Technology</i>, <i>70</i>, 62–70. <a target="_blank" rel="noreferrer" href="https://doi.org/10.1016/j.coldregions.2011.09.001">10.1016/j.coldregions.2011.09.001</a></li><li class="myst-bibliography-item break-words" id="cite-Proksch2015">Proksch, M., Löwe, H., & Schneebeli, M. (2015). Density, specific surface area, and correlation length of snow measured by high‐resolution penetrometry. <i>Journal of Geophysical Research: Earth Surface</i>, <i>120</i>(2), 346–362. <a target="_blank" rel="noreferrer" href="https://doi.org/10.1002/2014jf003266">10.1002/2014jf003266</a></li><li class="myst-bibliography-item break-words" id="cite-Calonne2020">Calonne, N., Richter, B., Löwe, H., Cetti, C., Schure, J. ter, Herwijnen, A. V., Fierz, C., Jaggi, M., & Schneebeli, M. (2020). The RHOSSA campaign: multi-resolution monitoring of the seasonal evolution of the structure and mechanical stability of an alpine snowpack. <i>The Cryosphere</i>, <i>14</i>(6), 1829–1848. <a target="_blank" rel="noreferrer" href="https://doi.org/10.5194/tc-14-1829-2020">10.5194/tc-14-1829-2020</a></li></ol></div></section><div class="myst-footer-links flex pt-10 mb-10 space-x-4"><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-prev" href="/snow-observations-cookbook/_preview/5/notebooks/uavsar-tutorial"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">Observations</div>UAVSAR</div></div></a><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-next" href="/snow-observations-cookbook/_preview/5/notebooks/aviris-ng-tutorial"><div class="flex h-full align-middle"><div class="flex-grow"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">Observations</div>Introduction to AVIRIS-NG</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-OYMW4E3D.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/root-CXYA7X5D.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/_shared/chunk-DATP5P2X.js"/><link rel="modulepreload" href="/snow-observations-cookbook/_preview/5/build/routes/$-JRBPULBO.js"/><script>window.__remixContext = {"url":"/notebooks/microstructure-tutorial","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.7.1","options":{"favicon":"/snow-observations-cookbook/_preview/5/build/config-item-9b3afca6-a8e8bfb3a8c22631bec54b97c589311a.ico","logo":"/snow-observations-cookbook/_preview/5/build/config-item-24692dda-6a6974aa05c5eb73c6410f77cd3d9bc6.svg","logo_dark":"/snow-observations-cookbook/_preview/5/build/config-item-84d6d338-5088869e64f16c6dba2fd8196f6bbba1.svg","logo_url":"https://projectpythia.org","analytics_google":"G-T52X8HNYE8","folders":true},"parts":{},"nav":[{"title":"Home","url":"https://projectpythia.org"},{"title":"Foundations","url":"https://foundations.projectpythia.org"},{"title":"Cookbooks","url":"https://cookbooks.projectpythia.org/"},{"title":"Resources","url":"https://projectpythia.org/resource-gallery/"},{"title":"Community","url":"https://projectpythia.org/#join-us"}],"actions":[{"title":"Project Pythia","url":"https://projectpythia.org","internal":false,"static":false}],"projects":[{"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"bibliography":["/home/runner/work/snow-observations-cookbook/snow-observations-cookbook/references.bib"],"title":"Snow Observations Cookbook","authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"contributors":[{"id":"brian-rose","nameParsed":{"literal":"Brian E. J. Rose","given":"Brian E. J.","family":"Rose"},"name":"Brian E. J. Rose","orcid":"0000-0002-9961-3821","email":"brose@albany.edu","affiliations":["UAlbany"],"url":"https://brian-rose.github.io","github":"brian-rose","bluesky":"@brianejrose.bsky.social","linkedin":"https://www.linkedin.com/in/brian-rose-37bb55106/"},{"id":"clyne","nameParsed":{"literal":"John Clyne","given":"John","family":"Clyne"},"name":"John Clyne","orcid":"0000-0003-2788-9017","affiliations":["CISL"],"github":"clyne"},{"id":"jukent","nameParsed":{"literal":"Julia Kent","given":"Julia","family":"Kent"},"name":"Julia Kent","orcid":"0000-0002-5611-8986","affiliations":["CISL"],"github":"jukent"},{"id":"ktyle","nameParsed":{"literal":"Kevin Tyle","given":"Kevin","family":"Tyle"},"name":"Kevin Tyle","orcid":"0000-0001-5249-9665","affiliations":["UAlbany"],"github":"ktyle"},{"id":"andersy005","nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","orcid":"0000-0001-6583-571X","affiliations":["CarbonPlan"],"github":"andersy005"},{"id":"dcamron","nameParsed":{"literal":"Drew Camron","given":"Drew","family":"Camron"},"name":"Drew Camron","orcid":"0000-0001-7246-6502","affiliations":["Unidata"],"github":"dcamron"},{"id":"dopplershift","nameParsed":{"literal":"Ryan May","given":"Ryan","family":"May"},"name":"Ryan May","orcid":"0000-0003-2907-038X","affiliations":["Unidata"],"github":"dopplershift"},{"id":"mgrover1","nameParsed":{"literal":"Maxwell Grover","given":"Maxwell","family":"Grover"},"name":"Maxwell Grover","orcid":"0000-0002-0370-8974","affiliations":["Argonne"],"github":"mgrover1"},{"id":"r-ford","nameParsed":{"literal":"Robert R. Ford","given":"Robert R.","family":"Ford"},"name":"Robert R. Ford","orcid":"0000-0001-5483-4965","affiliations":["UAlbany"],"github":"r-ford"},{"id":"kmpaul","nameParsed":{"literal":"Kevin Paul","given":"Kevin","family":"Paul"},"name":"Kevin Paul","orcid":"0000-0001-8155-8038","affiliations":["NVIDIA"],"github":"kmpaul"},{"id":"jnmorley","nameParsed":{"literal":"James Morley","given":"James","family":"Morley"},"name":"James Morley","orcid":"0009-0005-5193-7981","github":"jnmorley"},{"id":"erogluorhan","nameParsed":{"literal":"Orhan Eroglu","given":"Orhan","family":"Eroglu"},"name":"Orhan Eroglu","orcid":"0000-0003-3099-8775","affiliations":["CISL"],"github":"erogluorhan"},{"id":"lkailynncar","nameParsed":{"literal":"Lily Kailyn","given":"Lily","family":"Kailyn"},"name":"Lily Kailyn","orcid":"0009-0002-0125-5091","affiliations":["CISL"],"github":"lkailynncar"},{"id":"anissa111","nameParsed":{"literal":"Anissa Zacharias","given":"Anissa","family":"Zacharias"},"name":"Anissa Zacharias","orcid":"0000-0002-2666-8493","affiliations":["CISL"],"github":"anissa111"},{"id":"kafitzgerald","nameParsed":{"literal":"Katelyn FitzGerald","given":"Katelyn","family":"FitzGerald"},"name":"Katelyn FitzGerald","orcid":"0000-0003-4184-1917","affiliations":["CISL"],"github":"kafitzgerald"}],"github":"https://github.com/SnowEx/snow-observations-cookbook","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"copyright":"2025","references":{"foundations":{"url":"https://foundations.projectpythia.org"},"xarray":{"url":"https://docs.xarray.dev/en/stable"},"matplotlib":{"url":"https://matplotlib.org/stable"}},"thebe":{"binder":{"url":"https://binder.projectpythia.org/","provider":"github","repo":"executablebooks/thebe-binder-base","ref":"HEAD"}},"toc":[{"file":"README.md"},{"children":[{"file":"notebooks/how-to-cite.md"}],"title":"Preamble"},{"children":[{"file":"notebooks/snowex_data_overview.ipynb"},{"file":"notebooks/snowexsql_database.ipynb"}],"title":"Data Access"},{"children":[{"file":"notebooks/GPR_Lidar_HackweekTutorial.ipynb"},{"file":"notebooks/thermal-ir-tutorial.ipynb"},{"file":"notebooks/timelapse-camera-tutorial.ipynb"},{"file":"notebooks/uavsar-tutorial.ipynb"},{"file":"notebooks/microstructure-tutorial.ipynb"},{"file":"notebooks/aviris-ng-tutorial.ipynb"},{"file":"notebooks/tls_data_access.ipynb"},{"file":"notebooks/snotel_data_access.ipynb"}],"title":"Observations"}],"thumbnail":"/snow-observations-cookbook/_preview/5/build/thumbnail-d4c257baf164282f2f7f47264aef846d.png","exports":[],"index":"index","pages":[{"level":1,"title":"Preamble"},{"slug":"notebooks.how-to-cite","title":"How to Cite This Cookbook","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/72a08caa5cbe5f9cce5999dbd1a81dfd.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Data Access"},{"slug":"notebooks.snowex-data-overview","title":"Field Campaigns Overview","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/01_banner-68dfc285b86d624f3c31ada2b77a72e3.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snowexsql-database","title":"SnowExSQL Database","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/data_examples-eae9c38c26eef6738812929082984979.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Observations"},{"slug":"notebooks.gpr-lidar-hackweektutorial","title":"GPR and Lidar","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/HackweekGraphicalAbs-00d4ff139ce4e2a545b09bf0a84b03a2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.thermal-ir-tutorial","title":"Thermal Infrared","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/twinotter1-c2c8102da490fd6ae9880ee3e3f22943.JPG","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.timelapse-camera-tutorial","title":"Time-lapse Cameras","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/timelapse-camera-tut-8af2d6082d30f80e3d48709ea642fe30.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.uavsar-tutorial","title":"UAVSAR","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/sthelens-d071ba2e84c85623d62d5eb5c8a2f0ea.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.microstructure-tutorial","title":"Microstructure","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.aviris-ng-tutorial","title":"Introduction to AVIRIS-NG","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/Aviris-c7ba22f1a0b6de98ee3f641c3b23dfe1.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.tls-data-access","title":"Terrestrial Laser Scanning","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snotel-data-access","title":"SNOTEL Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/snow-observations-cookbook/_preview/5"},"routes/$":{"config":{"version":3,"myst":"1.7.1","options":{"favicon":"/snow-observations-cookbook/_preview/5/build/config-item-9b3afca6-a8e8bfb3a8c22631bec54b97c589311a.ico","logo":"/snow-observations-cookbook/_preview/5/build/config-item-24692dda-6a6974aa05c5eb73c6410f77cd3d9bc6.svg","logo_dark":"/snow-observations-cookbook/_preview/5/build/config-item-84d6d338-5088869e64f16c6dba2fd8196f6bbba1.svg","logo_url":"https://projectpythia.org","analytics_google":"G-T52X8HNYE8","folders":true},"parts":{},"nav":[{"title":"Home","url":"https://projectpythia.org"},{"title":"Foundations","url":"https://foundations.projectpythia.org"},{"title":"Cookbooks","url":"https://cookbooks.projectpythia.org/"},{"title":"Resources","url":"https://projectpythia.org/resource-gallery/"},{"title":"Community","url":"https://projectpythia.org/#join-us"}],"actions":[{"title":"Project Pythia","url":"https://projectpythia.org","internal":false,"static":false}],"projects":[{"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"bibliography":["/home/runner/work/snow-observations-cookbook/snow-observations-cookbook/references.bib"],"title":"Snow Observations Cookbook","authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"contributors":[{"id":"brian-rose","nameParsed":{"literal":"Brian E. J. Rose","given":"Brian E. J.","family":"Rose"},"name":"Brian E. J. Rose","orcid":"0000-0002-9961-3821","email":"brose@albany.edu","affiliations":["UAlbany"],"url":"https://brian-rose.github.io","github":"brian-rose","bluesky":"@brianejrose.bsky.social","linkedin":"https://www.linkedin.com/in/brian-rose-37bb55106/"},{"id":"clyne","nameParsed":{"literal":"John Clyne","given":"John","family":"Clyne"},"name":"John Clyne","orcid":"0000-0003-2788-9017","affiliations":["CISL"],"github":"clyne"},{"id":"jukent","nameParsed":{"literal":"Julia Kent","given":"Julia","family":"Kent"},"name":"Julia Kent","orcid":"0000-0002-5611-8986","affiliations":["CISL"],"github":"jukent"},{"id":"ktyle","nameParsed":{"literal":"Kevin Tyle","given":"Kevin","family":"Tyle"},"name":"Kevin Tyle","orcid":"0000-0001-5249-9665","affiliations":["UAlbany"],"github":"ktyle"},{"id":"andersy005","nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","orcid":"0000-0001-6583-571X","affiliations":["CarbonPlan"],"github":"andersy005"},{"id":"dcamron","nameParsed":{"literal":"Drew Camron","given":"Drew","family":"Camron"},"name":"Drew Camron","orcid":"0000-0001-7246-6502","affiliations":["Unidata"],"github":"dcamron"},{"id":"dopplershift","nameParsed":{"literal":"Ryan May","given":"Ryan","family":"May"},"name":"Ryan May","orcid":"0000-0003-2907-038X","affiliations":["Unidata"],"github":"dopplershift"},{"id":"mgrover1","nameParsed":{"literal":"Maxwell Grover","given":"Maxwell","family":"Grover"},"name":"Maxwell Grover","orcid":"0000-0002-0370-8974","affiliations":["Argonne"],"github":"mgrover1"},{"id":"r-ford","nameParsed":{"literal":"Robert R. Ford","given":"Robert R.","family":"Ford"},"name":"Robert R. Ford","orcid":"0000-0001-5483-4965","affiliations":["UAlbany"],"github":"r-ford"},{"id":"kmpaul","nameParsed":{"literal":"Kevin Paul","given":"Kevin","family":"Paul"},"name":"Kevin Paul","orcid":"0000-0001-8155-8038","affiliations":["NVIDIA"],"github":"kmpaul"},{"id":"jnmorley","nameParsed":{"literal":"James Morley","given":"James","family":"Morley"},"name":"James Morley","orcid":"0009-0005-5193-7981","github":"jnmorley"},{"id":"erogluorhan","nameParsed":{"literal":"Orhan Eroglu","given":"Orhan","family":"Eroglu"},"name":"Orhan Eroglu","orcid":"0000-0003-3099-8775","affiliations":["CISL"],"github":"erogluorhan"},{"id":"lkailynncar","nameParsed":{"literal":"Lily Kailyn","given":"Lily","family":"Kailyn"},"name":"Lily Kailyn","orcid":"0009-0002-0125-5091","affiliations":["CISL"],"github":"lkailynncar"},{"id":"anissa111","nameParsed":{"literal":"Anissa Zacharias","given":"Anissa","family":"Zacharias"},"name":"Anissa Zacharias","orcid":"0000-0002-2666-8493","affiliations":["CISL"],"github":"anissa111"},{"id":"kafitzgerald","nameParsed":{"literal":"Katelyn FitzGerald","given":"Katelyn","family":"FitzGerald"},"name":"Katelyn FitzGerald","orcid":"0000-0003-4184-1917","affiliations":["CISL"],"github":"kafitzgerald"}],"github":"https://github.com/SnowEx/snow-observations-cookbook","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"copyright":"2025","references":{"foundations":{"url":"https://foundations.projectpythia.org"},"xarray":{"url":"https://docs.xarray.dev/en/stable"},"matplotlib":{"url":"https://matplotlib.org/stable"}},"thebe":{"binder":{"url":"https://binder.projectpythia.org/","provider":"github","repo":"executablebooks/thebe-binder-base","ref":"HEAD"}},"toc":[{"file":"README.md"},{"children":[{"file":"notebooks/how-to-cite.md"}],"title":"Preamble"},{"children":[{"file":"notebooks/snowex_data_overview.ipynb"},{"file":"notebooks/snowexsql_database.ipynb"}],"title":"Data Access"},{"children":[{"file":"notebooks/GPR_Lidar_HackweekTutorial.ipynb"},{"file":"notebooks/thermal-ir-tutorial.ipynb"},{"file":"notebooks/timelapse-camera-tutorial.ipynb"},{"file":"notebooks/uavsar-tutorial.ipynb"},{"file":"notebooks/microstructure-tutorial.ipynb"},{"file":"notebooks/aviris-ng-tutorial.ipynb"},{"file":"notebooks/tls_data_access.ipynb"},{"file":"notebooks/snotel_data_access.ipynb"}],"title":"Observations"}],"thumbnail":"/snow-observations-cookbook/_preview/5/build/thumbnail-d4c257baf164282f2f7f47264aef846d.png","exports":[],"index":"index","pages":[{"level":1,"title":"Preamble"},{"slug":"notebooks.how-to-cite","title":"How to Cite This Cookbook","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/72a08caa5cbe5f9cce5999dbd1a81dfd.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Data Access"},{"slug":"notebooks.snowex-data-overview","title":"Field Campaigns Overview","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/01_banner-68dfc285b86d624f3c31ada2b77a72e3.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snowexsql-database","title":"SnowExSQL Database","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/data_examples-eae9c38c26eef6738812929082984979.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Observations"},{"slug":"notebooks.gpr-lidar-hackweektutorial","title":"GPR and Lidar","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/HackweekGraphicalAbs-00d4ff139ce4e2a545b09bf0a84b03a2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.thermal-ir-tutorial","title":"Thermal Infrared","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/twinotter1-c2c8102da490fd6ae9880ee3e3f22943.JPG","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.timelapse-camera-tutorial","title":"Time-lapse Cameras","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/timelapse-camera-tut-8af2d6082d30f80e3d48709ea642fe30.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.uavsar-tutorial","title":"UAVSAR","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/sthelens-d071ba2e84c85623d62d5eb5c8a2f0ea.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.microstructure-tutorial","title":"Microstructure","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.aviris-ng-tutorial","title":"Introduction to AVIRIS-NG","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/Aviris-c7ba22f1a0b6de98ee3f641c3b23dfe1.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.tls-data-access","title":"Terrestrial Laser Scanning","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snotel-data-access","title":"SNOTEL Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":3,"kind":"Notebook","sha256":"abfd3622b12a9b13e3acc20bb067be327502322c17248f8d4f06059baf43efc9","slug":"notebooks.microstructure-tutorial","location":"/notebooks/microstructure-tutorial.ipynb","dependencies":[],"frontmatter":{"title":"Microstructure","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"snow-observations-cookbook-test","language":"python"},"authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/SnowEx/snow-observations-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/SnowEx/snow-observations-cookbook/blob/HEAD/notebooks/microstructure-tutorial.ipynb","edit_url":"https://github.com/SnowEx/snow-observations-cookbook/edit/HEAD/notebooks/microstructure-tutorial.ipynb","thumbnail":"/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg","exports":[{"format":"ipynb","filename":"microstructure-tutorial.ipynb","url":"/snow-observations-cookbook/_preview/5/build/microstructure-tutor-9b42958728dbe1a04a839c2ed681abfe.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"by Mike Durand, School of Earth Sciences and Byrd Polar \u0026 Climate Research Center ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"odMQp1IkN9"},{"type":"link","url":"mailto:durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZN9aa9pDNb"}],"urlSource":"mailto:durand.8@osu.edu","key":"V30agxihpd"}],"key":"RuawDtpXep"},{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"G3xgXIeotK"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"N4BIERL3fK"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"At the end of this tutorial you should be able to...","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"k3MKCDocni"}],"key":"sfwurrWEW5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Explain why microstructure is important for remote sensing","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"svopJvSXVF"}],"key":"PT2FBVntdY"}],"key":"W1cvXanRIQ"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Define measures of microstructure, especially specific surface area","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"xcWWSYXtnX"}],"key":"HRBXlu1C5V"}],"key":"l9kr5ynzjP"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Access and visualize tree different microstructure measurements from SnowEx Grand Mesa 2020","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OoYO7odD5z"}],"key":"GRI84A1sgr"}],"key":"I9joKJUieD"}],"key":"K6OVlsy1Mr"},{"type":"heading","depth":2,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Acknowledgments","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"TNxJankbyg"}],"identifier":"acknowledgments","label":"Acknowledgments","html_id":"acknowledgments","implicit":true,"key":"NsEAs0DJzP"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Contributions from: Micah Johnson, Mike Durand, HP Marshall, Tate Meehan, Megan Mason, Scott Henderson. This relies heavily on the snowexsqul database and example scripts created by Micah Johnson.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qj2Ww9Tzmt"}],"key":"cOuWxYrjwS"},{"type":"heading","depth":2,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Caveats","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"zQBmLwb8iA"}],"identifier":"caveats","label":"Caveats","html_id":"caveats","implicit":true,"key":"MdauPas29S"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"The integrating sphere and the SMP data are published at NSIDC; you can read the pages there for documentation etc. However the microCT data are not yet published; please contact Lauren Farnsworth (","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"FsWjethNYj"},{"type":"link","url":"mailto:lauren.b.farnsworth@usace.army.mil","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"lauren​.b​.farnsworth@usace​.army​.mil","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"P29wxz5ioQ"}],"urlSource":"mailto:lauren.b.farnsworth@usace.army.mil","key":"khEh7UtfXN"},{"type":"text","value":") for questions on the CT data.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"C3mrgKvXJy"}],"key":"WPPgcPNT1Q"},{"type":"heading","depth":2,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Fun Facts About Snow Microstructure","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"WLFwaIQLFy"}],"identifier":"fun-facts-about-snow-microstructure","label":"Fun Facts About Snow Microstructure","html_id":"fun-facts-about-snow-microstructure","implicit":true,"key":"MNsCx9erck"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Snow microstructure plays a super important role in snow physics and snow remote sensing, so a lot of effort went towards measuring it in SnowEx 2020!","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"SxAwNUvMGH"}],"key":"fOnBH1vGsJ"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"There are several different quantities that are used to measure snow microstructure, including “grain size”. Grain size measurements are challenging to make in a repeatable way, and are also challenging to relate to the physical quantities that control remote sensing measurements. In the last ~15 years or so, a lot of effort has gone into more objective ways to measure microstructure.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"f6AfMxaLP4"}],"key":"GtWu1k5NjM"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Snow microstructure  governs response of remote sensing to snow cover for visible, near-infrared and high-frequency microwave wavelengths. See Figure 1, below, and read ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"Z8eJjAhoAm"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Dozier2009","identifier":"dozier2009","children":[{"type":"text","value":"Dozier ","key":"Kk8kVgScMm"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"dGAr2D0zjS"}],"key":"UMRRVgvcky"},{"type":"text","value":", 2009","key":"mLnbIHjZcH"}],"enumerator":"1","key":"glfjssjSoR"}],"key":"ckuY9FRnJf"},{"type":"text","value":", for more information.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"oJ4cQX8St1"}],"key":"uIU8ZoPWbR"},{"type":"image","url":"/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg","width":500,"key":"NvFYY1YSpA","urlSource":"./images/microstructure/dozier2009_fig2.jpg"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Snow microstructure governs visible and near-infrared reflectance. This is figure 2 from","key":"jy8yupGS1r"},{"type":"div","children":[{"type":"div","children":[],"key":"U5mscrAkyK"}],"key":"zZsP7ii6sp"}],"key":"G7cynKHRa0"}],"key":"L6UVkQ5Keo"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Radar measurements such as those made by the Ku-band SWEARR instrument are also very sensitive to snow microstructure.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"aLDnD8kCqj"}],"key":"nGsSFis3Fr"},{"type":"image","url":"/snow-observations-cookbook/_preview/5/build/modeled-swe-L-respon-e0c27380e322c4557b8296a45ebe2cb6.png","width":500,"key":"IEIA8203B8","urlSource":"./images/microstructure/modeled-swe-L-response.png"},{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Modeled response of radar backscatter to SWE and single-scatter albedo (which in turn is a function of snow microstructure), based on a simple model suggested by","key":"FFcCqR9BUW"},{"type":"div","children":[{"type":"div","children":[],"key":"Vei4CvD3k0"}],"key":"i9U9CRiPjs"}],"key":"InethUqPvY"}],"key":"YLB8PFeWon"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Snow microstructure is super important to efforts to launch a Ku-band SAR to measure global snow water equivalent (SWE). An important area of research right now is exploring how to use estimates of microstructure (e.g. from snowpack evolution models) to improve SWE retrievals.","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"ME7Tu6sRuU"}],"key":"fMzkC5zckS"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Snow microstructure evolves through the season, and varies a lot with depth. Snow microstructure evolution is controlled by other snow properties, such as snow temperature, snow height and snow liquid water content. A really great resource on snow microstructure is Kelly Elder’s recent talks:","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"FVYAJa0amE"}],"key":"u22Ox1h0D2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://boisestate.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=9a051fe4-db09-4f1d-92db-acd1003cc5cc","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Snow Metamorphism","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"fNBbHrXRCI"}],"urlSource":"https://boisestate.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=9a051fe4-db09-4f1d-92db-acd1003cc5cc","key":"KlOS5KkNAT"}],"key":"v0HWVB0khM"}],"key":"TPv7rt6Juz"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://boisestate.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=136f7580-c1e2-4c55-ab33-acca003c23d6","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"Snow Grain Identification","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"KUWfeRbClm"}],"urlSource":"https://boisestate.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=136f7580-c1e2-4c55-ab33-acca003c23d6","key":"BB4G9mwpg9"}],"key":"IihB82HL4Y"}],"key":"qlMiKgm3ko"}],"key":"qjgffDR4Xw"}],"key":"VMIIj1ReSF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"SnowEx Microstructure Measurement Background","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QxIhL5uCy1"}],"identifier":"snowex-microstructure-measurement-background","label":"SnowEx Microstructure Measurement Background","html_id":"snowex-microstructure-measurement-background","implicit":true,"key":"AHd4JvPJhQ"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Basic Microstructure Definitions","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y9mCEr106q"}],"identifier":"basic-microstructure-definitions","label":"Basic Microstructure Definitions","html_id":"basic-microstructure-definitions","implicit":true,"key":"sljgbALOQ2"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Microstructure definitions take a bit of getting used to. It’s very easy to get confused. Specific surface area (SSA) is one of the most important quantity used to measure snow microstructure, so that’s the focus here. Note that SSA is not the be-all and end-all, so there’s a short table describing how to relate SSA to other quantities just below.  A couple of good reads on all of this is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SDZvarZZs9"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"Mätzler, 2002","key":"g9Gob2EZ35"}],"enumerator":"2","key":"inI7qrVRJK"}],"key":"o5EP2LYgEr"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"r1OaamAcnl"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzl2010","identifier":"matzl2010","children":[{"type":"text","value":"Matzl \u0026 Schneebeli, 2010","key":"PnIrRvDEB5"}],"enumerator":"3","key":"bZnIzFtpWo"}],"key":"aYC28jw18a"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ptpWKlQCfv"}],"key":"w9PpaAj1ZS"},{"type":"image","url":"/snow-observations-cookbook/_preview/5/build/lowe_etal_2011_v2-31cd1b64128fcf6d20ddd779feda911b.png","width":500,"key":"FCWTMD7ReQ","urlSource":"./images/microstructure/lowe_etal_2011_v2.png"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Coarse and fine snow microstructure revealed by microCT. The microCT snow renderings on the left are Figure 2 from","key":"Fx2njeMQSA"},{"type":"div","children":[{"type":"div","children":[],"key":"el1REboUuY"}],"key":"ZQZ6VghyRV"},{"type":"text","value":". The colorbars indicate that fine-grained snow (a) has high SSA and low D ","key":"dcFt1tcpHJ"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"cy256oytwe"}],"key":"cY988bEi9i"},{"type":"text","value":" , whereas coarse-grained snow (b) has low SSA and high D ","key":"OQaQ3GCB6z"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"HOZYPN9RN5"}],"key":"maThmJPrHy"},{"type":"text","value":" .","key":"FNOKGW8Sot"}],"key":"OpPsYgFSXh"}],"key":"i1QViki0Rj"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Use Figure 3 above to ground these definitions: SSA is the surface area of the ice-air interface, normalized in some way. Confusingly, SSA is defined in a couple of different ways in the literature: sometimes, surface area within a particular volume of interest (VOI) is normalized by the mass of the ice in the VOI. As defined in this way, SSA has units of length squared per mass, usually expressed as m","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"WClQXpn5Id"},{"type":"superscript","children":[{"type":"text","value":"2","key":"QmzkzCBNVY"}],"key":"crdVEELrN4"},{"type":"text","value":"/kg. Instead of normalizing by mass, SSA is sometimes defined by normalizing by the volume of the VOI (this is SSA","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"b6uZq4qmCV"},{"type":"subscript","children":[{"type":"text","value":"v","key":"s0tCxq0KUi"}],"key":"PyhZgRhfuB"},{"type":"text","value":" in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"WdU35ovG2u"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzl2010","identifier":"matzl2010","children":[{"type":"text","value":"Matzl \u0026 Schneebeli, 2010","key":"VeQs7Bw9oQ"}],"enumerator":"3","key":"kmbFKrJUNQ"}],"key":"qAmJhnRsdN"},{"type":"text","value":"), and sometimes by normalizing by the volume of the ice in the VOI (this is SSA","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"y70YNNTSrl"},{"type":"subscript","children":[{"type":"text","value":"i","key":"afqKsRyYwJ"}],"key":"i1rrNYQKKQ"},{"type":"text","value":" in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GdRuGoEf7t"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzl2010","identifier":"matzl2010","children":[{"type":"text","value":"Matzl \u0026 Schneebeli, 2010","key":"laoEGZxZFd"}],"enumerator":"3","key":"allTwGdsNa"}],"key":"yHUxig0Ei7"},{"type":"text","value":", and q in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"PIceJHgULy"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"Mätzler, 2002","key":"hZolEIVk3k"}],"enumerator":"2","key":"W1lIcdkrPa"}],"key":"Jh5xTrQRX2"},{"type":"text","value":"). Here let’s just go with the first definition I mentioned:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"HOcOWkMOxT"}],"key":"oopArqdBHI"},{"type":"math","value":"SSA = \\frac{\\text{Surface area of ice-air interface}}{\\text{Mass of ice}} \\quad","position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmtext\u003eSurface area of ice-air interface\u003c/mtext\u003e\u003cmtext\u003eMass of ice\u003c/mtext\u003e\u003c/mfrac\u003e\u003cmspace width=\"1em\"/\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eSSA = \\frac{\\text{Surface area of ice-air interface}}{\\text{Mass of ice}} \\quad\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eSS\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3714em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eMass of ice\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eSurface area of ice-air interface\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.686em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:1em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"1","key":"SK0yXH9K6S"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"SSA tends to take values between 5 and 150 m","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"SV1BEoc2gw"},{"type":"superscript","children":[{"type":"text","value":"2","key":"rDzVercu5j"}],"key":"hAOcbE8X1w"},{"type":"text","value":"/kg: fresh, fine-grained snow has high SSA, and coarse snow has low SSA. Because it takes a little while for SSA values to become intuitive, a useful derived metric is the equivalent grain diameter (D","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xomCsOXDSo"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"hiYRjYhw2Z"}],"key":"QyziWcA01L"},{"type":"text","value":"; note that this is identical to D","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fhutiQ4FIP"},{"type":"subscript","children":[{"type":"text","value":"q","key":"L3P9menDCy"}],"key":"nlqOWZJAOL"},{"type":"text","value":" in ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"aAPK4izpIc"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"Mätzler, 2002","key":"QLRuFwWQer"}],"enumerator":"2","key":"A7jKeUqsoR"}],"key":"g0j2wFLMjj"},{"type":"text","value":"), which by definition is the diameter that a sphere would have if it had a particular value of SSA. This is a one-to-one relationship, so there are no assumptions involved.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xsDuvW4EqC"}],"key":"EQrbha0oCj"},{"type":"math","value":"D_{eq} = \\frac{6}{SSA \\rho_i} \\quad","position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eD\u003c/mi\u003e\u003cmrow\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003eq\u003c/mi\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmn\u003e6\u003c/mn\u003e\u003cmrow\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003eρ\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003cmspace width=\"1em\"/\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eD_{eq} = \\frac{6}{SSA \\rho_i} \\quad\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eD\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\"\u003eq\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.2019em;vertical-align:-0.8804em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3214em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eSS\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eρ\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e6\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8804em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:1em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"2","key":"leVQHJf0YH"}],"key":"yl6HMCqI31"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Relationships of specific surface area to other metrics are given in this list if you’re curious but otherwise just skip past this bit","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WV0cdFSIux"}],"key":"MJOYi4spoc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Sometimes people refer to the “optical grain diameter”, which is the same as D","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rNSmE5fMAn"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"bxMXbTpFfR"}],"key":"q3L4JGjOeq"},{"type":"text","value":". The “optical” refers to ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yk89Ytqbey"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Grenfell1999","identifier":"grenfell1999","children":[{"type":"text","value":"Grenfell \u0026 Warren, 1999","key":"GQtj0TuxjJ"}],"enumerator":"4","key":"Si6WGDOHRi"}],"key":"mU2E1mrucg"},{"type":"text","value":", who showed that any snow with a particular SSA had similar (not identical) radiative transfer properties regardless of particle shape in the visible and near-infrared parts of the spectrum. But note the same is not true in the microwave spectrum.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"vxuDOQK9Ja"}],"key":"XB9Ay5lB81"}],"key":"GGpI6DEgdZ"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Autocorrelation length is usually one of two metrics that summarize the two-point microstructure autocorelation function of the three-dimensional ice-air matrix. Think of the probability that you change media (from ice to air or vice versa) as you move a certain distance within the snow microstructure. The length that defines the likelihood that you’ll change media is (an approximation of the correlation length). SSA is by definition (with almost no assumptions) equal to the slope of the autocorrelation function at the origin. But microwave scattering is controlled by correlations at longer lags. For more check out ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I1o0JveDiA"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"Mätzler, 2002","key":"QIOIwJBJGy"}],"enumerator":"2","key":"hsd0YEuPcN"}],"key":"s1uv31MOTc"},{"type":"text","value":". The lack of closing the loop between SSA and correlation length is a significant issue when we have measurements of SSA and microwaves as we do in SnowEx.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mMf013P5OF"}],"key":"RQhXLUDS9k"}],"key":"Fh6N1BUp70"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Geometric grain size is what we usually measure when we measure with a hand lens. You can try to relate it to SSA or corelation length, but it is not always possible, and will change with different observers.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"yLMp9oLiAA"}],"key":"EMnEhrgWeG"}],"key":"RwnT4YrJZ3"}],"key":"MaPjrc82gm"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Time to stop this list but there are many other metrics as well.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yJwisxiy4z"}],"key":"e8j0ctrP5T"}],"key":"awlkklrJhx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Microstructure Instruments","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nnICRbc4vW"}],"identifier":"microstructure-instruments","label":"Microstructure Instruments","html_id":"microstructure-instruments","implicit":true,"key":"l2BTGI2I7N"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now that we know what we’re trying to measure (SSA, or correlation length) how do we actually measure? let’s talk just about three techniques used in SnowEx 2020 Grand Mesa.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R2O62M0HZN"}],"key":"zaySE6oOgk"},{"type":"image","url":"/snow-observations-cookbook/_preview/5/build/microCT-f4cb6f3cc8c7afa8b7bb3532c9393262.png","width":800,"key":"xk920soOXH","urlSource":"./images/microstructure/microCT.png"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Left: Lauren Farnsworth transports microCT samples from field sites back to Grand Mesa Lodge in a cold storage container. Right: the microCT machine in the lab at CRREL.","key":"HuWpQGpdyN"}],"key":"v88BQmkAdP"}],"key":"ne6HBotEY4"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Micro-computed tomography (microCT) is the only laboratory-based method used here, and it is the gold standard, although it does still come with caveats. The idea of microCT is to remove a sample of snow from a snow pit face, and either cast it with a compound such as diethyl pthalate that is still a liquid at 0° C, or preserve the same at a very cold temperature. Then the sample is sent back to the laboratory, and bombared with x-rays, similar to how you get x-rays to see if a bone is broken at the doctor. For much more on microCT, check out ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"A6GTI1027a"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Heggli2011","identifier":"heggli2011","children":[{"type":"text","value":"HEGGLI ","key":"MTEJVuRp4u"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"f4CcaPTBnd"}],"key":"BcGBonX3kh"},{"type":"text","value":", 2011","key":"GEJgfZvPwB"}],"enumerator":"5","key":"ZtpsGlbeJZ"}],"key":"FtyY2L2EHB"},{"type":"text","value":". microCT can be used to extract a ton of information about snow microstructure, including SSA, correlation length and many others.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ywf1KI4v5T"}],"key":"ygi5b5F3gd"},{"type":"image","url":"/snow-observations-cookbook/_preview/5/build/IntegratingSpheres-150db32cda29e9bb8d27df45bce09d61.png","width":800,"key":"qOOKscx8Sv","urlSource":"./images/microstructure/IntegratingSpheres.png"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Left: Kehan Yang operates an IceCube unit at the Grand Mesa Lodge intercomparison snowpit. Top right: schematic showing the integrating sphere measurement principle, from","key":"wJ8Tpbrpku"},{"type":"div","children":[{"type":"div","children":[],"key":"TUQwta6K5Q"}],"key":"qXoyAPx1Y3"},{"type":"text","value":". Bottom right: snow in the IceCube sampling container, from","key":"PXBP5n2qyA"},{"type":"div","children":[{"type":"div","children":[],"key":"TF95dGxR2s"}],"key":"EtvDVB72hx"},{"type":"text","value":".","key":"CzZ47hnxug"}],"key":"OSESxis2Ye"}],"key":"gTcLAP7taq"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Integrating spheres are field-based and you make the measurements on samples extracted from the snowpit face. The principle of the measurement is based on firing a laser at the snow sample, within a special reflective hollow sphere, where one side is filled by the snow sample, and measuring how much of the laser is reflected at a sensor at a known geometry. For more information, check out ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"jhttwyuZHZ"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Gallet2009","identifier":"gallet2009","children":[{"type":"text","value":"Gallet ","key":"YAiDFtlt62"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"NYaIItHgkW"}],"key":"awMBIbPrnn"},{"type":"text","value":", 2009","key":"yaGVqu2IQb"}],"enumerator":"6","key":"eaqjQA1tik"}],"key":"FZ3guyEHTF"},{"type":"text","value":".  Most integrating sphere measurements are either made by a commercial firm (A2 Photonics) known as the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"JSilollgPf"},{"type":"link","url":"https://a2photonicsensors.com/icecube-ssa/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"IceCube","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"cnjQQgDCGC"}],"urlSource":"https://a2photonicsensors.com/icecube-ssa/","key":"nwPrDWEBRj"},{"type":"text","value":" or a version constructed at the University of Sherbrooke known as the IRIS ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SkZUNdFs1D"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Montpetit2012","identifier":"montpetit2012","children":[{"type":"text","value":"Montpetit ","key":"AwRvCYzmGF"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"Q9lA62tTif"}],"key":"vgsEUmebpi"},{"type":"text","value":", 2012","key":"k7p5oQ66ji"}],"enumerator":"7","key":"rzVVgB7FqY"}],"key":"cMoYQy9zOp"},{"type":"text","value":". These approaches are set up to measure SSA only. There were three of these at Grand Mesa - one of the Sherbrooke IRIS units, and two IceCubes, one from Finnish Meteorological Institute, and one from Ohio State University.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"aFY0wZxCba"}],"key":"pXoiUEsEhl"},{"type":"image","url":"/snow-observations-cookbook/_preview/5/build/SMP-0a2dc7ab07e8fd97fedff24b7dc16b05.png","width":800,"key":"ShBb2kAADV","urlSource":"./images/microstructure/SMP.png"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Left: Megan Mason operates the SMP. Right: Closeup of the SMP sensor tip.","key":"eTpkzdgE1Q"}],"key":"siM8OxU5s0"}],"key":"i1yJfcacDk"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Snow micropenetrometers are also a field-based approach, but they do not require a snowpit, enabling far more observations to be made. Instead, an automated motor pushes a probe vertically downwards into the snowpack. The probe measures the force required to break snow microstructure, yielding a wealth of information. Snow density, specific surface area and correlation length can be retrieved; for background see ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"aDGcJLXS59"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Lowe2012","identifier":"lowe2012","children":[{"type":"text","value":"Löwe \u0026 Herwijnen, 2012","key":"L9jFiQNNth"}],"enumerator":"8","key":"jZ312iHEVm"}],"key":"URlbpkbEuv"},{"type":"text","value":" and ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"azKXqbbV89"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"Q9H4O6YUMC"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"xOcpKQc5Kh"}],"key":"h31GyzMwuj"},{"type":"text","value":", 2015","key":"e8h6kmaMTj"}],"enumerator":"9","key":"S8sKbtfmkR"}],"key":"E3mOLGWi6R"},{"type":"text","value":". The micropen effort at Grand Mesa was led by Boise State University. A key thing to be aware of is that differences in the various SMP instruments mean that the empirical relationship of ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ZN4Viz0AQM"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"iZ4EcHgy9u"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"CI8qFOeyBR"}],"key":"gGL901bHmD"},{"type":"text","value":", 2015","key":"nh78rwPqU2"}],"enumerator":"9","key":"lxHmjKvAV9"}],"key":"x5F3uzb3zQ"},{"type":"text","value":" will give quite poor results for the particular instrument used in SnowEx, as fully explained in ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"iYL6UVrAFz"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Calonne2020","identifier":"calonne2020","children":[{"type":"text","value":"Calonne ","key":"fsxUJGJrAA"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"punSVrTQcr"}],"key":"CZbLzrVU5k"},{"type":"text","value":", 2020","key":"suxV5DP1Fz"}],"enumerator":"10","key":"esweI5aFXR"}],"key":"MWzS28EDc3"},{"type":"text","value":".","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Grud1YEN6I"}],"key":"XSKHp8wpVq"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"These methods are not the only ways to measure microstructure! There are several others not mentioned here, but not used at Grand Mesa 2020. Ask if interested.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"lXXnQFMWrx"}],"key":"O6xhuyfG4s"},{"type":"heading","depth":2,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"SnowEx Microstructure Measurement Data Overview","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ZtXMaV8Eg9"}],"identifier":"snowex-microstructure-measurement-data-overview","label":"SnowEx Microstructure Measurement Data Overview","html_id":"snowex-microstructure-measurement-data-overview","implicit":true,"key":"MorASLUqdi"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Of the three methods described above, microCT is by far the most expensive and most time consuming. Samples have to be transported back to the laboratory and the processing time requires a microCT machine. Thus the fewest CT sapmles are taken.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"wCukhrl111"}],"key":"MjOO2A8nC4"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"The integrating spheres require a snowpit to be dug, so we have an intermediate number of them: ~100.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"rzJ5K1KgCn"}],"key":"G5aMgNy8LG"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"The micropen measurements are by far the fastest to make, so a cross pattern of SMP measurements was made on orthogonal directions intersecting at the snowpit. There are thousands of SMP profiles from Grand Mesa 2020.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"NOehjARy6S"}],"key":"gvgDBzDqbA"}],"key":"hWOm4x3I5z"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Working with the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YI5PI55lDO"}],"identifier":"working-with-the-data","label":"Working with the data","html_id":"working-with-the-data","implicit":true,"key":"ic5b21h6Jf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’re going to do two things! First, we’ll intercompare the three different integrating sphere instruments at four different pits where we had multiple instruments operating. We’d expect these data to be fairly self-consistent. Second, we’ll compare all three methods (integrating sphere, SMP and microCT) at a single pit where we had all of these measurements present. Here especially with the SMP we would expect to need to intercalibrate the data to match local conditions; so far SSA has only been fit to SMP force measurements in one study, and we should assume we’ll need a local calibration to get a tight fit.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ct2KDYdD6k"}],"key":"gMdwCnEgT8"}],"key":"nNaKkQso2J"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"0. Load needed modules","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dhFCEvRS4C"}],"identifier":"id-0-load-needed-modules","label":"0. Load needed modules","html_id":"id-0-load-needed-modules","implicit":true,"key":"EFyFvCLReu"}],"key":"de9FSf9vBH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from snowexsql.lambda_client import SnowExLambdaClient\n\n# Modules needed to work with data\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nimport contextily as cx\n\nfrom snowmicropyn import Profile\nfrom snowmicropyn import proksch2015\n\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')","key":"rUT3YvFpL0"},{"type":"outputs","id":"3U9Vwk6FiBBwLYbzXGD2_","children":[],"key":"ihxHyWjMBn"}],"key":"E6R2JQxKx9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Initialize client\nclient = SnowExLambdaClient()\n\n# Get all measurement classes dynamically\nclasses = client.get_measurement_classes()\nLayerMeasurements = classes['LayerMeasurements']\n\nprint(\"🔍 Testing Lambda connection...\")\nconnection_test = client.test_connection()\nprint(f\"✅ Connected: {connection_test.get('connected', False)}\")\nif connection_test.get('connected'):\n    print(f\"📊 Database: {connection_test.get('version', 'Unknown version')}\")\nelse:\n    print(\"❌ Connection failed\")","key":"ktuKG0irvL"},{"type":"outputs","id":"N2md9hg5ZWmJSxU8GdJv3","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"🔍 Testing Lambda connection...\n"},"key":"R82ic8doO6"},{"type":"output","children":[],"jupyter_data":{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mNoCredentialsError\u001b[39m                        Traceback (most recent call last)\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/lambda_client.py:237\u001b[39m, in \u001b[36mSnowExLambdaClient._invoke_lambda\u001b[39m\u001b[34m(self, action, **kwargs)\u001b[39m\n\u001b[32m    236\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m--\u003e \u001b[39m\u001b[32m237\u001b[39m     response = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mlambda_client\u001b[49m\u001b[43m.\u001b[49m\u001b[43minvoke\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    238\u001b[39m \u001b[43m        \u001b[49m\u001b[43mFunctionName\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mfunction_name\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    239\u001b[39m \u001b[43m        \u001b[49m\u001b[43mInvocationType\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mRequestResponse\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m    240\u001b[39m \u001b[43m        \u001b[49m\u001b[43mPayload\u001b[49m\u001b[43m=\u001b[49m\u001b[43mjson\u001b[49m\u001b[43m.\u001b[49m\u001b[43mdumps\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpayload\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    241\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    243\u001b[39m     result = json.loads(response[\u001b[33m'\u001b[39m\u001b[33mPayload\u001b[39m\u001b[33m'\u001b[39m].read().decode(\u001b[33m'\u001b[39m\u001b[33mutf-8\u001b[39m\u001b[33m'\u001b[39m))\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/client.py:602\u001b[39m, in \u001b[36mClientCreator._create_api_method.\u003clocals\u003e._api_call\u001b[39m\u001b[34m(self, *args, **kwargs)\u001b[39m\n\u001b[32m    601\u001b[39m \u001b[38;5;66;03m# The \"self\" in this scope is referring to the BaseClient.\u001b[39;00m\n\u001b[32m--\u003e \u001b[39m\u001b[32m602\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_make_api_call\u001b[49m\u001b[43m(\u001b[49m\u001b[43moperation_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/context.py:123\u001b[39m, in \u001b[36mwith_current_context.\u003clocals\u003e.decorator.\u003clocals\u003e.wrapper\u001b[39m\u001b[34m(*args, **kwargs)\u001b[39m\n\u001b[32m    122\u001b[39m     hook()\n\u001b[32m--\u003e \u001b[39m\u001b[32m123\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mfunc\u001b[49m\u001b[43m(\u001b[49m\u001b[43m*\u001b[49m\u001b[43margs\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/client.py:1060\u001b[39m, in \u001b[36mBaseClient._make_api_call\u001b[39m\u001b[34m(self, operation_name, api_params)\u001b[39m\n\u001b[32m   1059\u001b[39m     apply_request_checksum(request_dict)\n\u001b[32m-\u003e \u001b[39m\u001b[32m1060\u001b[39m     http, parsed_response = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_make_request\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m   1061\u001b[39m \u001b[43m        \u001b[49m\u001b[43moperation_model\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mrequest_dict\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mrequest_context\u001b[49m\n\u001b[32m   1062\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1064\u001b[39m \u001b[38;5;28mself\u001b[39m.meta.events.emit(\n\u001b[32m   1065\u001b[39m     \u001b[33mf\u001b[39m\u001b[33m'\u001b[39m\u001b[33mafter-call.\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mservice_id\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m.\u001b[39m\u001b[38;5;132;01m{\u001b[39;00moperation_name\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m'\u001b[39m,\n\u001b[32m   1066\u001b[39m     http_response=http,\n\u001b[32m   (...)\u001b[39m\u001b[32m   1069\u001b[39m     context=request_context,\n\u001b[32m   1070\u001b[39m )\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/client.py:1084\u001b[39m, in \u001b[36mBaseClient._make_request\u001b[39m\u001b[34m(self, operation_model, request_dict, request_context)\u001b[39m\n\u001b[32m   1083\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m-\u003e \u001b[39m\u001b[32m1084\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_endpoint\u001b[49m\u001b[43m.\u001b[49m\u001b[43mmake_request\u001b[49m\u001b[43m(\u001b[49m\u001b[43moperation_model\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mrequest_dict\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1085\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mException\u001b[39;00m \u001b[38;5;28;01mas\u001b[39;00m e:\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/endpoint.py:119\u001b[39m, in \u001b[36mEndpoint.make_request\u001b[39m\u001b[34m(self, operation_model, request_dict)\u001b[39m\n\u001b[32m    114\u001b[39m logger.debug(\n\u001b[32m    115\u001b[39m     \u001b[33m\"\u001b[39m\u001b[33mMaking request for \u001b[39m\u001b[38;5;132;01m%s\u001b[39;00m\u001b[33m with params: \u001b[39m\u001b[38;5;132;01m%s\u001b[39;00m\u001b[33m\"\u001b[39m,\n\u001b[32m    116\u001b[39m     operation_model,\n\u001b[32m    117\u001b[39m     request_dict,\n\u001b[32m    118\u001b[39m )\n\u001b[32m--\u003e \u001b[39m\u001b[32m119\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_send_request\u001b[49m\u001b[43m(\u001b[49m\u001b[43mrequest_dict\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43moperation_model\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/endpoint.py:196\u001b[39m, in \u001b[36mEndpoint._send_request\u001b[39m\u001b[34m(self, request_dict, operation_model)\u001b[39m\n\u001b[32m    195\u001b[39m \u001b[38;5;28mself\u001b[39m._update_retries_context(context, attempts)\n\u001b[32m--\u003e \u001b[39m\u001b[32m196\u001b[39m request = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mcreate_request\u001b[49m\u001b[43m(\u001b[49m\u001b[43mrequest_dict\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43moperation_model\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    197\u001b[39m success_response, exception = \u001b[38;5;28mself\u001b[39m._get_response(\n\u001b[32m    198\u001b[39m     request, operation_model, context\n\u001b[32m    199\u001b[39m )\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/endpoint.py:132\u001b[39m, in \u001b[36mEndpoint.create_request\u001b[39m\u001b[34m(self, params, operation_model)\u001b[39m\n\u001b[32m    131\u001b[39m     event_name = \u001b[33mf\u001b[39m\u001b[33m'\u001b[39m\u001b[33mrequest-created.\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mservice_id\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m.\u001b[39m\u001b[38;5;132;01m{\u001b[39;00moperation_model.name\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m'\u001b[39m\n\u001b[32m--\u003e \u001b[39m\u001b[32m132\u001b[39m     \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_event_emitter\u001b[49m\u001b[43m.\u001b[49m\u001b[43memit\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    133\u001b[39m \u001b[43m        \u001b[49m\u001b[43mevent_name\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    134\u001b[39m \u001b[43m        \u001b[49m\u001b[43mrequest\u001b[49m\u001b[43m=\u001b[49m\u001b[43mrequest\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    135\u001b[39m \u001b[43m        \u001b[49m\u001b[43moperation_name\u001b[49m\u001b[43m=\u001b[49m\u001b[43moperation_model\u001b[49m\u001b[43m.\u001b[49m\u001b[43mname\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    136\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    137\u001b[39m prepared_request = \u001b[38;5;28mself\u001b[39m.prepare_request(request)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/hooks.py:412\u001b[39m, in \u001b[36mEventAliaser.emit\u001b[39m\u001b[34m(self, event_name, **kwargs)\u001b[39m\n\u001b[32m    411\u001b[39m aliased_event_name = \u001b[38;5;28mself\u001b[39m._alias_event_name(event_name)\n\u001b[32m--\u003e \u001b[39m\u001b[32m412\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_emitter\u001b[49m\u001b[43m.\u001b[49m\u001b[43memit\u001b[49m\u001b[43m(\u001b[49m\u001b[43maliased_event_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/hooks.py:256\u001b[39m, in \u001b[36mHierarchicalEmitter.emit\u001b[39m\u001b[34m(self, event_name, **kwargs)\u001b[39m\n\u001b[32m    246\u001b[39m \u001b[38;5;250m\u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m    247\u001b[39m \u001b[33;03mEmit an event by name with arguments passed as keyword args.\u001b[39;00m\n\u001b[32m    248\u001b[39m \n\u001b[32m   (...)\u001b[39m\u001b[32m    254\u001b[39m \u001b[33;03m         handlers.\u001b[39;00m\n\u001b[32m    255\u001b[39m \u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m--\u003e \u001b[39m\u001b[32m256\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_emit\u001b[49m\u001b[43m(\u001b[49m\u001b[43mevent_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/hooks.py:239\u001b[39m, in \u001b[36mHierarchicalEmitter._emit\u001b[39m\u001b[34m(self, event_name, kwargs, stop_on_response)\u001b[39m\n\u001b[32m    238\u001b[39m logger.debug(\u001b[33m'\u001b[39m\u001b[33mEvent \u001b[39m\u001b[38;5;132;01m%s\u001b[39;00m\u001b[33m: calling handler \u001b[39m\u001b[38;5;132;01m%s\u001b[39;00m\u001b[33m'\u001b[39m, event_name, handler)\n\u001b[32m--\u003e \u001b[39m\u001b[32m239\u001b[39m response = \u001b[43mhandler\u001b[49m\u001b[43m(\u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    240\u001b[39m responses.append((handler, response))\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/signers.py:108\u001b[39m, in \u001b[36mRequestSigner.handler\u001b[39m\u001b[34m(self, operation_name, request, **kwargs)\u001b[39m\n\u001b[32m    103\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mhandler\u001b[39m(\u001b[38;5;28mself\u001b[39m, operation_name=\u001b[38;5;28;01mNone\u001b[39;00m, request=\u001b[38;5;28;01mNone\u001b[39;00m, **kwargs):\n\u001b[32m    104\u001b[39m     \u001b[38;5;66;03m# This is typically hooked up to the \"request-created\" event\u001b[39;00m\n\u001b[32m    105\u001b[39m     \u001b[38;5;66;03m# from a client's event emitter.  When a new request is created\u001b[39;00m\n\u001b[32m    106\u001b[39m     \u001b[38;5;66;03m# this method is invoked to sign the request.\u001b[39;00m\n\u001b[32m    107\u001b[39m     \u001b[38;5;66;03m# Don't call this method directly.\u001b[39;00m\n\u001b[32m--\u003e \u001b[39m\u001b[32m108\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43msign\u001b[49m\u001b[43m(\u001b[49m\u001b[43moperation_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mrequest\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/signers.py:200\u001b[39m, in \u001b[36mRequestSigner.sign\u001b[39m\u001b[34m(self, operation_name, request, region_name, signing_type, expires_in, signing_name)\u001b[39m\n\u001b[32m    198\u001b[39m         \u001b[38;5;28;01mraise\u001b[39;00m e\n\u001b[32m--\u003e \u001b[39m\u001b[32m200\u001b[39m \u001b[43mauth\u001b[49m\u001b[43m.\u001b[49m\u001b[43madd_auth\u001b[49m\u001b[43m(\u001b[49m\u001b[43mrequest\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/botocore/auth.py:422\u001b[39m, in \u001b[36mSigV4Auth.add_auth\u001b[39m\u001b[34m(self, request)\u001b[39m\n\u001b[32m    421\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.credentials \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m--\u003e \u001b[39m\u001b[32m422\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m NoCredentialsError()\n\u001b[32m    423\u001b[39m datetime_now = get_current_datetime()\n\n\u001b[31mNoCredentialsError\u001b[39m: Unable to locate credentials\n\nDuring handling of the above exception, another exception occurred:\n\n\u001b[31mException\u001b[39m                                 Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[2]\u001b[39m\u001b[32m, line 9\u001b[39m\n\u001b[32m      6\u001b[39m LayerMeasurements = classes[\u001b[33m'\u001b[39m\u001b[33mLayerMeasurements\u001b[39m\u001b[33m'\u001b[39m]\n\u001b[32m      8\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m🔍 Testing Lambda connection...\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m----\u003e \u001b[39m\u001b[32m9\u001b[39m connection_test = \u001b[43mclient\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtest_connection\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m     10\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[33m✅ Connected: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00mconnection_test.get(\u001b[33m'\u001b[39m\u001b[33mconnected\u001b[39m\u001b[33m'\u001b[39m,\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mFalse\u001b[39;00m)\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m\"\u001b[39m)\n\u001b[32m     11\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m connection_test.get(\u001b[33m'\u001b[39m\u001b[33mconnected\u001b[39m\u001b[33m'\u001b[39m):\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/lambda_client.py:269\u001b[39m, in \u001b[36mSnowExLambdaClient.test_connection\u001b[39m\u001b[34m(self)\u001b[39m\n\u001b[32m    262\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mtest_connection\u001b[39m(\u001b[38;5;28mself\u001b[39m) -\u003e Dict[\u001b[38;5;28mstr\u001b[39m, Any]:\n\u001b[32m    263\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m    264\u001b[39m \u001b[33;03m    Test database connection through Lambda\u001b[39;00m\n\u001b[32m    265\u001b[39m \u001b[33;03m    \u001b[39;00m\n\u001b[32m    266\u001b[39m \u001b[33;03m    Returns:\u001b[39;00m\n\u001b[32m    267\u001b[39m \u001b[33;03m        Dict with connection status and database version info\u001b[39;00m\n\u001b[32m    268\u001b[39m \u001b[33;03m    \"\"\"\u001b[39;00m\n\u001b[32m--\u003e \u001b[39m\u001b[32m269\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_invoke_lambda\u001b[49m\u001b[43m(\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mtest_connection\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/lambda_client.py:260\u001b[39m, in \u001b[36mSnowExLambdaClient._invoke_lambda\u001b[39m\u001b[34m(self, action, **kwargs)\u001b[39m\n\u001b[32m    258\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mException\u001b[39;00m(\u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[33mFailed to parse Lambda response: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00m\u001b[38;5;28mstr\u001b[39m(e)\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m\"\u001b[39m)\n\u001b[32m    259\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mException\u001b[39;00m \u001b[38;5;28;01mas\u001b[39;00m e:\n\u001b[32m--\u003e \u001b[39m\u001b[32m260\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mException\u001b[39;00m(\u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[33mLambda invocation failed: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00m\u001b[38;5;28mstr\u001b[39m(e)\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m\"\u001b[39m)\n\n\u001b[31mException\u001b[39m: Lambda invocation failed: Unable to locate credentials","ename":"Exception","evalue":"Lambda invocation failed: Unable to locate credentials"},"key":"a4wv5I9QL1"}],"key":"yaU2j4KgGo"}],"key":"EVVSce9Nna"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. Intercompare Integrating Sphere Datasets","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sBAdmnIC42"}],"identifier":"id-1-intercompare-integrating-sphere-datasets","label":"1. Intercompare Integrating Sphere Datasets","html_id":"id-1-intercompare-integrating-sphere-datasets","implicit":true,"key":"eXmIoA8VEG"}],"key":"aokhnygoee"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"There were three integrating spheres. The IRIS unit from University of Sherbrooke was operated by Celine Vargel. The IceCube unit from the Finnish Meteorological Institute was operated by Juha Lemmetyinen. And the IceCube unit from Ohio State was operated by Kehan Yang and Kate Hale. Carefully read the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kyIuELKYiB"},{"type":"link","url":"https://nsidc.org/data/SNEX20_SSA/versions/1","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"documentation page","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YsdUpmXnft"}],"urlSource":"https://nsidc.org/data/SNEX20_SSA/versions/1","key":"tQ6iRVe3co"},{"type":"text","value":" at NSIDC if you are interested in the data. If you are using the data for a project, please contact the authors and mention what you’re doing - they’ll appreciate it! Contact for SSA is Mike Durand (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Fmykwkz2WN"},{"type":"link","url":"mailto:durand.8@osu.edu","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"durand.8@osu.edu","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E0ZRo0UIqO"}],"urlSource":"mailto:durand.8@osu.edu","key":"Iv2pXt6ycc"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CJR1CJzU3f"}],"key":"g9PelVKDaI"}],"key":"ijPAHSeXGO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"SSA = LayerMeasurements.from_filter(\n    type='specific_surface_area',\n    limit=3000,\n    verbose=True\n)\n\nSSA.head() #check out the results of the query","key":"tbPTz6Jnbo"},{"type":"outputs","id":"KykG6e6zey5Q2v8N1lbK9","children":[],"key":"XGEc5BCcCV"}],"key":"pmoZD19Wpw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Since we want to intercompare integrating spheres, we need to isolate only the sites that actually had multiple integrating spheres measuring the same snow.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rQKq6pys9c"}],"key":"I2gOimpe29"}],"key":"wEdSlw2N29"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Grab all the sites with equivalent diameter data (set reduces a list to only its unique entries)\nsites = SSA['site_name'].unique()\n\n# Store all site names that have multiple SSA instruments\nmulti_instr_sites = []\ninstruments = []\n\nfor site in sites:\n\n    # Grab all the layers associated to this site\n    site_data = SSA.loc[SSA['site_name'] == site]\n\n    # Do a set on all the instruments used here\n    instruments_used = site_data['instrument_name'].unique()\n\n    if len(instruments_used) \u003e 1:\n        multi_instr_sites.append(site)\n\n# Get a unqique list of SSA instruments that were colocated\ninstruments = SSA['instrument_name'].unique()\n\ninstruments #check out the list of instruments. note that the IceCube values are displayed as serial numbers","key":"KFMKg9SBwh"},{"type":"outputs","id":"DwhkDrN4h-JaFeLoE_2Iv","children":[],"key":"OwkUrkDjw8"}],"key":"BTCQX3uz6c"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finally, plot all Integrating Sphere SSA profiles at all Multi-Integrating Sphere Sites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B6xIpYkSPN"}],"key":"GS0ziNw3SP"}],"key":"tTkrACKuqh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Setup the subplot for each site for each instrument\nfig, axes = plt.subplots(1, len(multi_instr_sites), figsize=(4*len(multi_instr_sites), 8))\n\n# Establish plot colors unique to the instrument\nc = ['k', 'm', 'c']\ncolors = {inst:c[i] for i,inst in enumerate(instruments)}\n\n# Loop over all the multi-instrument sites \nfor i, site in enumerate(multi_instr_sites):\n    \n    # Grab the plot for this site\n    ax = axes[i]\n    \n    # Loop over all the instruments at this site\n    for instr in instruments:\n\n        # Grab our profile by site and instrument\n        ind = SSA['site_name'] == site \n        ind2 = SSA['instrument_name'] == instr\n        profile = SSA.loc[ind \u0026 ind2].copy()\n\n        # Don't plot it unless there is data\n        if len(profile.index) \u003e 0:\n            \n            # Sort by depth so samples that are take out of order won't mess up the plot\n            profile = profile.sort_values(by='depth')\n            \n            # Layer profiles are always stored as strings. \n            profile['value'] = profile['value'].astype(float)\n            \n            # Plot our profile\n            ax.plot(profile['value'], profile['depth'], colors[instr], label=instr)\n   \n    # Labeling and plot style choices\n    ax.legend()\n    ax.set_xlabel('SSA [m2/kg]')\n    ax.set_ylabel('Height above snow-soil interface [cm]')\n    ax.set_title('Site {}'.format(site.upper()))\n    \n    # Set the x limits to show more detail\n    ax.set_xlim((8, 75))\n    \nplt.tight_layout()\nplt.show()\n","key":"lu2yORaC1Y"},{"type":"outputs","id":"SUks3Oj0fMgiPlO6w1vXN","children":[],"key":"N01eTq4Z2O"}],"key":"t8YezX983b"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Pull the snowmicropenetrometer data and compute SSA","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VIaeUUNi2h"}],"identifier":"id-2-pull-the-snowmicropenetrometer-data-and-compute-ssa","label":"2. Pull the snowmicropenetrometer data and compute SSA","html_id":"id-2-pull-the-snowmicropenetrometer-data-and-compute-ssa","implicit":true,"key":"AjCanEBGuC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The next step is to grab some SMP data to compare to. We’re going to get the SMP at site 2N13, where we have a copule of SSA profiles from integrating spheres (as well as microCT data, to be looked at in the next step!).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"waX54AKTe7"}],"key":"Wj4H3zy5tV"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The SMP measurements for SnowEx 2020 GrandMesa were all made by Megan Mason. If you’re interested in working with the SMP data, please carefully read the NSIDC ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AscEpuMxZq"},{"type":"link","url":"https://nsidc.org/data/SNEX20_SMP/versions/1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"documentation page","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mH5Ddkolzd"}],"urlSource":"https://nsidc.org/data/SNEX20_SMP/versions/1","key":"amsZ7apwq2"},{"type":"text","value":". If you’re planning to work with the data, please reach out to the author; the contact is (Megan Mason ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MF4RRkEj6W"},{"type":"link","url":"mailto:megan.a.mason@nasa.gov","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"megan​.a​.mason@nasa​.gov","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gsNW5hq1WY"}],"urlSource":"mailto:megan.a.mason@nasa.gov","key":"teMG5uxQA3"},{"type":"text","value":").","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KY2p73JKPB"}],"key":"E2e8beuQL3"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"As mentioned above, ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Xz9WFtUmMl"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Calonne2020","identifier":"calonne2020","children":[{"type":"text","value":"Calonne ","key":"rwGQjwQAdR"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"yJ4DmPH40N"}],"key":"hke3BNdzap"},{"type":"text","value":", 2020","key":"kApRvyjQkM"}],"enumerator":"10","key":"u5z0I6Ep2k"}],"key":"mWyAoDeiJ0"},{"type":"text","value":" tested applying the relationship of ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"XpfwRxfAw0"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"SAnhGlPGMF"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"oK4UhszQ1r"}],"key":"NPntzXSqf6"},{"type":"text","value":", 2015","key":"i080RwMCbo"}],"enumerator":"9","key":"tQi6XkpGGY"}],"key":"WU0G6iZ0ii"},{"type":"text","value":" and got quite poor results, explained them by the difference in hardware between generations of SMP instruments. We were unaware of that when designing the tutorial, and so set up use of the so-called official SMP processing repository, linked below, which has not yet been updated with the latest relationship. This would make a great project, as mentioned later!","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"GLxNoUo0bJ"}],"key":"BAm2zjRy3Q"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"First up, we’ll visualize the location of the SMP profiles, along with the snowpit location. All the data we will be working with is associated with the site label ‘2N13’. We’ll begin by querying all site names in the database and look for that string. We’ll use the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ZUj99lTehs"},{"type":"inlineCode","value":"get_sites","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jVyg8ASzlK"},{"type":"text","value":" method in the SnowEx API that provides basic information on the name and location of all layer measurement sites.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"L67geO8rhC"}],"key":"aFO74lVIhW"}],"key":"xA9aDrWh11"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get all sites containing '2N13'\nsites_with_2N13 = [site for site in LayerMeasurements.all_sites if '2N13' in site]\nprint(f\"Found {len(sites_with_2N13)} sites containing '2N13':\")\nsiteLocations = LayerMeasurements.get_sites(site_names=sites_with_2N13)\nsiteLocations","key":"p8pojTc6G5"},{"type":"outputs","id":"EnDhEJgqaz-Tha1pJe_Xv","children":[],"key":"KI3bScFnkT"}],"key":"dFhpDk2EYi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The site labeled ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Pl2nQXj1YG"},{"type":"inlineCode","value":"COGM2N13_20200206","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KOLZuhxXhC"},{"type":"text","value":" refers to the snowpit location, while the remaining 15 sites are SMP observations.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O6bz0mGiEl"}],"key":"w78RajdtA1"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Next we will plot the locations of these observations to assess their spatial proximity:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hrFdzIa7rf"}],"key":"Z0CjDlOIlj"}],"key":"P6gGbf9F31"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Separate the pit location from SMP locations\npit_location = siteLocations[siteLocations['name'] == 'COGM2N13_20200206']\nsmp_locations = siteLocations[siteLocations['name'] != 'COGM2N13_20200206']\n\n# Convert to Web Mercator for basemap\nsmp_locations_wm = smp_locations.to_crs(epsg=3857)\npit_location_wm = pit_location.to_crs(epsg=3857)\n\n# Create the plot\nfig, ax = plt.subplots(figsize=(10, 10))\nsmp_locations_wm.plot(ax=ax, marker='o', color='orange', markersize=100, edgecolor='black', label='SMP Locations')\npit_location_wm.plot(ax=ax, marker='s', color='black', markersize=150, edgecolor='black', label='Pit Location')\n\n# Add labels for SMP locations\nfor idx, row in smp_locations_wm.iterrows():\n    ax.annotate(row['name'], \n                xy=(row.geometry.x, row.geometry.y),\n                xytext=(5, 5), \n                textcoords='offset points',\n                fontsize=6,\n                bbox=dict(boxstyle='round,pad=0.3', facecolor='white', alpha=0.7, edgecolor='none'))\n\n# Add label for pit location\nfor idx, row in pit_location_wm.iterrows():\n    ax.annotate(row['name'], \n                xy=(row.geometry.x, row.geometry.y),\n                xytext=(5, 5), \n                textcoords='offset points',\n                fontsize=6,\n                bbox=dict(boxstyle='round,pad=0.3', facecolor='white', alpha=0.7, edgecolor='none'))\n\n# Zoom out by adding buffer to axis limits\nxlim = ax.get_xlim()\nylim = ax.get_ylim()\nx_buffer = (xlim[1] - xlim[0]) * 0.5\ny_buffer = (ylim[1] - ylim[0]) * 0.5\nax.set_xlim(xlim[0] - x_buffer, xlim[1] + x_buffer)\nax.set_ylim(ylim[0] - y_buffer, ylim[1] + y_buffer)\n\n# Add basemap - using Esri World Imagery for satellite view with terrain\ncx.add_basemap(ax, source=cx.providers.Esri.WorldImagery, alpha=0.5)\n\n# Avoid using Scientific notation for coords\nax.ticklabel_format(style='plain', useOffset=False)\n\nax.set_xlabel('Easting [m]', fontsize=12)\nax.set_ylabel('Northing [m]', fontsize=12)\nax.set_title('Site Locations', fontsize=14)\nax.legend()\nplt.tight_layout()\nplt.show()","key":"AkPE1Vftss"},{"type":"outputs","id":"-vSfQdjwNGo4d-Kcn_zBu","children":[],"key":"RN3M12vVPO"}],"key":"feEOSaCily"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next up, let’s find the closest SMP profile to the snowpit, and then find the profile ID of that profile, which is in the comments in the database.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"C2RyoOrtSa"}],"key":"BTdgRHihyS"}],"key":"ylpYtRiXe6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Find the closest SMP location to the pit\nfrom shapely.geometry import Point\n\n# Get pit coordinates\npit_coords = pit_location.geometry.values[0]\n\n# Calculate distance from each SMP location to the pit\nsmp_locations['distance_to_pit'] = smp_locations.geometry.apply(lambda x: x.distance(pit_coords))\n\n# Find the closest SMP location\nclosest_smp = smp_locations.loc[smp_locations['distance_to_pit'].idxmin()]\n\nprint(f\"Closest SMP location to pit: {closest_smp['name']}\")\nprint(f\"Distance: {closest_smp['distance_to_pit']:.2f} meters\")","key":"gLR7uzcRWz"},{"type":"outputs","id":"MTvFagQQ2f5Bvi54NVBvo","children":[],"key":"fvg7jkDgiM"}],"key":"Kp1tbGMNLV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"So the id of the closest SMP profile is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kJHNGIPF2l"},{"type":"inlineCode","value":"2N13-M1174","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"drMEsJOWpo"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bBcwWL64eF"}],"key":"siV7mmrYVe"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we’ll work on acquiring the associated data. Note that the SMP datasets are quite large and store a suite of observations. The SnowEx database currently stores a subset of the data, the force and depth profiles, but the remaining observations are not yet in the database. So for this exercise we will need to download the raw output from the sensor and do some additional processing.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i5x2cijjru"}],"key":"fmUVwyZr68"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To do this we go to the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kEgkJkVGsn"},{"type":"link","url":"https://nsidc.org/data/SNEX20_SMP/versions/1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"SMP page on NSIDC","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JEhMGuDbBw"}],"urlSource":"https://nsidc.org/data/SNEX20_SMP/versions/1","key":"sLndC0IQk8"},{"type":"text","value":", choose “Download” and searched for the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ktWhvq7eIb"},{"type":"inlineCode","value":"2N13-M1174","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ECN46liZWk"},{"type":"text","value":" ID. We’ve downloaded two raw point files, located in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BqcSLcbMi8"},{"type":"inlineCode","value":"data\\microstructure\\SMP","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NfpVDyNmzN"},{"type":"text","value":" directory in this repository, just for the sake of this tutorial.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VI8eeg9GL7"}],"key":"g8WukOGmE9"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Now we have to compute SSA from the SMP data. For this, we’ll use the “snowmicropyn” modules created by the Swiss SLF. You can read more about them ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qdkhOeLbAG"},{"type":"link","url":"https://snowmicropyn.readthedocs.io/en/latest/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"at this site","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YOEiv8a9yW"}],"urlSource":"https://snowmicropyn.readthedocs.io/en/latest/","key":"CANmkGwbsY"},{"type":"text","value":". The software is a little out of date on Python versions; just ignore any warnings that pop up below! Also, the use of the  ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hU4tOZlwx9"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"OZW0NaJfMF"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"ZKVYbzchHc"}],"key":"AS7wcYtMk8"},{"type":"text","value":", 2015","key":"Wy6VUmQOCZ"}],"enumerator":"9","key":"AE2RZK0e83"}],"key":"RsZTcYY7jf"},{"type":"text","value":" relationship is also out-of-date, as mentioned above.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"D44o81rOfQ"}],"key":"A8apHICi29"}],"key":"aVnOXjDyyq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"p = Profile.load('data/microstructure/SMP/SNEX20_SMP_S19M1174_2N13_20200206.PNT',)\nplt.plot(p.samples.distance, p.samples.force)\n# Prettify our plot a bit\nplt.title(p.name)\nplt.ylabel('Force [N]')\nplt.xlabel('Depth [mm]')\nplt.show()","key":"DBQq3BfUHd"},{"type":"outputs","id":"dK_2eeNLQnf-A9dJIl8T5","children":[],"key":"FGNJM74Hqr"}],"key":"kQu9M9ZTJm"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above shows the entire SMP profile; this includes the part of the force profile that is above the snow surface, and thus needs to be removed, in order to apply calculations only to the snow (not the air!).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JBBULUFfea"}],"key":"qqUkgItKc6"}],"key":"ykxzFTP4WK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#extract the part of the profile that is in the snow (i.e. remove air)\ndepth_surf=p.detect_surface()\ndepth_ground=p.detect_ground()\nsamples_snow=p.samples_within_distance(begin=depth_surf, end=depth_ground, relativize=False)\nsamples_snow.distance-=depth_surf\nplt.plot(samples_snow.distance, samples_snow.force)\nplt.title(p.name)\nplt.ylabel('Force [N]')\nplt.xlabel('Depth [mm]')\nplt.show()","key":"BVQW9VDz4w"},{"type":"outputs","id":"601Ypaqi_fchMHbFzmMbt","children":[],"key":"AxCbwS5bnt"}],"key":"vXJlJFA3R9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above part of the profile is just the part that is in the snow. PLEASE NOTE that the automated functions are not infallible, and need to be used with care. For now, these need to be compared back to the notes and interpreted manually.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HXVWHgr5gn"}],"key":"h0wwqDnE4U"}],"key":"Hrp964dG1D"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The next step is the actual calculation of SSA from the force data. It then displays the data and lets you see that there is now a column called SSA! Note that this function is “proksch2015”. You can read about how it works in Martin Proksch’s paper ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Do0b4ByLSN"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"NW268qoQni"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"F6QIispy4v"}],"key":"ZehhF7NUxT"},{"type":"text","value":", 2015","key":"YA4YuEKSrp"}],"enumerator":"9","key":"K3mi7VKkAx"}],"key":"R1QlNF22QR"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uQhM0MPE7b"}],"key":"lzLNdur9h4"}],"key":"QAVZRriffP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# call using the snowmicropyn library proksch2015\np2015 = proksch2015.calc(p.samples) \np2015.head() #check out the first few values of SSA","key":"ZfjLgn5kzu"},{"type":"outputs","id":"KpR61vXtvUOXOUA2KlJwD","children":[],"key":"eHQSttMswe"}],"key":"uhxUhVp0lw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Read microCT data, and compare integrating sphere, SMP and CT data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yQqBGjddgF"}],"identifier":"id-3-read-microct-data-and-compare-integrating-sphere-smp-and-ct-data","label":"3. Read microCT data, and compare integrating sphere, SMP and CT data","html_id":"id-3-read-microct-data-and-compare-integrating-sphere-smp-and-ct-data","implicit":true,"key":"jR7i7smDi0"}],"key":"Ag5h939dEc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The microCT samples were extracted in the field and processed at CRREL by Lauren Farnsworth, and is not yet published at NSIDC. Please contact her with questions (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WbrL9tW6FM"},{"type":"link","url":"mailto:lauren.b.farnsworth@usace.army.mil","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"lauren​.b​.farnsworth@usace​.army​.mil","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hmmmws7EBj"}],"urlSource":"mailto:lauren.b.farnsworth@usace.army.mil","key":"z3fxCj6PeN"},{"type":"text","value":")!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sHw3oboe2g"}],"key":"SsfJiyFtz6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This module reads in microCT datafiles which are stored as text. Some additional data are available, showing the computer generated slices through the ice-air interface: contact Mike (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"h0p2OllKmt"},{"type":"link","url":"mailto:durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bQXiauEwW2"}],"urlSource":"mailto:durand.8@osu.edu","key":"eV18zJKzA0"},{"type":"text","value":") if you want to look at a subset of these data that Lauren has shared.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"b1uD1yKtkr"}],"key":"LE04ystPQO"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Equivalent grain size is a useful quantity to compare: because it’s proportional to 1/SSA, and because after a point as you increase SSA more and more, all fine-grained snow acts more-or-less the same (converging to e.g. the “fine-grained” curve in Figure 1, above), we’ll look at equivalent diameter instead of SSA in this comparison.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SXFDJjnOEM"}],"key":"RORpep0d7v"}],"key":"kKGFiUd36K"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# function to read all microCT data in\n#    by Mike Durand June 2021\n\ndef read_CT_txt_files(DataDir):\n        \n    filenames = (f for f in os.scandir(DataDir) if not f.name.startswith('.'))\n    n=len(list(filenames)) #to preallocate S    \n    \n    SSA=np.empty([n])\n    height_min=np.empty([n])\n    height_max=np.empty([n])\n\n    filenames = (f for f in os.scandir(DataDir) if not f.name.startswith('.'))\n    \n    count=0\n    \n    for entry in filenames:\n\n        fname=DataDir + entry.name                \n        \n        #parse depth range\n        split_name=fname.split('_')\n        height_range=split_name[1]\n        height_min_max=height_range[0:-2].split('-')            \n        height_max[count]=float(height_min_max[0])\n        height_min[count]=float(height_min_max[1])                   \n                        \n        with open(fname,\"r\",encoding='iso-8859-1') as datafile:            \n            for line in datafile:                \n                if 'Object surface / volume ratio' in line:                \n                    split_line=line.split(',')                                        \n                    SSA[count]=float(split_line[2])\n                    count+=1                    \n\n    #convert from 1/mm to m^2/kg \n    SSA*=1000./917. \n    \n    # sort data\n    isort=np.argsort(height_min)\n    height_min=height_min[isort]\n    height_max=height_max[isort]\n    SSA=SSA[isort]\n \n    return SSA,height_min,height_max","key":"nnMRWdHo5J"},{"type":"outputs","id":"RNVUJC4s7IW8bu0s2BKnz","children":[],"key":"hOi5oN7DPl"}],"key":"jnNg6TiY31"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read micro CT data for 2N13","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ochybsEoIU"}],"identifier":"read-micro-ct-data-for-2n13","label":"Read micro CT data for 2N13","html_id":"read-micro-ct-data-for-2n13","implicit":true,"key":"F34B2TD6rJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The full dataset of micro CT data can be found at ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"q5XtXQCJqF"},{"type":"link","url":"https://doi.org/10.5281/zenodo.5504396/files/microstructure.zip","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​zenodo​.org​/record​/5504396​/files​/microstructure​.zip","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"u3cPt5G6NQ"}],"urlSource":"https://zenodo.org/record/5504396/files/microstructure.zip","data":{"doi":"10.5281/zenodo.5504396/files/microstructure.zip"},"internal":false,"protocol":"doi","key":"XSWWEFRT9B"},{"type":"text","value":". Here we have already downloaded 5 of those files, just for illustration purposes.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"L2pLfY7OZI"}],"key":"GSoT1Bn4R5"}],"key":"Am67d0B1H6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# read micro CT for 2N13\ndata_dir='data/microstructure/microCT/txt/'\n[SSA_CT,height_min,height_max]=read_CT_txt_files(data_dir)","key":"Oa5aH3QDx7"},{"type":"outputs","id":"StVzD-wsHi8slzaIFVa1l","children":[],"key":"UaYlsqfFmQ"}],"key":"YnJgWjQD6p"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s get all the Specific Surface Area from the database for those sites associated with 2N13. We can use the list of sites we already generated above:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H4IWCMe25n"}],"key":"IUlUprwCuw"}],"key":"nK3XoFzjSn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"SSA_2N13 = LayerMeasurements.from_filter(\n    site=sites_with_2N13,\n    type = 'specific_surface_area',\n    limit = 3000,\n    verbose = True)\nSSA_2N13.head()","key":"JedZq33ZMe"},{"type":"outputs","id":"J7UFNWPvW4flMNsKvi6XF","children":[],"key":"cvQmnEWwwU"}],"key":"qsFxxY2UOv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"instruments_site = SSA_2N13['instrument_name'].unique()\n\n# Loop over all the integrating sphere instruments at this site. plot equivalent diameter\nfig,ax = plt.subplots(figsize=(6,8))\nfor instr in instruments_site:\n\n    # Grab our profile by site and instrument\n    ind = SSA_2N13['instrument_name'] == instr\n    profile = SSA_2N13.loc[ind].copy()\n    # Don't plot it unless there is data\n    if len(profile.index) \u003e 0:\n\n        # Sort by depth so samples that are take out of order won't mess up the plot\n        profile = profile.sort_values(by='depth')\n\n        # Layer profiles are always stored as strings. \n        profile['value'] = 6/917/profile['value'].astype(float)*1000\n\n        # Plot our profile\n        ax.plot(profile['value'], profile['depth'], colors[instr], label=instr)\n        \n#All that's left to do is plot the CT and the SMP and label the plot!\nax.plot(6/917/SSA_CT*1000,height_min,label='microCT')        #CT data\n\nax.plot(6/917/p2015.P2015_ssa*1000,(max(p2015.distance)-p2015.distance)/10,label='SMP') #SMP data\n\n# Labeling and plot style choices\nax.legend()\nax.set_xlabel('Equivalent diameter, mm')\nax.set_ylabel('Height above snow-soil interface [cm]')\nax.set_title('Site {}'.format(site.upper()))\n    \nplt.tight_layout()\nplt.show()","key":"Wu58x4T4IP"},{"type":"outputs","id":"SvEe5L1ydr_aPwuxtNNK5","children":[],"key":"Zab8Xo9WeD"}],"key":"iPTrNllbo9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wow, so the datasets are so very different, with the SMP being by far the most different. Comparing with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OPFehttSiq"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Calonne2020","identifier":"calonne2020","children":[{"type":"text","value":"Calonne ","key":"DCwRQ3dSFX"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"rhrOSuDapx"}],"key":"csPEKipdZL"},{"type":"text","value":", 2020","key":"rmiOcKXo6p"}],"enumerator":"10","key":"csKHjb1974"}],"key":"DXTIXE3PWn"},{"type":"text","value":" shows that the SMP is off in the same direction as diagnosed in that paper. Thus, the difference is most likely due to the difference in SMP instruments. Dr. Mel Sandells of Northumbria University has a github branch of the SMP software SnowMicropyn that has the newer fit relationship integrated in the software. It would be a nice project to loop in Mel’s branch with this notebook and see how well things compare to SnowEx data. I’d be happy to help anyone interested get rolling on that!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IQL1PXCqPI"}],"key":"Z3kcJi3IUl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"There’s also significant differences between the microCT and the two integrating spheres. This is science - sometimes when we start intercomparing these quantities, we do not get a perfect match. This would also be a fascinating thing to explore in a Hackweek project.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jK2yvJGDIH"}],"key":"txoAIGN8ZA"}],"key":"vixvgJeOl2"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Some of the ways to could connect microstructure measurements to other quantities would be with the SWESARR radar data. Although the radar data does seem to have some orthorectification issues that haven’t been fully worked out, I can imagine these being worked around by careful choice of places you match up the microstructure to the radar. Note that places that are shallower tend to have larger D","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jsOUO5W8Cn"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"l27t1TKp0D"}],"key":"EFXwQ0WYNg"},{"type":"text","value":" and vice versa, and the spatial variability in SSA was fairly low in general in Grand Mesa 2020, so looking at multiple SSA vs radar samples might not yield a great correlation.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JqrR3o77pL"}],"key":"pF9a6q0XfR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"One thing that could be of great value is to calibrate the SMP estimates of SSA to the integrating spheres. It might also be interesting to compare the data to hand hardness measured in the snowpit, and to traditional hand lens measurements.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"adS7ggUcAF"}],"key":"PR7Ltaomoo"}],"key":"tEHnb23qAl"}],"key":"dckVcpUDbs"},"references":{"cite":{"order":["Dozier2009","Matzler2002","Matzl2010","Grenfell1999","Heggli2011","Gallet2009","Montpetit2012","Lowe2012","Proksch2015","Calonne2020"],"data":{"Dozier2009":{"label":"Dozier2009","enumerator":"1","doi":"10.1016/j.rse.2007.07.029","html":"Dozier, J., Green, R. O., Nolin, A. W., \u0026 Painter, T. H. (2009). Interpretation of snow properties from imaging spectrometry. \u003ci\u003eRemote Sensing of Environment\u003c/i\u003e, \u003ci\u003e113\u003c/i\u003e, S25 S37. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/j.rse.2007.07.029\"\u003e10.1016/j.rse.2007.07.029\u003c/a\u003e","url":"https://doi.org/10.1016/j.rse.2007.07.029"},"Matzler2002":{"label":"Matzler2002","enumerator":"2","doi":"10.3189/172756502781831287","html":"Mätzler, C. (2002). Relation between grain-size and correlation length of snow. \u003ci\u003eJournal of Glaciology\u003c/i\u003e, \u003ci\u003e48\u003c/i\u003e(162), 461–466. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.3189/172756502781831287\"\u003e10.3189/172756502781831287\u003c/a\u003e","url":"https://doi.org/10.3189/172756502781831287"},"Matzl2010":{"label":"Matzl2010","enumerator":"3","doi":"10.1016/j.coldregions.2010.06.006","html":"Matzl, M., \u0026 Schneebeli, M. (2010). Stereological measurement of the specific surface area of seasonal snow types: Comparison to other methods, and implications for mm-scale vertical profiling. \u003ci\u003eCold Regions Science and Technology\u003c/i\u003e, \u003ci\u003e64\u003c/i\u003e(1), 1–8. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/j.coldregions.2010.06.006\"\u003e10.1016/j.coldregions.2010.06.006\u003c/a\u003e","url":"https://doi.org/10.1016/j.coldregions.2010.06.006"},"Grenfell1999":{"label":"Grenfell1999","enumerator":"4","doi":"doi:10.1029/1999JD900496","html":"Grenfell, T. C., \u0026 Warren, S. G. (1999). Representation of a nonspherical ice particle by a collection of independent spheres for scattering and absorption of radiation. \u003ci\u003eJournal of Geophysical Research - Atmospheres\u003c/i\u003e, \u003ci\u003e104\u003c/i\u003e(D24), 31697 31709. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1029/1999JD900496\"\u003edoi:10.1029/1999JD900496\u003c/a\u003e","url":"https://doi.org/10.1029/1999JD900496"},"Heggli2011":{"label":"Heggli2011","enumerator":"5","html":"HEGGLI, M., CHLE, B., Matzl, M., PINZER, B., RICHE, F., STEINER, S., STEINFELD, D., \u0026 Schneebeli, M. (2011). Measuring snow in 3-D using X-ray tomography: assessment of visualization techniques. \u003ci\u003eAnnals of Glaciology\u003c/i\u003e, \u003ci\u003e52\u003c/i\u003e(58), 231."},"Gallet2009":{"label":"Gallet2009","enumerator":"6","html":"Gallet, J. C., Domine, F., Zender, C. S., \u0026 Picard, G. (2009). Measurement of the specific surface area of snow using infrared reflectance in an integrating sphere at 1310 and 1550 nm. \u003ci\u003eThe Cryosphere\u003c/i\u003e, \u003ci\u003e3\u003c/i\u003e, 167 182."},"Montpetit2012":{"label":"Montpetit2012","enumerator":"7","doi":"10.3189/2012jog11j248","html":"Montpetit, B., Royer, A., Langlois, A., Cliche, P., Roy, A., Champollion, N., Picard, G., Domine, F., \u0026 Obbard, R. (2012). New shortwave infrared albedo measurements for snow specific surface area retrieval. \u003ci\u003eJournal of Glaciology\u003c/i\u003e, \u003ci\u003e58\u003c/i\u003e(211), 941 952. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.3189/2012jog11j248\"\u003e10.3189/2012jog11j248\u003c/a\u003e","url":"https://doi.org/10.3189/2012jog11j248"},"Lowe2012":{"label":"Lowe2012","enumerator":"8","doi":"10.1016/j.coldregions.2011.09.001","html":"Löwe, H., \u0026 Herwijnen, A. van. (2012). A Poisson shot noise model for micro-penetration of snow. \u003ci\u003eCold Regions Science and Technology\u003c/i\u003e, \u003ci\u003e70\u003c/i\u003e, 62–70. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/j.coldregions.2011.09.001\"\u003e10.1016/j.coldregions.2011.09.001\u003c/a\u003e","url":"https://doi.org/10.1016/j.coldregions.2011.09.001"},"Proksch2015":{"label":"Proksch2015","enumerator":"9","doi":"10.1002/2014jf003266","html":"Proksch, M., Löwe, H., \u0026 Schneebeli, M. (2015). Density, specific surface area, and correlation length of snow measured by high‐resolution penetrometry. \u003ci\u003eJournal of Geophysical Research: Earth Surface\u003c/i\u003e, \u003ci\u003e120\u003c/i\u003e(2), 346–362. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1002/2014jf003266\"\u003e10.1002/2014jf003266\u003c/a\u003e","url":"https://doi.org/10.1002/2014jf003266"},"Calonne2020":{"label":"Calonne2020","enumerator":"10","doi":"10.5194/tc-14-1829-2020","html":"Calonne, N., Richter, B., Löwe, H., Cetti, C., Schure, J. ter, Herwijnen, A. V., Fierz, C., Jaggi, M., \u0026 Schneebeli, M. (2020). The RHOSSA campaign: multi-resolution monitoring of the seasonal evolution of the structure and mechanical stability of an alpine snowpack. \u003ci\u003eThe Cryosphere\u003c/i\u003e, \u003ci\u003e14\u003c/i\u003e(6), 1829–1848. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5194/tc-14-1829-2020\"\u003e10.5194/tc-14-1829-2020\u003c/a\u003e","url":"https://doi.org/10.5194/tc-14-1829-2020"}}}},"footer":{"navigation":{"prev":{"title":"UAVSAR","url":"/notebooks/uavsar-tutorial","group":"Observations"},"next":{"title":"Introduction to AVIRIS-NG","url":"/notebooks/aviris-ng-tutorial","group":"Observations"}}},"domain":"http://localhost:3000"},"project":{"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"bibliography":["/home/runner/work/snow-observations-cookbook/snow-observations-cookbook/references.bib"],"title":"Snow Observations Cookbook","authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"contributors":[{"id":"brian-rose","nameParsed":{"literal":"Brian E. J. Rose","given":"Brian E. J.","family":"Rose"},"name":"Brian E. J. Rose","orcid":"0000-0002-9961-3821","email":"brose@albany.edu","affiliations":["UAlbany"],"url":"https://brian-rose.github.io","github":"brian-rose","bluesky":"@brianejrose.bsky.social","linkedin":"https://www.linkedin.com/in/brian-rose-37bb55106/"},{"id":"clyne","nameParsed":{"literal":"John Clyne","given":"John","family":"Clyne"},"name":"John Clyne","orcid":"0000-0003-2788-9017","affiliations":["CISL"],"github":"clyne"},{"id":"jukent","nameParsed":{"literal":"Julia Kent","given":"Julia","family":"Kent"},"name":"Julia Kent","orcid":"0000-0002-5611-8986","affiliations":["CISL"],"github":"jukent"},{"id":"ktyle","nameParsed":{"literal":"Kevin Tyle","given":"Kevin","family":"Tyle"},"name":"Kevin Tyle","orcid":"0000-0001-5249-9665","affiliations":["UAlbany"],"github":"ktyle"},{"id":"andersy005","nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","orcid":"0000-0001-6583-571X","affiliations":["CarbonPlan"],"github":"andersy005"},{"id":"dcamron","nameParsed":{"literal":"Drew Camron","given":"Drew","family":"Camron"},"name":"Drew Camron","orcid":"0000-0001-7246-6502","affiliations":["Unidata"],"github":"dcamron"},{"id":"dopplershift","nameParsed":{"literal":"Ryan May","given":"Ryan","family":"May"},"name":"Ryan May","orcid":"0000-0003-2907-038X","affiliations":["Unidata"],"github":"dopplershift"},{"id":"mgrover1","nameParsed":{"literal":"Maxwell Grover","given":"Maxwell","family":"Grover"},"name":"Maxwell Grover","orcid":"0000-0002-0370-8974","affiliations":["Argonne"],"github":"mgrover1"},{"id":"r-ford","nameParsed":{"literal":"Robert R. Ford","given":"Robert R.","family":"Ford"},"name":"Robert R. Ford","orcid":"0000-0001-5483-4965","affiliations":["UAlbany"],"github":"r-ford"},{"id":"kmpaul","nameParsed":{"literal":"Kevin Paul","given":"Kevin","family":"Paul"},"name":"Kevin Paul","orcid":"0000-0001-8155-8038","affiliations":["NVIDIA"],"github":"kmpaul"},{"id":"jnmorley","nameParsed":{"literal":"James Morley","given":"James","family":"Morley"},"name":"James Morley","orcid":"0009-0005-5193-7981","github":"jnmorley"},{"id":"erogluorhan","nameParsed":{"literal":"Orhan Eroglu","given":"Orhan","family":"Eroglu"},"name":"Orhan Eroglu","orcid":"0000-0003-3099-8775","affiliations":["CISL"],"github":"erogluorhan"},{"id":"lkailynncar","nameParsed":{"literal":"Lily Kailyn","given":"Lily","family":"Kailyn"},"name":"Lily Kailyn","orcid":"0009-0002-0125-5091","affiliations":["CISL"],"github":"lkailynncar"},{"id":"anissa111","nameParsed":{"literal":"Anissa Zacharias","given":"Anissa","family":"Zacharias"},"name":"Anissa Zacharias","orcid":"0000-0002-2666-8493","affiliations":["CISL"],"github":"anissa111"},{"id":"kafitzgerald","nameParsed":{"literal":"Katelyn FitzGerald","given":"Katelyn","family":"FitzGerald"},"name":"Katelyn FitzGerald","orcid":"0000-0003-4184-1917","affiliations":["CISL"],"github":"kafitzgerald"}],"github":"https://github.com/SnowEx/snow-observations-cookbook","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"copyright":"2025","references":{"foundations":{"url":"https://foundations.projectpythia.org"},"xarray":{"url":"https://docs.xarray.dev/en/stable"},"matplotlib":{"url":"https://matplotlib.org/stable"}},"thebe":{"binder":{"url":"https://binder.projectpythia.org/","provider":"github","repo":"executablebooks/thebe-binder-base","ref":"HEAD"}},"toc":[{"file":"README.md"},{"children":[{"file":"notebooks/how-to-cite.md"}],"title":"Preamble"},{"children":[{"file":"notebooks/snowex_data_overview.ipynb"},{"file":"notebooks/snowexsql_database.ipynb"}],"title":"Data Access"},{"children":[{"file":"notebooks/GPR_Lidar_HackweekTutorial.ipynb"},{"file":"notebooks/thermal-ir-tutorial.ipynb"},{"file":"notebooks/timelapse-camera-tutorial.ipynb"},{"file":"notebooks/uavsar-tutorial.ipynb"},{"file":"notebooks/microstructure-tutorial.ipynb"},{"file":"notebooks/aviris-ng-tutorial.ipynb"},{"file":"notebooks/tls_data_access.ipynb"},{"file":"notebooks/snotel_data_access.ipynb"}],"title":"Observations"}],"thumbnail":"/snow-observations-cookbook/_preview/5/build/thumbnail-d4c257baf164282f2f7f47264aef846d.png","exports":[],"index":"index","pages":[{"level":1,"title":"Preamble"},{"slug":"notebooks.how-to-cite","title":"How to Cite This Cookbook","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/72a08caa5cbe5f9cce5999dbd1a81dfd.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Data Access"},{"slug":"notebooks.snowex-data-overview","title":"Field Campaigns Overview","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/01_banner-68dfc285b86d624f3c31ada2b77a72e3.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snowexsql-database","title":"SnowExSQL Database","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/data_examples-eae9c38c26eef6738812929082984979.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Observations"},{"slug":"notebooks.gpr-lidar-hackweektutorial","title":"GPR and Lidar","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/HackweekGraphicalAbs-00d4ff139ce4e2a545b09bf0a84b03a2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.thermal-ir-tutorial","title":"Thermal Infrared","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/twinotter1-c2c8102da490fd6ae9880ee3e3f22943.JPG","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.timelapse-camera-tutorial","title":"Time-lapse Cameras","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/timelapse-camera-tut-8af2d6082d30f80e3d48709ea642fe30.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.uavsar-tutorial","title":"UAVSAR","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/sthelens-d071ba2e84c85623d62d5eb5c8a2f0ea.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.microstructure-tutorial","title":"Microstructure","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/dozier2009_fig2-82e63fce70ff23f22437e5b55bdfb737.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.aviris-ng-tutorial","title":"Introduction to AVIRIS-NG","description":"","date":"","thumbnail":"/snow-observations-cookbook/_preview/5/build/Aviris-c7ba22f1a0b6de98ee3f641c3b23dfe1.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.tls-data-access","title":"Terrestrial Laser Scanning","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snotel-data-access","title":"SNOTEL Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/snow-observations-cookbook/_preview/5/build/manifest-86A905A4.js";
import * as route0 from "/snow-observations-cookbook/_preview/5/build/root-CXYA7X5D.js";
import * as route1 from "/snow-observations-cookbook/_preview/5/build/routes/$-JRBPULBO.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/snow-observations-cookbook/_preview/5/build/entry.client-PCJPW7TK.js");</script></body></html>