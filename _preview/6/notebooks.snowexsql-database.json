{"version":3,"kind":"Notebook","sha256":"dfd4b2b5281e2db0b92137d23fd221e4500e0c88c89e9113e9447faf7f8aa460","slug":"notebooks.snowexsql-database","location":"/notebooks/snowexsql_database.ipynb","dependencies":[],"frontmatter":{"title":"SnowExSQL Database","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/SnowEx/snow-observations-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/SnowEx/snow-observations-cookbook/blob/main/notebooks/snowexsql_database.ipynb","edit_url":"https://github.com/SnowEx/snow-observations-cookbook/edit/main/notebooks/snowexsql_database.ipynb","thumbnail":"/snow-observations-cookbook/_preview/6/build/data_examples-89774f49259753cd3afb330774586465.png","exports":[{"format":"ipynb","filename":"snowexsql_database.ipynb","url":"/snow-observations-cookbook/_preview/6/build/snowexsql_database-7c190878fa673ef046d3e13e404e6e93.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Tutorial Author Micah‚Äô","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"AGlUFyUe4A"}],"key":"sG3q7xb0Gi"},{"type":"text","value":": ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"f5jGkRPZzy"},{"type":"link","url":"https://github.com/micah-prime","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Micah Sandusky","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uM7wrWNmYn"}],"urlSource":"https://github.com/micah-prime","error":true,"key":"xC4g3bHsnQ"}],"key":"bfQrrESBhY"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Tutorial Author Micah_o","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"T06qk3qEp2"}],"key":"U0p2c3s2uo"},{"type":"text","value":": ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BJao9o5mw0"},{"type":"link","url":"https://github.com/micahjohnson150","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Micah Johnson","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"iw1ZojyxHl"}],"urlSource":"https://github.com/micahjohnson150","error":true,"key":"KpQIRyFtDJ"}],"key":"dMvzqgGYtX"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://snow.nasa.gov/campaigns/snowex","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"SnowEx","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"HnPygP6FuN"}],"urlSource":"https://snow.nasa.gov/campaigns/snowex","key":"fbrQhujXkM"},{"type":"text","value":" has introduced a unique opportunity to study SWE in a way that‚Äôs unprecedented, but with more data comes new challenges.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"dFA9IiVTXN"}],"key":"FGPh1LHR7Y"},{"type":"image","url":"/snow-observations-cookbook/_preview/6/build/data_examples-89774f49259753cd3afb330774586465.png","alt":"examples","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"wqkogWAy1B","urlSource":"./images/snowex_database/data_examples.png"},{"type":"comment","value":" \n<img src=\"https://snowexsql.readthedocs.io/en/latest/_images/gallery_overview_example_12_0.png\" alt=\"Grand Mesa Overview\" width=\"1000px\"> ","key":"ZnpMqGpRXW"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"The SnowEx database is a resource that shortcuts the time it takes to ask cross dataset questions","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"j8SzwwgCil"}],"key":"lJSvXkHiOi"}],"key":"OIc0he8oXX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Standardizing diverse data","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"qP8y7bnhC2"}],"key":"C20NbwPPa1"}],"key":"TF6xUZG4eZ"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Cross referencing data","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"yuJgW3KWOa"}],"key":"sFUwpN1Kww"}],"key":"xbph8pxsq5"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Provenance!","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Xz170UiIU7"}],"key":"EtDbvIcyuB"}],"key":"j3L0JEUAAp"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Added GIS functionality","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"ztnol3nCLi"}],"key":"gM9uZN7A7A"}],"key":"kQ6JaHqdXE"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Connect w/ ArcGIS or QGIS!","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Ufh8bhh9T1"}],"key":"WGDgQ1NQOb"}],"key":"YqOsGnubz9"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"CITABLE","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"lROwUdnIGU"}],"key":"B8amKcmmU7"}],"key":"ng1doyexlJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":26,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://tc.copernicus.org/articles/17/1997/2023/tc-17-1997-2023-discussion.html","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"2022- Estimating snow accumulation and ablation with L-band interferometric synthetic aperture radar (InSAR)","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"poX5HCwAAL"}],"key":"om5EwhWy3s"}],"urlSource":"https://tc.copernicus.org/articles/17/1997/2023/tc-17-1997-2023-discussion.html","key":"TZ8Ip6nLGD"}],"key":"XUCdLUqxLU"}],"key":"nnKqQ1T3j5"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://tc.copernicus.org/articles/18/2257/2024/","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"2024 - Thermal infrared shadow-hiding in GOES-R ABI imagery: snow and forest temperature observations from the SnowEx 2020 Grand Mesa field campaign","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"S7vAZqZrCY"}],"key":"IkOdvidfbU"}],"urlSource":"https://tc.copernicus.org/articles/18/2257/2024/","key":"PrtlLLuzLd"}],"key":"LUwmq2gBGq"}],"key":"F2MzySp1bO"}],"key":"tkKX7FoBhv"}],"key":"arW11UshHe"}],"key":"mpGYovwfq0"},{"type":"heading","depth":3,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"What‚Äôs in it?","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"zb7BxckAkW"}],"identifier":"whats-in-it","label":"What‚Äôs in it?","html_id":"whats-in-it","implicit":true,"key":"JFDXCsS542"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Snow pits - Density, hardness profiles, grain types + sizes","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"xDhqFNY5WZ"}],"key":"RwsIalQLDC"}],"key":"PEYVHGAG39"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Manual snow depths - TONS of depths (Can you say spirals?)","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"Wswb6kflc2"}],"key":"V03hY0C6HN"}],"key":"Clbc8o7kUP"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Snow Micropenetrometer (SMP) profiles - (Subsampled to every 100th)","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"GDaiCJmxgQ"}],"key":"KcdfJoHm6X"}],"key":"CrummXxJXg"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Snow depth + SWE rasters from ASO Inc.","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"XLjLSgrRBn"}],"key":"jRnap6Fgyi"}],"key":"fonKfxrqwF"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"GPR","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"zmfDQXemZ9"}],"key":"j9Nm1KKMmx"}],"key":"pTbUwJxH9d"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pit site notes","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"D7AK2Eglfo"}],"key":"SrDBFmKXDN"}],"key":"tOhQB2zdCo"},{"type":"listItem","spread":true,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Camera Derived snow depths","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"KCY7sozYi3"}],"key":"rJGC2KWAkO"}],"key":"YJxqJ1ePpN"},{"type":"listItem","spread":true,"position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Snow off DEM from USGS 3DEP","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"Pyc1E94Ebd"}],"key":"DzTYF8tM1D"}],"key":"Ri8gAOHpae"},{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"And almost all the associated metadata","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"WK9PUj2jHG"}],"key":"yPmqDQFH4z"}],"key":"IwaHqfIP1k"}],"key":"zvM2BmQvMg"},{"type":"heading","depth":3,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Technically, what is it?","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"gv9yABBPzA"}],"identifier":"technically-what-is-it","label":"Technically, what is it?","html_id":"technically-what-is-it","implicit":true,"key":"jpnJEzzEuh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":45,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"PostgreSQL database","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"AqQ7QBfrBp"}],"key":"dRZUncZFpy"}],"key":"UfZcZMU8o0"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"PostGIS extension","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"TjruZoPJw5"}],"key":"nOkn37uGgh"}],"key":"ZDCnGpjkMy"},{"type":"listItem","spread":true,"position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Supports vector and raster data","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"FokxDb19zy"}],"key":"oKLiPBHNCO"}],"key":"Qi22uJnXwT"},{"type":"listItem","spread":true,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"And a host of GIS operations","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"QZwEAVGkUS"}],"key":"HX0Shcpt5t"}],"key":"zbDQYGUA7x"},{"type":"listItem","spread":true,"position":{"start":{"line":49,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"AND NOW WITH API!","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"RG1MTNXe5H"}],"key":"nmyYvqgqbw"}],"key":"NWgdJ3iJXJ"}],"key":"NFzugi4ck0"},{"type":"heading","depth":2,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"THIS TUTORIAL IS BEING UPDATED","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"brk232XaMb"}],"identifier":"this-tutorial-is-being-updated","label":"THIS TUTORIAL IS BEING UPDATED","html_id":"this-tutorial-is-being-updated","implicit":true,"key":"D5S1Xbo4xA"},{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"The code currently in this tutorial is out of date due to recent developments with the SnowEx database. Updates will be applied once the SnowEx Lambda Client is active.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"QE9qseoZtC"}],"key":"bLQTyxINSS"}],"key":"sISoCkX7UQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"So what‚Äôs the catch?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vekTNau17X"}],"identifier":"so-whats-the-catch","label":"So what‚Äôs the catch?","html_id":"so-whats-the-catch","implicit":true,"key":"aePvFfZK1s"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"New tech can create barriers...","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tkx39s3k9d"}],"key":"BjX7q8cT1k"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/snow-observations-cookbook/_preview/6/build/pits_not_bits-a88fdc0a4562ea875c9237751926f634.jpg","alt":"pits not bits","key":"jWhB1z3b8q","urlSource":"./images/snowex_database/pits_not_bits.jpg"}],"enumerator":"1","key":"Ji0Vs9E5Xc"},{"type":"heading","depth":4,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"TL;DR Do less wrangling, do more crunching.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HbAQbxJ2ZT"}],"identifier":"tl-dr-do-less-wrangling-do-more-crunching","label":"TL;DR Do less wrangling, do more crunching.","html_id":"tl-dr-do-less-wrangling-do-more-crunching","implicit":true,"key":"AbGvo73gCU"}],"key":"yAonrMLy06"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How do I get at this magical box of data ?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bOtOxIddso"}],"identifier":"how-do-i-get-at-this-magical-box-of-data","label":"How do I get at this magical box of data ?","html_id":"how-do-i-get-at-this-magical-box-of-data","implicit":true,"key":"iLq0kgLB9z"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://www.postgresql.org/docs/13/tutorial-sql.html","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"SQL","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pYQ5hI8B3v"}],"urlSource":"https://www.postgresql.org/docs/13/tutorial-sql.html","key":"RROXTQRuqj"}],"key":"oBoj0Ij7OZ"}],"key":"B9amMt0TVR"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"snowexsql","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zKIcRIhcDC"}],"urlSource":"https://github.com/SnowEx/snowexsql/","error":true,"key":"MFjMLVpzJU"},{"type":"text","value":" ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"g3Iq9AXpBz"},{"type":"span","style":{"fontSize":"20pt"},"children":[{"type":"strong","children":[{"type":"text","value":"‚Üê üòé","key":"KUQjiDDzJk"}],"key":"cFbrhLque4"}],"key":"nGp5DbbBrJ"}],"key":"oHJmiBjG6U"}],"key":"gZYxyOD377"}],"key":"Ta7KSqaNWi"},{"type":"heading","depth":4,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Welcome to API Land","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"k4uULTFZ2v"}],"identifier":"welcome-to-api-land","label":"Welcome to API Land","html_id":"welcome-to-api-land","implicit":true,"key":"Ap0GkB6fXn"}],"key":"PP1GRxxBuC"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"# Bring snowexsql package up to date\n!pip install -U snowexsql","key":"Z8aipo3n8U"},{"type":"outputs","id":"G99OTh0JQFBsV_0o6X6XA","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Requirement already satisfied: snowexsql in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (1.1.0rc2.dev10)\r\n"},"key":"ykSbFzkmkz"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Requirement already satisfied: boto3<2.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (1.42.43)\r\nRequirement already satisfied: geoalchemy2<1.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (0.18.1)\r\nRequirement already satisfied: geopandas<2.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (1.1.2)\r\nRequirement already satisfied: psycopg2-binary<3.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (2.9.11)\r\nRequirement already satisfied: rasterio<2.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (1.5.0)\r\nRequirement already satisfied: requests<3.0,>=2.31.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (2.32.5)\r\nRequirement already satisfied: sqlalchemy<3.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (2.0.46)\r\nRequirement already satisfied: urllib3<3.0,>=2.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (2.6.3)\r\nRequirement already satisfied: utm<0.9 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from snowexsql) (0.8.1)\r\nRequirement already satisfied: botocore<1.43.0,>=1.42.43 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from boto3<2.0->snowexsql) (1.42.43)\r\nRequirement already satisfied: jmespath<2.0.0,>=0.7.1 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from boto3<2.0->snowexsql) (1.1.0)\r\nRequirement already satisfied: s3transfer<0.17.0,>=0.16.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from boto3<2.0->snowexsql) (0.16.0)\r\nRequirement already satisfied: python-dateutil<3.0.0,>=2.1 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from botocore<1.43.0,>=1.42.43->boto3<2.0->snowexsql) (2.9.0.post0)\r\nRequirement already satisfied: packaging in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from geoalchemy2<1.0->snowexsql) (26.0)\r\nRequirement already satisfied: numpy>=1.24 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from geopandas<2.0->snowexsql) (2.3.5)\r\nRequirement already satisfied: pandas>=2.0.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from geopandas<2.0->snowexsql) (2.3.3)\r\nRequirement already satisfied: shapely>=2.0.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from geopandas<2.0->snowexsql) (2.1.2)\r\nRequirement already satisfied: six>=1.5 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.43.0,>=1.42.43->boto3<2.0->snowexsql) (1.17.0)\r\nRequirement already satisfied: affine in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from rasterio<2.0->snowexsql) (2.4.0)\r\nRequirement already satisfied: attrs in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from rasterio<2.0->snowexsql) (25.4.0)\r\nRequirement already satisfied: certifi in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from rasterio<2.0->snowexsql) (2026.1.4)\r\nRequirement already satisfied: click!=8.2.*,>=4.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from rasterio<2.0->snowexsql) (8.3.1)\r\nRequirement already satisfied: cligj>=0.5 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from rasterio<2.0->snowexsql) (0.7.2)\r\nRequirement already satisfied: pyparsing in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from rasterio<2.0->snowexsql) (3.3.2)\r\nRequirement already satisfied: charset_normalizer<4,>=2 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from requests<3.0,>=2.31.0->snowexsql) (3.4.4)\r\nRequirement already satisfied: idna<4,>=2.5 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from requests<3.0,>=2.31.0->snowexsql) (3.11)\r\nRequirement already satisfied: greenlet>=1 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from sqlalchemy<3.0->snowexsql) (3.3.1)\r\nRequirement already satisfied: typing-extensions>=4.6.0 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from sqlalchemy<3.0->snowexsql) (4.15.0)\r\nRequirement already satisfied: pytz>=2020.1 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from pandas>=2.0.0->geopandas<2.0->snowexsql) (2025.2)\r\nRequirement already satisfied: tzdata>=2022.7 in /home/runner/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages (from pandas>=2.0.0->geopandas<2.0->snowexsql) (2025.3)\r\n"},"key":"CwJp0crSC2"}],"key":"jcLNNmdyFh"}],"key":"MYiJ81YncS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Make a sample plot from pit ruler measurements\nfrom snowexsql.api import PointMeasurements\n\ndf = PointMeasurements.from_filter(type=\"depth\", instrument='pit ruler', limit=100)\ndf.plot(column='value', cmap='jet', vmin=10, vmax=150)\ndf","key":"gIYXQRaGbG"},{"type":"outputs","id":"eDcra9OH2tXYawXa-dsdr","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mFileNotFoundError\u001b[39m                         Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[2]\u001b[39m\u001b[32m, line 4\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# Make a sample plot from pit ruler measurements\u001b[39;00m\n\u001b[32m      2\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01msnowexsql\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mapi\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m PointMeasurements\n\u001b[32m----> \u001b[39m\u001b[32m4\u001b[39m df = \u001b[43mPointMeasurements\u001b[49m\u001b[43m.\u001b[49m\u001b[43mfrom_filter\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;28;43mtype\u001b[39;49m\u001b[43m=\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mdepth\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43minstrument\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mpit ruler\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mlimit\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m100\u001b[39;49m\u001b[43m)\u001b[49m\n\u001b[32m      5\u001b[39m df.plot(column=\u001b[33m'\u001b[39m\u001b[33mvalue\u001b[39m\u001b[33m'\u001b[39m, cmap=\u001b[33m'\u001b[39m\u001b[33mjet\u001b[39m\u001b[33m'\u001b[39m, vmin=\u001b[32m10\u001b[39m, vmax=\u001b[32m150\u001b[39m)\n\u001b[32m      6\u001b[39m df\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/api.py:335\u001b[39m, in \u001b[36mBaseDataset.from_filter\u001b[39m\u001b[34m(cls, verbose, **kwargs)\u001b[39m\n\u001b[32m    324\u001b[39m \u001b[38;5;129m@classmethod\u001b[39m\n\u001b[32m    325\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mfrom_filter\u001b[39m(\u001b[38;5;28mcls\u001b[39m, verbose=\u001b[38;5;28;01mFalse\u001b[39;00m, **kwargs):\n\u001b[32m    326\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m    327\u001b[39m \u001b[33;03m    Get data for the class by filtering by allowed arguments. The allowed\u001b[39;00m\n\u001b[32m    328\u001b[39m \u001b[33;03m    filters are cls.ALLOWED_QRY_KWARGS.\u001b[39;00m\n\u001b[32m   (...)\u001b[39m\u001b[32m    333\u001b[39m \u001b[33;03m        **kwargs: Filter arguments from ALLOWED_QRY_KWARGS\u001b[39;00m\n\u001b[32m    334\u001b[39m \u001b[33;03m    \"\"\"\u001b[39;00m\n\u001b[32m--> \u001b[39m\u001b[32m335\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43;01mwith\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43mdb_session_with_credentials\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43;01mas\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43m(\u001b[49m\u001b[43mengine\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43msession\u001b[49m\u001b[43m)\u001b[49m\u001b[43m:\u001b[49m\n\u001b[32m    336\u001b[39m \u001b[43m        \u001b[49m\u001b[38;5;28;43;01mtry\u001b[39;49;00m\u001b[43m:\u001b[49m\n\u001b[32m    337\u001b[39m \u001b[43m            \u001b[49m\u001b[43mselect_clause\u001b[49m\u001b[43m \u001b[49m\u001b[43m=\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43mcls\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_build_select_clause\u001b[49m\u001b[43m(\u001b[49m\u001b[43mverbose\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/contextlib.py:141\u001b[39m, in \u001b[36m_GeneratorContextManager.__enter__\u001b[39m\u001b[34m(self)\u001b[39m\n\u001b[32m    139\u001b[39m \u001b[38;5;28;01mdel\u001b[39;00m \u001b[38;5;28mself\u001b[39m.args, \u001b[38;5;28mself\u001b[39m.kwds, \u001b[38;5;28mself\u001b[39m.func\n\u001b[32m    140\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m141\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mnext\u001b[39;49m\u001b[43m(\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mgen\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    142\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mStopIteration\u001b[39;00m:\n\u001b[32m    143\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mRuntimeError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mgenerator didn\u001b[39m\u001b[33m'\u001b[39m\u001b[33mt yield\u001b[39m\u001b[33m\"\u001b[39m) \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mNone\u001b[39;00m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/db.py:130\u001b[39m, in \u001b[36mdb_session_with_credentials\u001b[39m\u001b[34m(credentials_path)\u001b[39m\n\u001b[32m    121\u001b[39m \u001b[38;5;129m@contextmanager\u001b[39m\n\u001b[32m    122\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mdb_session_with_credentials\u001b[39m(credentials_path=\u001b[38;5;28;01mNone\u001b[39;00m):\n\u001b[32m    123\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m    124\u001b[39m \u001b[33;03m    Helper method to allow database session with a context block.\u001b[39;00m\n\u001b[32m    125\u001b[39m \n\u001b[32m   (...)\u001b[39m\u001b[32m    128\u001b[39m \n\u001b[32m    129\u001b[39m \u001b[33;03m    \"\"\"\u001b[39;00m\n\u001b[32m--> \u001b[39m\u001b[32m130\u001b[39m     engine, session = \u001b[43mget_db\u001b[49m\u001b[43m(\u001b[49m\u001b[43mcredentials_path\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    131\u001b[39m     \u001b[38;5;28;01myield\u001b[39;00m engine, session\n\u001b[32m    132\u001b[39m     session.close()\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/db.py:106\u001b[39m, in \u001b[36mget_db\u001b[39m\u001b[34m(credentials_path, return_metadata)\u001b[39m\n\u001b[32m     89\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mget_db\u001b[39m(credentials_path: \u001b[38;5;28mstr\u001b[39m = \u001b[38;5;28;01mNone\u001b[39;00m, return_metadata: \u001b[38;5;28mbool\u001b[39m = \u001b[38;5;28;01mFalse\u001b[39;00m):\n\u001b[32m     90\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m     91\u001b[39m \u001b[33;03m    Returns the DB engine, MetaData, and session object\u001b[39;00m\n\u001b[32m     92\u001b[39m \n\u001b[32m   (...)\u001b[39m\u001b[32m    104\u001b[39m \u001b[33;03m                            modifying the database\u001b[39;00m\n\u001b[32m    105\u001b[39m \u001b[33;03m    \"\"\"\u001b[39;00m\n\u001b[32m--> \u001b[39m\u001b[32m106\u001b[39m     db_connection = \u001b[43mdb_connection_string\u001b[49m\u001b[43m(\u001b[49m\u001b[43mcredentials_path\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    108\u001b[39m     engine = create_engine(\n\u001b[32m    109\u001b[39m         db_connection, echo=\u001b[38;5;28;01mFalse\u001b[39;00m, connect_args=DB_CONNECTION_OPTIONS\n\u001b[32m    110\u001b[39m     )\n\u001b[32m    112\u001b[39m     session = sessionmaker(bind=engine)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/db.py:80\u001b[39m, in \u001b[36mdb_connection_string\u001b[39m\u001b[34m(credentials_path)\u001b[39m\n\u001b[32m     78\u001b[39m     db += credentials\n\u001b[32m     79\u001b[39m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[32m---> \u001b[39m\u001b[32m80\u001b[39m     credentials = \u001b[43mload_credentials\u001b[49m\u001b[43m(\u001b[49m\u001b[43mcredentials_path\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m     81\u001b[39m     db += (\n\u001b[32m     82\u001b[39m         \u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mcredentials[\u001b[33m'\u001b[39m\u001b[33musername\u001b[39m\u001b[33m'\u001b[39m]\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m:\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mcredentials[\u001b[33m'\u001b[39m\u001b[33mpassword\u001b[39m\u001b[33m'\u001b[39m]\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m\"\u001b[39m\n\u001b[32m     83\u001b[39m         \u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[33m@\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mcredentials[\u001b[33m'\u001b[39m\u001b[33maddress\u001b[39m\u001b[33m'\u001b[39m]\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m/\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mcredentials[\u001b[33m'\u001b[39m\u001b[33mdb_name\u001b[39m\u001b[33m'\u001b[39m]\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m\"\u001b[39m\n\u001b[32m     84\u001b[39m     )\n\u001b[32m     86\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m db\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/snow-observations-cookbook/lib/python3.14/site-packages/snowexsql/db.py:53\u001b[39m, in \u001b[36mload_credentials\u001b[39m\u001b[34m(credentials_path)\u001b[39m\n\u001b[32m     50\u001b[39m         credentials = json.load(file)\n\u001b[32m     52\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m credentials \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m---> \u001b[39m\u001b[32m53\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mFileNotFoundError\u001b[39;00m(\n\u001b[32m     54\u001b[39m         \u001b[33m\"\u001b[39m\u001b[33mFile to credentials was not provided. Please use the following options: \u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m     55\u001b[39m         \u001b[33m\"\u001b[39m\u001b[33m* Pass the file path to this method \u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m     56\u001b[39m         \u001b[33m\"\u001b[39m\u001b[33m* Set the SNOWEX_DB_CREDENTIALS environment variable to a JSON file\u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m     57\u001b[39m         \u001b[33m\"\u001b[39m\u001b[33m* Set the SNOWEX_DB_CONNECTION environment variable. \u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m     58\u001b[39m         \u001b[33m\"\u001b[39m\u001b[33m  Example: user:password@127.0.0.1/db_name\u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m     59\u001b[39m     )\n\u001b[32m     61\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m credentials\n\n\u001b[31mFileNotFoundError\u001b[39m: File to credentials was not provided. Please use the following options: * Pass the file path to this method * Set the SNOWEX_DB_CREDENTIALS environment variable to a JSON file* Set the SNOWEX_DB_CONNECTION environment variable.   Example: user:password@127.0.0.1/db_name","ename":"FileNotFoundError","evalue":"File to credentials was not provided. Please use the following options: * Pass the file path to this method * Set the SNOWEX_DB_CREDENTIALS environment variable to a JSON file* Set the SNOWEX_DB_CONNECTION environment variable.   Example: user:password@127.0.0.1/db_name"},"key":"RxibLxk3lR"}],"key":"hBAKt4A6Up"}],"key":"ZTGwlCiK4B"},{"type":"block","kind":"notebook-content","children":[],"key":"kAnu4kDeH8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How is the Database Structured?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HbTQdY8CVX"}],"identifier":"how-is-the-database-structured","label":"How is the Database Structured?","html_id":"how-is-the-database-structured","implicit":true,"key":"tzLQ63dkN0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The goal of the database is to hold as much of the SnowEx data in one place and make it easier to\ndo research with. With that in mind follow the steps below to see how the the data base is structured.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"U9600KIhzA"}],"key":"fyxMgWft0P"}],"key":"NISgfSQIyh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Where do datasets live (i.e. tables)?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TtbtONP3dx"}],"identifier":"where-do-datasets-live-i-e-tables","label":"Where do datasets live (i.e. tables)?","html_id":"where-do-datasets-live-i-e-tables","implicit":true,"key":"pwmMacds21"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data in the database lives in 1 of 4 places.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ElLeNHF9eI"}],"key":"K8CJXpWxrz"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/snow-observations-cookbook/_preview/6/build/structure-2bd77feab834bd716c4837e2f4ddde52.png","alt":"Structure of the snowex db","key":"UnnUXPfaFB","urlSource":"./images/snowex_database/structure.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Layout of the database tables","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"xEcD6NnMg8"}],"key":"aTcTr47TwJ"}],"key":"oMQJjSlO8Z"}],"enumerator":"2","key":"klHXiumtA5"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"The 4th table is a table detailing the site information. Lots and lots of metadata for which the API has not been written yet.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LD4Bkw1xed"}],"key":"QLndqlnNSF"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"So how does this look in python?","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"GOC1le3nwn"}],"key":"xhurh8U4Nl"}],"key":"uZ5XSbWPPA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Point measurements, layer measurements, and raster measurements are all obtainable as sub-classes\nfrom snowexsql.api import PointMeasurements, LayerMeasurements, RasterMeasurements","key":"BsOgGHJh5v"},{"type":"outputs","id":"RMoYYntdP5C1VwFz1R6RP","children":[],"key":"noMzYG9dpe"}],"key":"O7KPO0Cqfh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How are tables structured?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OYA4yzLRiw"}],"identifier":"how-are-tables-structured","label":"How are tables structured?","html_id":"how-are-tables-structured","implicit":true,"key":"u9fIboYP8f"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Each table consists of rows and columns. Below are the available columns!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"FihjDa7PcU"}],"key":"NteaoWg76c"}],"key":"cwpvT6CzVp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import the class reflecting the points table in the db\nfrom snowexsql.api import PointMeasurements as measurements\n\n# Grab one measurement to see what attributes are available\ndf = measurements.from_filter(type=\"depth\", limit=1)\n\n# Print out the results nicely\nprint(\"These are the available columns in the table:\\n \\n* {}\\n\".format('\\n* '.join(df.columns)))","key":"mj6QdgnlBF"},{"type":"outputs","id":"euvbxjLU19DmPJUSz1Rru","children":[],"key":"quhEyRX7Kg"}],"key":"eWifVTWGyX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Forming Queries through the API!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t1CbUVsymD"}],"identifier":"forming-queries-through-the-api","label":"Forming Queries through the API!","html_id":"forming-queries-through-the-api","implicit":true,"key":"u1eb33hgLO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Get familiar with the tools available for querying the database. The simplest way is to use the api classes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"T2NgJQzZCo"}],"key":"phZjpXMqQ8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L185","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"snowexsql.api.PointMeasurements","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"f54B9B6izF"}],"urlSource":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L185","data":{"kind":"file","org":"SnowEx","repo":"snowexsql","reference":"830fa76de8cf13c5101e1b4b663c1b399f81d7e6","file":"snowexsql/api.py","from":185,"raw":"https://raw.githubusercontent.com/SnowEx/snowexsql/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py"},"internal":false,"protocol":"github","key":"lgHiI69KTR"}],"key":"wMFxndMdCj"}],"key":"PGd5O9nq0T"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L262","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"snowexsql.api.LayerMeasurements","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"byHPv6kTmL"}],"urlSource":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L262","data":{"kind":"file","org":"SnowEx","repo":"snowexsql","reference":"830fa76de8cf13c5101e1b4b663c1b399f81d7e6","file":"snowexsql/api.py","from":262,"raw":"https://raw.githubusercontent.com/SnowEx/snowexsql/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py"},"internal":false,"protocol":"github","key":"wacwb2h1JU"}],"key":"kNZHv1uVNG"}],"key":"OrnafFiIDn"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Each class has to very useful functions","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fKXSMYYvay"}],"key":"h0cZZomKat"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L192","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":"from_filter","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fvDha8N8a3"}],"urlSource":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L192","data":{"kind":"file","org":"SnowEx","repo":"snowexsql","reference":"830fa76de8cf13c5101e1b4b663c1b399f81d7e6","file":"snowexsql/api.py","from":192,"raw":"https://raw.githubusercontent.com/SnowEx/snowexsql/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py"},"internal":false,"protocol":"github","key":"eBX0kny2FT"}],"key":"rthmAD7cn9"}],"key":"XDLcHd4NCi"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L210","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"from_area","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mPnLvEw7hZ"}],"urlSource":"https://github.com/SnowEx/snowexsql/blob/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py#L210","data":{"kind":"file","org":"SnowEx","repo":"snowexsql","reference":"830fa76de8cf13c5101e1b4b663c1b399f81d7e6","file":"snowexsql/api.py","from":210,"raw":"https://raw.githubusercontent.com/SnowEx/snowexsql/830fa76de8cf13c5101e1b4b663c1b399f81d7e6/snowexsql/api.py"},"internal":false,"protocol":"github","key":"ri6xKPaNJO"}],"key":"LBVWGHILCB"}],"key":"B3eaRqaMiQ"}],"key":"fINEGdycBp"}],"key":"ALO2UlxSDR"}],"key":"FJ5vO8DhWt"}],"key":"WXq61EP2vb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import in our two classes to access the db\nfrom snowexsql.api import LayerMeasurements\nfrom datetime import datetime \n\n# Find some density pit measurements at the Boise site in december 2019.\ndf = LayerMeasurements.from_filter(\n    type=\"density\",\n    site_name=\"Boise River Basin\",\n    date_less_equal=datetime(2020, 1, 1),\n    date_greater_equal=datetime(2019, 12, 1),\n)\n\n# Plot Example!\ndf.plot()\n\n# Show off the dataframe\ndf\n\n# Analysis Example - Find the bulk density \ndf['value'] = df['value'].astype(float)\nprint(df[['site_id', 'value']].groupby(by='site_id').mean())","key":"xDOHZ3NJTs"},{"type":"outputs","id":"HrBuxe6knlx_cPOk8aJkb","children":[],"key":"BvCBgtWj2k"}],"key":"D5CJhQlP5f"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"An alternative function is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qv9nHioxeJ"},{"type":"inlineCode","value":"from_area","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GACfunKU4S"},{"type":"text","value":", which subsets the data within a given distance of a point.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YbTYlejLWt"}],"key":"eOzo43faGY"}],"key":"lt8YjteOmE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import our api class\nimport geopandas as gpd \n\n# import some gis functionality \nfrom shapely.geometry import Point \n\n# Find some SSA measurements within a distance of a known point\npnt = Point(740820.624625,4.327326e+06)\ndf = LayerMeasurements.from_area(pt=pnt, crs=26912, buffer=500,\n    type='specific_surface_area')\n\n# plot up the results\nax = df.plot()\n\n# plot the site so we can see how close everything is.\nsite = gpd.GeoDataFrame(geometry=[pnt], crs=26912)\nsite.plot(ax=ax, marker='^', color='magenta')\n\n# show off the dataframe\ndf","key":"sYLdJ1TJRd"},{"type":"outputs","id":"Vh_ocW9IATKen695Y37f_","children":[],"key":"Pqql6V1e7b"}],"key":"GjW9VwSKas"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How do I know what to filter on?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"idThpt0ve4"}],"identifier":"how-do-i-know-what-to-filter-on","label":"How do I know what to filter on?","html_id":"how-do-i-know-what-to-filter-on","implicit":true,"key":"KOEbnDbLJo"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"There are tools for that! Each class has a host of functions that start with ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rpNDE0dgIR"},{"type":"inlineCode","value":"all_*","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mLRyEU9wDl"},{"type":"text","value":" these function return the unique value in that column.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"AxssJ98I6s"}],"key":"Zhpd2pd34N"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"all_types","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"PLyxdqPSqp"},{"type":"text","value":" - all the data types e.g. depth, swe, density...","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"wpQY5Zy3L2"}],"key":"SMOGXJCpdk"}],"key":"XhZRZ2mubB"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"all_instruments","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nos5ccf5gU"},{"type":"text","value":" - all instruments available in the table","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VOrByomkVi"}],"key":"FPyTmq4pmy"}],"key":"EGUR9OpaFd"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"all_dates","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dYnefKAcZd"},{"type":"text","value":" - all dates listed in the table","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Q4yjWUdfgB"}],"key":"CLIxlEfBw8"}],"key":"dmBy1zaATP"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"all_site_names","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VDck1TYV1A"},{"type":"text","value":" - all the site names available in the table. e.g. Grand Mesa","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pbTzSeCMkj"}],"key":"AkuHZGR8sI"}],"key":"OTIY8fTwaY"}],"key":"RYeMxbQiaz"}],"key":"FxfdMPziyK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from snowexsql.api import PointMeasurements\n\n# Instantiate the class to use the properties!\nmeasurements = PointMeasurements()\n\n# Get the unique data names/types in the table\nresults = measurements.all_types\nprint('Available types = {}'.format(', '.join([str(r) for r in results])))\n\n# Get the unique instrument in the table\nresults = measurements.all_instruments\nprint('\\nAvailable Instruments = {}'.format(', '.join([str(r) for r in results])))\n\n# Get the unique dates in the table\nresults = measurements.all_dates\nprint('\\nAvailable Dates = {}'.format(', '.join([str(r) for r in results])))\n\n# Get the unique site names in the table\nresults = measurements.all_site_names\nprint('\\nAvailable sites = {}'.format(', '.join([str(r) for r in results])))","key":"rZ80dJ22qE"},{"type":"outputs","id":"X7Xcd4JJ9NOcwdQomSGB_","children":[],"key":"lDV0YiLR0x"}],"key":"iyghYtyvE9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"More specific filtering options","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aWc6XwOUKB"}],"identifier":"more-specific-filtering-options","label":"More specific filtering options","html_id":"more-specific-filtering-options","implicit":true,"key":"BMd2S7FtOy"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Sometimes we need a bit more filtering to know more about what I can filter on. Questions like ‚ÄúWhat dates was the SMP used?‚Äù are a bit more complicated than ‚ÄúGive me all the dates for snowex‚Äù","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GKcOuVmvqD"}],"key":"nJleCzvXEc"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The good news is, we have tool for that! ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"WAkXzrCgw5"},{"type":"inlineCode","value":"from_unique_entries","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"lcwX7CKar0"},{"type":"text","value":" is your friend!","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"CNk0xC90sU"}],"key":"aZhwriuSbD"}],"key":"AW4gdrS1J1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# import layer measurements\nfrom snowexsql.api import LayerMeasurements\n\n# Query dates where SMP was used\nLayerMeasurements.from_unique_entries(['date'], instrument='snowmicropen')","key":"gZNAfHQp1A"},{"type":"outputs","id":"U-50osNsTvS8NlXAY7wmu","children":[],"key":"onO4098wzU"}],"key":"LROZG0GvX6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Query Nuances","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K0b407aEV9"}],"identifier":"query-nuances","label":"Query Nuances","html_id":"query-nuances","implicit":true,"key":"p65xqdi5S9"},{"type":"heading","depth":4,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Limit size","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sWkRkDywHf"}],"identifier":"limit-size","label":"Limit size","html_id":"limit-size","implicit":true,"key":"yw6sQQ65ws"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To avoid accidental large queries, we have added some bumper rails. By default if you ask for more than 1000 records then an error will pop up unless you explicitly say you want more.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"s7hyAlxTtK"}],"key":"ezFb5BOHvQ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Try This","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wW4dSFux1A"}],"key":"El9Hocd1lQ"},{"type":"text","value":": Do a large query. Run the code block below without the limit keyword argument (‚Äúkwarg‚Äù):","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"O64jADL1Eg"}],"key":"GKDYIDGqeG"}],"key":"Bp3r1Incgm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import PointMeasurements\nfrom snowexsql.api import PointMeasurements\n\n# Query db using a vague filter or on a huge dataset like GPR but remove the limit kwarg\ndf = PointMeasurements.from_filter(type='two_way_travel', limit=100)\n\n# Show the dataframe\ndf","key":"TZEEgUkaZh"},{"type":"outputs","id":"MouDKnPj7Miu6SS74V_n_","children":[],"key":"fDQnl6CAUu"}],"key":"MaXFJtycHt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We have added this on the db to allow you to explore without accidentally pulling the entire SnowEx universe down. If you know you want a large query (defined as > 1000) then use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cGPSLfitNo"},{"type":"inlineCode","value":"limit = ####","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IoGABPTymI"},{"type":"text","value":" option in the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GalndmWEnH"},{"type":"inlineCode","value":"from_filter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t0tptwkDce"},{"type":"text","value":" or ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X76AJhVVOG"},{"type":"inlineCode","value":"from_area","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KbuJjIeB6H"},{"type":"text","value":" function.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aOahNYzx2w"}],"key":"q193OaSEbl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Warning","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MWg5ggZpuo"}],"key":"LuNM7gabuC"},{"type":"text","value":" - It is better to filter using other things besides the limit because the limit is not intelligent. It will simply limit the query by the order of entries that were submitted AND fits your filter. So if you encounter this then consider how to tighten up the filter.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YSicxlGczX"}],"key":"VTMaN5nsh5"},{"type":"heading","depth":4,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"List of Criteria","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PdthhbOEH1"}],"identifier":"list-of-criteria","label":"List of Criteria","html_id":"list-of-criteria","implicit":true,"key":"x6gK4WQW50"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"You can use lists in your requests too!","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"M1qW4GKU6y"}],"key":"l2eyEXHyMV"}],"key":"uNWDuH8xy0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import layer measurements\nfrom snowexsql.api import LayerMeasurements\n\n# Grab all the data that used the one of these instruments (hint hint SSA)\nssa_instruments = [\"IS3-SP-15-01US\", \"IRIS\",  \"IS3-SP-11-01F\"]\n\n# Query the DB (throw a limit for safety)\nLayerMeasurements.from_filter(instrument=ssa_instruments, limit=100)","key":"gy0HYiiFHe"},{"type":"outputs","id":"aYCjlpEacgBB3rZTWGr9B","children":[],"key":"D9ylS5bAYB"}],"key":"uSu22danCJ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Greater than or Less than","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n5YfjbjN55"}],"identifier":"greater-than-or-less-than","label":"Greater than or Less than","html_id":"greater-than-or-less-than","implicit":true,"key":"qv3n2Fmdhr"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Sometimes we want to isolate certain ranges of value or even dates. The ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"W41CrChq4U"},{"type":"inlineCode","value":"greater_equal","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hy82X2IZzg"},{"type":"text","value":" and ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ZDQjDSLyfk"},{"type":"inlineCode","value":"less_equal","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CVlIvM6u4B"},{"type":"text","value":" terms can be added on to ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"LEZoQbwswf"},{"type":"inlineCode","value":"value","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fUKJdijSXf"},{"type":"text","value":" or ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yPUL1XFBTO"},{"type":"inlineCode","value":"dates","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"V8H20Bn0CT"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CcydcNxTPQ"}],"key":"C5PXpoactm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"date_greater_equal","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DawGnZZmVD"}],"key":"iX06X6sR7L"}],"key":"FNRjjRZgBU"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"date_less_equal","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qqRnvFy0Hi"}],"key":"zJSdNQU0vs"}],"key":"DWAtIAzxrh"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"value_greater_equal","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yQ3LYYYUdn"}],"key":"sfz0Fkpn4q"}],"key":"c3FdO43IFR"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"value_less_equal","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NfKSU46vVD"}],"key":"GCcl2e9DNJ"}],"key":"EqyZMt1nf2"}],"key":"yI6EmNd5MA"}],"key":"nvOl9Zdyyf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Import the point measurements class\nfrom snowexsql.api import PointMeasurements\n\n# Filter values > 100 cm from the pulse ecko GPR\ndf = PointMeasurements.from_filter(value_greater_equal=100, type='depth', instrument='pulse EKKO Pro multi-polarization 1 GHz GPR', limit=100)\n\n# Show off the dataframe\ndf","key":"sHBUaZmc4p"},{"type":"outputs","id":"-EYutV-cSDQLf-xvU38bl","children":[],"key":"h6w4X4NR02"}],"key":"BWSmAJ6iVD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise: Visualize a Manual Depth Spiral","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k9FxxX0fXh"}],"identifier":"exercise-visualize-a-manual-depth-spiral","label":"Exercise: Visualize a Manual Depth Spiral","html_id":"exercise-visualize-a-manual-depth-spiral","implicit":true,"key":"y4tQ5Kse6X"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"During the SnowEx campaigns a TON of manual snow depths were collected, past surveys for hackweek showed an overhelming interest in the manual\nsnow depths dataset. This tutorial shows how easy it is to get at that data in the database while learning how to build queries","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i31WYD6zEV"}],"key":"gz5omzm7FR"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Goal","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zwwen6BkSo"}],"key":"JkjgUKGByc"},{"type":"text","value":": Visualize a small subset of snow depth, ideally a full spiral (mostly cause they are cool!)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"B42kfYK28B"}],"key":"lmGZaZTL5p"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Approach","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Bn4H1gKwRE"}],"key":"xcMtIrBIyr"},{"type":"text","value":":","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"lASMRsI7Qh"}],"key":"ASSJQ2tM7w"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Determine the necessary details for isolating manual depths","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"OLAcKNw6vb"}],"key":"ikOMZvqNJP"}],"key":"QTEqEkPiZc"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Find a pit where many spirals were done.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"TVpPSYSruC"}],"key":"vrzdZaRkx4"}],"key":"kQ0EJcy1aE"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Buffer on the pit location and grab all manual snow depths","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"sLY5ft22Hs"}],"key":"ZbaYX1JaKu"}],"key":"pke3vj391K"}],"key":"x7kLVaqzGt"}],"key":"XBPz3cJvCb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from snowexsql.api import LayerMeasurements\ndata_type = 'depth'","key":"rGhPdNY6aw"},{"type":"outputs","id":"9FznlgdHZtaZF_nylNfe5","children":[],"key":"SDknfhDUgc"}],"key":"xI15FzMyHy"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 1: Find a pit of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"y6IPeGx2Mj"}],"identifier":"step-1-find-a-pit-of-interest","label":"Step 1: Find a pit of interest","html_id":"step-1-find-a-pit-of-interest","implicit":true,"key":"eZtU7hB4aQ"}],"key":"XEzZR8tUdJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Pick the first one we find\nsite_id = LayerMeasurements().all_site_ids[0]\n\n# Query the database, we only need one point to get a site id and its geometry\nsite_df = LayerMeasurements.from_filter(site_id=site_id, limit=1)\n\n# Print it out \nsite_df","key":"T9bPE9krKt"},{"type":"outputs","id":"svtroXgKqkEh9FkcOxu6T","children":[],"key":"qcVQOUEelv"}],"key":"VSLU8PmMoK"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2: Collect Snow Depths","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oYxjtR5I1k"}],"identifier":"step-2-collect-snow-depths","label":"Step 2: Collect Snow Depths","html_id":"step-2-collect-snow-depths","implicit":true,"key":"CQkysdpPxd"}],"key":"OYhjpIVuT9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# We import the points measurements because snow depths is a single value at single location and date\nfrom snowexsql.api import PointMeasurements \n\n# Filter the results to within 100m within the point from our pit\ndf = PointMeasurements.from_area(pt=site_df.geometry[0], type=data_type, buffer=200)\ndf","key":"cfn0dZqQqJ"},{"type":"outputs","id":"RgWicQNFTdTNL40gX80j_","children":[],"key":"wca6dziF0I"}],"key":"Q5XtUixk6s"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: Plot it!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"y355X3D8m3"}],"identifier":"step-3-plot-it","label":"Step 3: Plot it!","html_id":"step-3-plot-it","implicit":true,"key":"my851U9K7w"}],"key":"E9YvWerLLi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get the Matplotlib Axes object from the dataframe object, color the points by snow depth value\nax = df.plot(column='value', legend=True, cmap='PuBu')\nsite_df.plot(ax=ax, marker='^', color='m')\n\n# Use non-scientific notation for x and y ticks\nax.ticklabel_format(style='plain', useOffset=False)\n\n# Set the various plots x/y labels and title.\nax.set_title(f'{len(df.index)} Manual Snow depths collected at {site_id}')\nax.set_xlabel('Easting [m]')\nax.set_ylabel('Northing [m]')","key":"GU5mRgCdze"},{"type":"outputs","id":"UBHdHpMymGS0WWZJMkG5_","children":[],"key":"HiqOKJNENi"}],"key":"AK09cMazM2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Additional Resources","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"z5l7rJOa9Y"}],"identifier":"additional-resources","label":"Additional Resources","html_id":"additional-resources","implicit":true,"key":"Vd74qTxUi5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"snowexsql","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pi8QuVACED"}],"urlSource":"https://github.com/SnowEx/snowexsql/","error":true,"key":"iwBfiSBQ0H"},{"type":"text","value":" has a host of resources for you to  help your self. First when you are looking for something be sure to check the snowexsql‚Äôs docs.\nThere you will find notes on the database structure. datasets, and of course our new API!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hJ6mME5TyP"}],"key":"qdiCAzSriY"},{"type":"heading","depth":4,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Database Usage/Examples","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"i91iNJm5It"}],"identifier":"database-usage-examples","label":"Database Usage/Examples","html_id":"database-usage-examples","implicit":true,"key":"E9jBzIZc3M"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://github.com/SnowEx/snowexsql/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"snowexsql Code","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ty8AvNoo6R"}],"urlSource":"https://github.com/SnowEx/snowexsql/","error":true,"key":"AdowAqwSMc"}],"key":"Y0DWps98vy"}],"key":"ro3f6YCYB5"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://snowexsql.readthedocs.io/en/latest/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"snowexsql Documentation","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Ahg5ItcyI2"}],"urlSource":"https://snowexsql.readthedocs.io/en/latest/","key":"TFFbnl8oRl"}],"key":"Pks8EIWMbm"}],"key":"k2YsjmMhW1"}],"key":"OCr8iIaVka"},{"type":"heading","depth":4,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Database Building/Notes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"K9VoYdN1eb"}],"identifier":"database-building-notes","label":"Database Building/Notes","html_id":"database-building-notes","implicit":true,"key":"HC15dbcbyM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://github.com/SnowEx/snowex_db/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"snowex_db Code","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"j1Y7gEDO6t"}],"urlSource":"https://github.com/SnowEx/snowex_db/","error":true,"key":"nJJRhrevfq"}],"key":"L0ZMjCtc1z"}],"key":"Gl1z9nlLTt"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://snowex_db.readthedocs.io/en/latest/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"snowex_db Documentation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Csramd7nLz"}],"urlSource":"https://snowex_db.readthedocs.io/en/latest/","key":"l1W9ToAK7W"}],"key":"RrYCL0mzor"}],"key":"ocn6GkNZfJ"}],"key":"iplmP08EKp"}],"key":"QhxHGXjkFB"}],"key":"zf87jToto0"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Field Campaigns Overview","url":"/notebooks/snowex-data-overview","group":"Data Access"},"next":{"title":"GPR and Lidar","url":"/notebooks/gpr-lidar-hackweektutorial","group":"Observations"}}},"domain":"http://localhost:3000"}