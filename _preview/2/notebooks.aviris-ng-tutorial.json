{"version":2,"kind":"Notebook","sha256":"2b0c2ca664644c355c77de305ce55a9c2a47ca24f40bc3cc89391e5f231ccfd4","slug":"notebooks.aviris-ng-tutorial","location":"/notebooks/aviris-ng-tutorial.ipynb","dependencies":[],"frontmatter":{"title":"Introduction to AVIRIS-NG","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"snow-observations-cookbook-test","language":"python"},"authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/SnowEx/snow-observations-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/SnowEx/snow-observations-cookbook/blob/HEAD/notebooks/aviris-ng-tutorial.ipynb","edit_url":"https://github.com/SnowEx/snow-observations-cookbook/edit/HEAD/notebooks/aviris-ng-tutorial.ipynb","thumbnail":"/snow-observations-cookbook/_preview/2/build/Aviris-00fcdd1450d13e09d37cdad4b4007f08.png","exports":[{"format":"ipynb","filename":"aviris-ng-tutorial.ipynb","url":"/snow-observations-cookbook/_preview/2/build/aviris-ng-tutorial-e5968e5ff3b0526a86d54415c9bea4c3.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","style":{"margin":"auto"},"url":"/snow-observations-cookbook/_preview/2/build/Aviris-00fcdd1450d13e09d37cdad4b4007f08.png","alt":"AVIRIS Logo","key":"mBaf76rk5a","urlSource":"images/aviris-ng/Aviris.png"}],"key":"cwyeevJv0e"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"break","key":"XM43hrmb9d"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Contributors:","key":"a2Yijp1JBW"}],"key":"HKoWWAb438"}],"key":"slBURIUOfp"},{"type":"text","value":" Joachim Meyer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QMix7W6Eq8"},{"type":"superscript","children":[{"type":"text","value":"1","key":"x5c5QHHnV5"}],"key":"VjG7PhbE6G"},{"type":"text","value":", Chelsea Ackroyd","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FlOQb7njvP"},{"type":"superscript","children":[{"type":"text","value":"1","key":"I6VpE2j2cl"}],"key":"j34YhdCTgg"},{"type":"text","value":", McKenzie Skiles","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IJBrbHpkjG"},{"type":"superscript","children":[{"type":"text","value":"1","key":"SiiIFSDzpU"}],"key":"oH5GpLONZC"},{"type":"text","value":", Phil Dennison","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZzwmyTbshe"},{"type":"superscript","children":[{"type":"text","value":"1","key":"qvRuJztr4R"}],"key":"lTqbi9dXt1"},{"type":"text","value":", Keely Roth","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kWHGCKIWAV"},{"type":"superscript","children":[{"type":"text","value":"1","key":"Ck8ob16gt6"}],"key":"yTmzdvqWfk"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x2H6mS392T"},{"type":"break","key":"Xp1uQawAxT"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pTlAqfgSAt"},{"type":"superscript","children":[{"type":"text","value":"1","key":"ZgSGh4vQt6"}],"key":"b6wsXjVEuA"},{"type":"text","value":"University of Utah","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"srIWAarse7"}],"key":"MAwEEmsDAA"}],"key":"ZTu8TFSuI6"},{"type":"block","kind":"notebook-content","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gXC5cArlvr"}],"key":"FHt8ezhoD4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Become familiar with hyperspectral data, including data orginiating from AVIRIS-NG","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ITUb6qrFy2"}],"key":"nUF9EjbUYa"}],"key":"XMF8Y0G5EO"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Understand the fundamental methods for displaying and exploring hyperspectral data in Python","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Cxq6tXo36Q"}],"key":"IyXtp20X9g"}],"key":"g7QAQDLuws"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Identify the amount of ice in a given pixel using spectral feature fitting methodology","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Q1sBePOZ3T"}],"key":"TLUdfRGmag"}],"key":"PZ0MwQX8ou"}],"key":"vpVVfRwXhs"}],"key":"J0zotBScGs"}],"key":"bScHALCOol"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Review of Hyperspectral Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uinI0hYy8U"}],"identifier":"review-of-hyperspectral-data","label":"Review of Hyperspectral Data","html_id":"review-of-hyperspectral-data","implicit":true,"key":"GShali9fox"}],"key":"fcYW1ZyvRS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Incoming solar radiation is either reflected, absorbed, or transmitted (or a combination of all three) depending on the surface material. This spectral response allows us to identify varying surface types (e.g. vegetation, snow, water, etc.) in a remote sensing image. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g4uq8WyZjY"},{"type":"strong","children":[{"type":"text","value":"spectral resolution","key":"Fu1JEUgcTB"}],"key":"n4bhTZs9kJ"},{"type":"text","value":", or the wavelength interval, determines the amount of detail recorded in the spectral response: finer spectral resolutions have bands with narrow wavelength intervals, while coarser spectral resolutions have bands with larger wavelength intervals, and therefore, less detail in the spectral response.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jssKPGovNk"}],"key":"ZVTFa4Ii89"}],"key":"HgA2Iol0cB"},{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/snow-observations-cookbook/_preview/2/build/cb6d9e403879117b92affdc39e48de9c.png","alt":"NEON Tutorial","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DDGPDNFjnE","urlSource":"https://raw.githubusercontent.com/NEONScience/NEON-Data-Skills/dev-aten/graphics/hyperspectral-general/spectrumZoomed.png"}],"key":"mgLe7KoaWV"},{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/snow-observations-cookbook/_preview/2/build/67462aed5197a7c44762c23ca839a82e.png","alt":"NEON FWHM","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uLV9gI0jl2","urlSource":"https://raw.githubusercontent.com/NEONScience/NEON-Data-Skills/dev-aten/graphics/hyperspectral-general/FWHM2.png"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://www.neonscience.org/resources/learning-hub/tutorials/hyper-spec-intro","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​www​.neonscience​.org​/resources​/learning​-hub​/tutorials​/hyper​-spec​-intro","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VEBGHDRQ8e"}],"urlSource":"https://www.neonscience.org/resources/learning-hub/tutorials/hyper-spec-intro","key":"ciRWfrAlNS"}],"key":"zxdAxjs9Xy"}],"key":"YqT421vlX3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Multispectral vs. Hyperspectral Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CjKH0806Kq"}],"identifier":"multispectral-vs-hyperspectral-data","label":"Multispectral vs. Hyperspectral Data","html_id":"multispectral-vs-hyperspectral-data","implicit":true,"key":"YlK0iyOsuq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Multispectral instruments have larger spectral resolutions with fewer bands. This level of detail can be limiting in distinguishing between surface types. Hyperspectral instruments, in comparison, typically have hundreds of bands with relatively narrow wavelength intervals. The image below illustrates the difference in spectral responses between a multispectral (Landsat 8 OLI) and a hyperspectral (AVIRIS) sensor.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"siR2GVNusX"}],"key":"ccCOLCb4mE"}],"key":"OuUxOaiNXM"},{"type":"block","kind":"notebook-content","children":[{"type":"image","style":{"margin":"auto"},"url":"/snow-observations-cookbook/_preview/2/build/Hyper_vs_Multispectr-15bae4ab5ce5b8287b08a8c908b1cf8e.png","alt":"AVIRIS Logo","key":"vLubnrlMo9","urlSource":"images/aviris-ng/Hyper_vs_Multispectral.png"}],"key":"XNm3dq3fUn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Computing environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SUf4lQIDHV"}],"identifier":"computing-environment","label":"Computing environment","html_id":"computing-environment","implicit":true,"key":"KFvJx9ImjS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’ll be using the following open source Python libraries in this notebook:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qry6Qp1b3R"}],"key":"iDuGjOuly9"}],"key":"Ts9vC0T03H"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"SnowEx21 Spectral Reflectance Dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n0KvYz4KO3"}],"identifier":"snowex21-spectral-reflectance-dataset","label":"SnowEx21 Spectral Reflectance Dataset","html_id":"snowex21-spectral-reflectance-dataset","implicit":true,"key":"Ex4dsjj3F2"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The data were collected using an airborne imaging spectrometer, AVIRIS-NG can be downloaded from here, ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nz8ouFuICT"},{"type":"link","url":"https://nsidc.org/data/snex21_ssr/versions/1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​nsidc​.org​/data​/snex21​_ssr​/versions/1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"STBmehjI95"}],"urlSource":"https://nsidc.org/data/snex21_ssr/versions/1","key":"ywqIEIXc1g"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aMvBwyMqXT"}],"key":"jtfAbHBEg2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Reflectance is provided at 5 nm spectral resolution with a range of 380-2500 nm","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xiai2Zg3KE"}],"key":"fj8YFuv5oZ"}],"key":"UpUBKaxnwc"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"For this dataset, the pixel resolution is 4 m","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oXvPqOz3Bz"}],"key":"dc4zBpd7Sc"}],"key":"ImL2XMdFKV"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Data span from 19 March 2021 to 29 April 2021, and were collected in two snow-covered environments in Colorado: Senator Beck Basin and Grand Mesa","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"J2afOfsuuD"}],"key":"kpuPN7JEeE"}],"key":"yyK82FgoHE"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Each file will have a “","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NPtwMSLKM8"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":".img","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"SqPvQZTyE2"}],"key":"a4yPEA1oK7"},{"type":"text","value":"” and “","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"OaXLKwXmX1"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":".hdr","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vrFHe1dBfM"}],"key":"Im48NCK3n3"},{"type":"text","value":"”. You need to have both of these in the same directory to open data.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Iie8WnLvTW"}],"key":"b22y9jGLYi"}],"key":"q44eKFldgR"}],"key":"wwUqBsEnpG"},{"type":"paragraph","children":[{"type":"image","url":"/snow-observations-cookbook/_preview/2/build/2f77469a46f5527021926e2a430aabc5.png","key":"Yywhpjijru","urlSource":"https://avirisng.jpl.nasa.gov/img/rmotc_large.png"}],"key":"x73CT6z7rK"}],"key":"YCsad2wDFC"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Accessing AVIRIS-NG Data from S3","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bQinIyNXlX"}],"identifier":"accessing-aviris-ng-data-from-s3","label":"Accessing AVIRIS-NG Data from S3","html_id":"accessing-aviris-ng-data-from-s3","implicit":true,"key":"xQbBc6DQOT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For this tutorial, we’ve hosted the AVIRIS-NG data on AWS S3 for easy access. The data is streamed directly from the cloud, so ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lzszusRWUV"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"no downloads are required","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R2avQN9JOD"}],"key":"ua0cX5nUF3"},{"type":"text","value":"!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rqBlWfCmlU"}],"key":"yNaNZETcWb"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The data is stored in a public S3 bucket in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qQQa4yFIau"},{"type":"inlineCode","value":"us-west-2","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YjGkXUqbtj"},{"type":"text","value":" region:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pFSH83THaE"}],"key":"iIviugWURA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Bucket","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bQE3xyOgQE"}],"key":"DaOk2CtcO0"},{"type":"text","value":": ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aXJmWbX0Op"},{"type":"inlineCode","value":"s3://snowex-tutorials/aviris-ng/","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AdHaYAgY0f"}],"key":"XiA0RkdtHU"}],"key":"MUoyR3F4uY"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Region","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hhfr7oKJJv"}],"key":"AwZZGwLJ79"},{"type":"text","value":": us-west-2 (Oregon)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OldAGuKpsf"}],"key":"pKqhmoQcQ8"}],"key":"xjlgM3zyzh"}],"key":"k7bEs35Nbi"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"We’ll use ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"MkeMmQYjUL"},{"type":"inlineCode","value":"rasterio","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"SslggoDhZT"},{"type":"text","value":" to read ENVI format files directly from S3. This approach:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"SagfjcoWsx"}],"key":"fkePJCr1Dm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Works with the original ENVI format (no conversion needed)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kv3ybMnnbf"}],"key":"EiYkFqrrHy"}],"key":"a59Ho2vxBf"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Streams data on-demand (only reads what you need)","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"eypi5JssWG"}],"key":"mMv1jh7FJx"}],"key":"BKC2F3Ekv8"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Requires no authentication for public buckets","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vDpJtUvIgm"}],"key":"JPuMzKdG1B"}],"key":"eZaEA2DDBn"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Enables cloud-native workflows","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"D5VCjC5YRZ"}],"key":"eQYaVtoIJ4"}],"key":"OkcFFz8cuM"}],"key":"kiu8TltLc7"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"vVzt14gltC"}],"key":"A2AxbY4yS6"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"If you want to use your own local AVIRIS-NG files instead, simply replace the S3 paths with local file paths.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ja6d3eCz5F"}],"key":"p2r0IFvPYk"}],"key":"Nn9q9edGpX"}],"key":"YaKzi2oJ8K"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import rasterio\nfrom rasterio.windows import Window\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os","key":"DavYWVZHt7"},{"type":"output","id":"OYKzLr0SO86tBxQbttYYZ","data":[],"key":"Lsz4lIlcgX"}],"key":"XLnXnHiP6j"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Loading AVIRIS-NG data with rasterio","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZVb6ZHTsho"}],"identifier":"loading-aviris-ng-data-with-rasterio","label":"Loading AVIRIS-NG data with rasterio","html_id":"loading-aviris-ng-data-with-rasterio","implicit":true,"key":"OexDgfbQxi"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’ll use ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"l7X99TMi25"},{"type":"inlineCode","value":"rasterio","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HUpFKGHcMl"},{"type":"text","value":" to open and read the AVIRIS-NG ENVI files directly from S3.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NQ8oyhHiWk"}],"key":"leUvSvA9s7"}],"key":"aAUALzkNZp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# S3 paths for AVIRIS-NG data (public bucket, no auth required)\ns3_bucket = \"snowex-tutorials\"\ns3_prefix = \"aviris-ng\"\n# ENVI format requires opening the .img data file (not .hdr)\nreflectance_file = \"SNEX21_SSR_ang20210429t191025_SBB_rfl_v2z1a_subset.img\"\n\nprint(f\"Data source: s3://{s3_bucket}/{s3_prefix}/{reflectance_file}\")\nprint(f\"Region: us-west-2\")\nprint(f\"\\nNote: This data is publicly accessible, no AWS credentials needed!\")","key":"zN0G3iM1tN"},{"type":"output","id":"JI6_nnP0mfIqRskew6kVP","data":[{"output_type":"stream","name":"stdout","text":"Data source: s3://snowex-tutorials/aviris-ng/SNEX21_SSR_ang20210429t191025_SBB_rfl_v2z1a_subset.img\nRegion: us-west-2\n\nNote: This data is publicly accessible, no AWS credentials needed!\n"}],"key":"Y4ZPtHMajM"}],"key":"pNXGCsBQRB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Configure rasterio to access S3 with anonymous (no-auth) access\nos.environ['AWS_NO_SIGN_REQUEST'] = 'YES'\nos.environ['AWS_REGION'] = 'us-west-2'\n\n# For ENVI files on S3, we need to use GDAL's virtual file system\nvsi_path = f\"/vsis3/{s3_bucket}/{s3_prefix}/{reflectance_file}\"\n\n# Open the AVIRIS-NG ENVI subset file from S3\nwith rasterio.Env(AWS_NO_SIGN_REQUEST='YES', AWS_REGION='us-west-2'):\n    with rasterio.open(vsi_path) as src:\n        print(f\"Dataset dimensions: {src.width} x {src.height}\")\n        print(f\"Number of bands: {src.count}\")\n        print(f\"Data type: {src.dtypes[0]}\")\n        print(f\"CRS: {src.crs}\")\n        print(f\"\\nReading reflectance data from S3...\")\n        print(f\"  (Streaming ~21 MB - tutorial subset)\")\n        \n        # Read all data from the subset\n        rfl_array = src.read()\n\nprint(f\"\\nReflectance data shape: {rfl_array.shape}\")\nprint(f\"Shape interpretation: ({rfl_array.shape[0]} bands, {rfl_array.shape[1]} rows, {rfl_array.shape[2]} columns)\")\nprint(f\"\\nData successfully loaded from S3!\")","key":"NYYuxXhDrq"},{"type":"output","id":"1TFFvgFOOG_bFspL2i4sn","data":[{"output_type":"stream","name":"stdout","text":"Dataset dimensions: 250 x 250\nNumber of bands: 85\nData type: float32\nCRS: EPSG:32613\n\nReading reflectance data from S3...\n  (Streaming ~21 MB - tutorial subset)\n"},{"output_type":"stream","name":"stdout","text":"\nReflectance data shape: (85, 250, 250)\nShape interpretation: (85 bands, 250 rows, 250 columns)\n\nData successfully loaded from S3!\n"}],"key":"BChkrghjlg"}],"key":"cDNKPo513w"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Extract wavelength information from the ENVI header metadata\nvsi_path = f\"/vsis3/{s3_bucket}/{s3_prefix}/{reflectance_file}\"\n\nwith rasterio.Env(AWS_NO_SIGN_REQUEST='YES', AWS_REGION='us-west-2'):\n    with rasterio.open(vsi_path) as src:\n        # Get wavelength metadata from ENVI header\n        metadata = src.tags()\n        \n        # ENVI headers store wavelengths as a comma-separated string\n        if 'wavelength' in metadata:\n            wavelength_str = metadata['wavelength'].strip('{}')\n            bands = np.array([float(w.strip()) for w in wavelength_str.split(',')])\n            print(f\"Extracted {len(bands)} wavelength values\")\n            print(f\"Wavelength range: {bands.min():.1f} - {bands.max():.1f} nm\")\n            print(f\"\\nFirst 10 wavelengths (nm): {bands[:10]}\")\n        else:\n            print(\"Warning: Wavelength metadata not found in ENVI header\")\n            # Create default band indices if wavelengths aren't available\n            bands = np.arange(1, rfl_array.shape[0] + 1)","key":"SqUKuiarcz"},{"type":"output","id":"EriWBj0fp8pbXF4HjpM-L","data":[{"output_type":"stream","name":"stdout","text":"Warning: Wavelength metadata not found in ENVI header\n"}],"key":"LQOGBOPAwW"}],"key":"u4rDLoG5Wm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Visualize a single pixel's spectral signature\n# Note: rasterio uses (bands, rows, cols) indexing, different from (rows, cols, bands)\ni = 125  # row index (middle of subset)\nj = 125  # column index (middle of subset)\n\n# Extract pixel spectrum across all bands\npixel = rfl_array[:, i, j]\n\nfig, ax = plt.subplots(1, 1, figsize=(10,5))\nplt.rcParams.update({'font.size': 18})\nax.scatter(bands, pixel, color='blue', s=20)\nax.set_xlabel('Wavelength [nm]')\nax.set_ylabel('Reflectance')\nax.set_title(f'Spectral signature at pixel ({i}, {j})')\nax.grid(True, alpha=0.3)\nplt.show()","key":"czQt0Oxrno"},{"type":"output","id":"Aae0YoJIrTANpsX1TgIPZ","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1000x500 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"8334fd17e6243a3a81d3c6152edbe0e8","path":"/snow-observations-cookbook/_preview/2/build/8334fd17e6243a3a81d3c6152edbe0e8.png"}}}],"key":"rVyr9QFR5g"}],"key":"eJEqZxSWPA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Working with Terrain Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UMVQduYTdg"}],"identifier":"working-with-terrain-data","label":"Working with Terrain Data","html_id":"working-with-terrain-data","implicit":true,"key":"htBt1f3wL5"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"pgiTiCtJd4"}],"key":"PQ13h0MA1B"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Terrain and illumination data (*obs_ort files) for this flightline are not yet available in the S3 bucket. Once uploaded, they can be accessed the same way as the reflectance data shown above.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"CegLexjJTT"}],"key":"PYX8jn7p1t"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"To obtain terrain data:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VE6dXFYUZF"}],"key":"FIHckfNTjx"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Visit ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"nHoRu0fHIA"},{"type":"link","url":"https://search.earthdata.nasa.gov/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"https://​search​.earthdata​.nasa​.gov/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vVyeIYC182"}],"urlSource":"https://search.earthdata.nasa.gov/","key":"XBKAWzwYGO"}],"key":"sAlIhfP9DT"}],"key":"SmV5XTp4uY"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Search for “AVIRIS-NG L1B Calibrated Radiance, Facility Instrument Collection, V1”","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ulEFkulC7W"}],"key":"qYi46kTvsW"}],"key":"hVNqjgX5rF"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Look for granules matching timestamp ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"b9LZwxWz45"},{"type":"inlineCode","value":"ang20210429t191025","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CDvQWjPheG"},{"type":"text","value":" with ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"xzeMYcct2m"},{"type":"inlineCode","value":"*obs_ort*","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"fyYT87qnjL"},{"type":"text","value":" in the filename","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"g14L9T5joC"}],"key":"CIdysxG98T"}],"key":"kljKJMtNlr"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The obs_ort files contain 11 bands with terrain and illumination information","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"JOUyo5dgeJ"}],"key":"nemdDniBhA"}],"key":"US6KtydZFZ"}],"key":"f8442mYg5G"}],"key":"TFTBAf1GJm"},{"type":"heading","depth":3,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Terrain bands (when available):","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"A34vDys6mh"}],"identifier":"terrain-bands-when-available","label":"Terrain bands (when available):","html_id":"terrain-bands-when-available","implicit":true,"key":"eQBIxyVjnj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 1: Path length (m)","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Uu5lZaIDA1"}],"key":"G70FuHjfBG"}],"key":"nh5G9EqtXE"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 2: To sensor azimuth","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"QChhBATjzK"}],"key":"G7HZdLU6hc"}],"key":"NGowAAr1qX"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 3: To sensor zenith","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"x3BaWlMP5O"}],"key":"KreRQr7x2u"}],"key":"fvGAfLsoSi"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 4: To sun azimuth","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"tPP2q5EadY"}],"key":"qhOcxXy9Ha"}],"key":"WTkTswpL2k"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 5: To sun zenith","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Svqhzvzrmd"}],"key":"ztiZiEJ8Q0"}],"key":"yF7WcBiDqx"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 6: Solar phase","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"DG6jmCY2kt"}],"key":"wYqMqoSVXX"}],"key":"f0UTeOwMaU"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 7: Slope","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"XiAlavU3DD"}],"key":"gjH6ojWFtl"}],"key":"LBF0cTt5bN"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 8: Aspect","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"M2EiRyOo06"}],"key":"CFvvlYIEcO"}],"key":"VoNcAiX53v"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 9: cosine(i) (local solar illumination angle)","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"ZQGR3L6azz"}],"key":"oj2Rwl7aW8"}],"key":"xLQdH7mxiS"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 10: UTC Time","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"QDVZjTEnXA"}],"key":"f6PbboYZ5B"}],"key":"GIBgv3VlTW"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Band 11: Earth-sun distance (AU)","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"OTfUZXHX18"}],"key":"p0fuJQ0n2b"}],"key":"z1scPVrPUn"}],"key":"DCOTtVpHbJ"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Important note:","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"yVVWbZAh5C"}],"key":"ykHCC7htWt"},{"type":"text","value":" Aspect follows convention from ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"J63kQs0l2b"},{"type":"inlineMath","value":"-\\pi","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">-\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"EVUb5oEEH2"},{"type":"text","value":" to ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"m20DYUkrUc"},{"type":"inlineMath","value":"\\pi","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"fwvxpRqgtK"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"UhT40z68fj"}],"key":"M20ynkHCQp"}],"key":"BiJG0nTb3L"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note this tutorial is incomplete. Additional content to be added from here: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qVuNn2sTxR"},{"type":"link","url":"https://snowex-2022.hackweek.io/tutorials/aviris-ng/AVIRIS-NG_Tutorial.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​snowex​-2022​.hackweek​.io​/tutorials​/aviris​-ng​/AVIRIS​-NG​_Tutorial​.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jWFShy2jbV"}],"urlSource":"https://snowex-2022.hackweek.io/tutorials/aviris-ng/AVIRIS-NG_Tutorial.html","key":"lKfYAr8Nqu"}],"key":"ts1r6n1u8K"}],"key":"IupRu0jVmh"}],"key":"gQiEacDkId"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Microstructure","url":"/notebooks/microstructure-tutorial","group":"Observations"},"next":{"title":"Terrestrial Laser Scanning","url":"/notebooks/tls-data-access","group":"Observations"}}},"domain":"http://localhost:3000"}