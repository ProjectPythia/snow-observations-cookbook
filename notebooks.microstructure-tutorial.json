{"version":3,"kind":"Notebook","sha256":"baacf6cc44c74ff624a500e2f4fe55f7250c7e0332188770d76736d47e21a6fb","slug":"notebooks.microstructure-tutorial","location":"/notebooks/microstructure-tutorial.ipynb","dependencies":[],"frontmatter":{"title":"Microstructure","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"snow-observations-cookbook-test","language":"python"},"authors":[{"nameParsed":{"literal":"The NASA Snow Observations Community","given":"The NASA Snow Observations","family":"Community"},"name":"The NASA Snow Observations Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/SnowEx/snow-observations-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/SnowEx/snow-observations-cookbook/blob/main/notebooks/microstructure-tutorial.ipynb","edit_url":"https://github.com/SnowEx/snow-observations-cookbook/edit/main/notebooks/microstructure-tutorial.ipynb","thumbnail":"/snow-observations-cookbook/build/dozier2009_fig2-d95fa1f69a28fe8c132dcf5bc65bfc7d.jpg","exports":[{"format":"ipynb","filename":"microstructure-tutorial.ipynb","url":"/snow-observations-cookbook/build/microstructure-tutor-10a9f67de8a20fccd1bdfddf191a82e9.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"by Mike Durand, School of Earth Sciences and Byrd Polar & Climate Research Center ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WdIiX8R4NB"},{"type":"link","url":"mailto:durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MXFhcHK7vF"}],"urlSource":"mailto:durand.8@osu.edu","key":"s4TQpYyKco"}],"key":"yccT2zXT8G"},{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"B3a7DquWWB"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"LT0uQLbmk8"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"At the end of this tutorial you should be able to...","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"N84RTCij7w"}],"key":"egdqw8YGku"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Explain why microstructure is important for remote sensing","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AuO9hQroVY"}],"key":"QhvLkmM3zq"}],"key":"wOs3qtURI5"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Define measures of microstructure, especially specific surface area","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"va82CnJJ8J"}],"key":"HNZqOGpXFO"}],"key":"DWNTEVJ9wM"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Access and visualize tree different microstructure measurements from SnowEx Grand Mesa 2020","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"eo9DinuFfM"}],"key":"qwDH64ZIXu"}],"key":"IihzticwJE"}],"key":"zRe88e8DZA"},{"type":"heading","depth":2,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Acknowledgments","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"GGg7QYCYe6"}],"identifier":"acknowledgments","label":"Acknowledgments","html_id":"acknowledgments","implicit":true,"key":"fwRYJx2yCx"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Contributions from: Micah Johnson, Mike Durand, HP Marshall, Tate Meehan, Megan Mason, Scott Henderson. This relies heavily on the snowexsqul database and example scripts created by Micah Johnson.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Fnsf0i0CFf"}],"key":"cCzmt5YUCt"},{"type":"heading","depth":2,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Caveats","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"IPqlrTRKKw"}],"identifier":"caveats","label":"Caveats","html_id":"caveats","implicit":true,"key":"FnzmVKB7n8"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"The integrating sphere and the SMP data are published at NSIDC; you can read the pages there for documentation etc. However the microCT data are not yet published; please contact Lauren Farnsworth (","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"aAGSXyIubP"},{"type":"link","url":"mailto:lauren.b.farnsworth@usace.army.mil","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"lauren‚Äã.b‚Äã.farnsworth@usace‚Äã.army‚Äã.mil","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"dZEMaGenAA"}],"urlSource":"mailto:lauren.b.farnsworth@usace.army.mil","key":"xZER4Ul55U"},{"type":"text","value":") for questions on the CT data.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"mycDoZnD0k"}],"key":"tJlmgECgRs"},{"type":"heading","depth":2,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Fun Facts About Snow Microstructure","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"ilRjBO5RAv"}],"identifier":"fun-facts-about-snow-microstructure","label":"Fun Facts About Snow Microstructure","html_id":"fun-facts-about-snow-microstructure","implicit":true,"key":"jZCBdqGZ3Q"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Snow microstructure plays a super important role in snow physics and snow remote sensing, so a lot of effort went towards measuring it in SnowEx 2020!","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"BkNyFdjfdX"}],"key":"pvvX7Ta19b"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"There are several different quantities that are used to measure snow microstructure, including ‚Äúgrain size‚Äù. Grain size measurements are challenging to make in a repeatable way, and are also challenging to relate to the physical quantities that control remote sensing measurements. In the last ~15 years or so, a lot of effort has gone into more objective ways to measure microstructure.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"oAX2BuamVk"}],"key":"prc6x1XjoV"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Snow microstructure  governs response of remote sensing to snow cover for visible, near-infrared and high-frequency microwave wavelengths. See Figure 1, below, and read ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"Bjoi6A7DsG"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Dozier2009","identifier":"dozier2009","children":[{"type":"text","value":"Dozier ","key":"AkLtLB9iIM"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"CTLszl70ip"}],"key":"gcdRn16E5Y"},{"type":"text","value":", 2009","key":"zKj03JwKuH"}],"enumerator":"1","key":"tIcBDX3ulJ"}],"key":"G4yZCWWfzb"},{"type":"text","value":", for more information.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"pZXPEwduni"}],"key":"Qxl9FYdjJg"},{"type":"image","url":"/snow-observations-cookbook/build/dozier2009_fig2-d95fa1f69a28fe8c132dcf5bc65bfc7d.jpg","width":500,"key":"vt7sD1rdZY","urlSource":"./images/microstructure/dozier2009_fig2.jpg"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Snow microstructure governs visible and near-infrared reflectance. This is figure 2 from","key":"HTrTLPQi5G"},{"type":"div","children":[{"type":"div","children":[],"key":"lYgGQiFC4W"}],"key":"kq4ijm64bh"}],"key":"vsRrBZ6TAZ"}],"key":"lTS9o1BK0C"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Radar measurements such as those made by the Ku-band SWEARR instrument are also very sensitive to snow microstructure.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"ChvaCa0JUM"}],"key":"H12pQrQ14d"},{"type":"image","url":"/snow-observations-cookbook/build/modeled-swe-L-respon-11bce791c4d9e5804aeedc5169a04096.png","width":500,"key":"ASOyNlFr9I","urlSource":"./images/microstructure/modeled-swe-L-response.png"},{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Modeled response of radar backscatter to SWE and single-scatter albedo (which in turn is a function of snow microstructure), based on a simple model suggested by","key":"DfzOuHlkeu"},{"type":"div","children":[{"type":"div","children":[],"key":"V7KdMZv3lO"}],"key":"TTHAkCZoU6"}],"key":"rDEQqtRcuM"}],"key":"q9wgOKxS4P"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Snow microstructure is super important to efforts to launch a Ku-band SAR to measure global snow water equivalent (SWE). An important area of research right now is exploring how to use estimates of microstructure (e.g. from snowpack evolution models) to improve SWE retrievals.","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"JyCVS1OqKN"}],"key":"STqupjqQSo"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Snow microstructure evolves through the season, and varies a lot with depth. Snow microstructure evolution is controlled by other snow properties, such as snow temperature, snow height and snow liquid water content. A really great resource on snow microstructure is Kelly Elder‚Äôs recent talks:","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"zhP0qEGTFx"}],"key":"H3k3izm0O7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://boisestate.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=9a051fe4-db09-4f1d-92db-acd1003cc5cc","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Snow Metamorphism","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"ig26GQrH0u"}],"urlSource":"https://boisestate.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=9a051fe4-db09-4f1d-92db-acd1003cc5cc","key":"M8MIZGkvak"}],"key":"XIYKtJX1XA"}],"key":"daiCVnb7pw"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://boisestate.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=136f7580-c1e2-4c55-ab33-acca003c23d6","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"Snow Grain Identification","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"yqNNSS7Agf"}],"urlSource":"https://boisestate.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=136f7580-c1e2-4c55-ab33-acca003c23d6","key":"Agg7Ov2KbD"}],"key":"FMIqUcU64M"}],"key":"v5B9L34TCt"}],"key":"YyU63HuBTd"}],"key":"rLm2uvnYML"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"SnowEx Microstructure Measurement Background","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mbFmHpyZCa"}],"identifier":"snowex-microstructure-measurement-background","label":"SnowEx Microstructure Measurement Background","html_id":"snowex-microstructure-measurement-background","implicit":true,"key":"m6Kwqa3BFE"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Basic Microstructure Definitions","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cEvakIW0q7"}],"identifier":"basic-microstructure-definitions","label":"Basic Microstructure Definitions","html_id":"basic-microstructure-definitions","implicit":true,"key":"jReoDzcpGe"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Microstructure definitions take a bit of getting used to. It‚Äôs very easy to get confused. Specific surface area (SSA) is one of the most important quantity used to measure snow microstructure, so that‚Äôs the focus here. Note that SSA is not the be-all and end-all, so there‚Äôs a short table describing how to relate SSA to other quantities just below.  A couple of good reads on all of this is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EwvaLRt7H9"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"M√§tzler, 2002","key":"Id4F2usIGo"}],"enumerator":"2","key":"z4LLhWpkl1"}],"key":"VygRtZsMXp"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HKZ2XKappX"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzl2010","identifier":"matzl2010","children":[{"type":"text","value":"Matzl & Schneebeli, 2010","key":"I3OFOyZgr3"}],"enumerator":"3","key":"YQbb6b7Yke"}],"key":"m2CpcAJEqT"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NxcBvRWpdG"}],"key":"b2WFN0fXxu"},{"type":"image","url":"/snow-observations-cookbook/build/lowe_etal_2011_v2-ac1a8469ef836226cfc0599f120fae8e.png","width":500,"key":"OIt9CUCxpr","urlSource":"./images/microstructure/lowe_etal_2011_v2.png"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Coarse and fine snow microstructure revealed by microCT. The microCT snow renderings on the left are Figure 2 from","key":"myHif6kujs"},{"type":"div","children":[{"type":"div","children":[],"key":"Q24tjYMc7r"}],"key":"crgyVZIU4w"},{"type":"text","value":". The colorbars indicate that fine-grained snow (a) has high SSA and low D ","key":"LU3DY8pThJ"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"CSLq26Ht7h"}],"key":"TYWoxJ7eCM"},{"type":"text","value":" , whereas coarse-grained snow (b) has low SSA and high D ","key":"wOsDsEOlnj"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"PvepGw4n3Z"}],"key":"rwgxCa11Ni"},{"type":"text","value":" .","key":"Jx1cvSrKIc"}],"key":"H769ttOxzt"}],"key":"ScYZJ2prrT"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Use Figure 3 above to ground these definitions: SSA is the surface area of the ice-air interface, normalized in some way. Confusingly, SSA is defined in a couple of different ways in the literature: sometimes, surface area within a particular volume of interest (VOI) is normalized by the mass of the ice in the VOI. As defined in this way, SSA has units of length squared per mass, usually expressed as m","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"COPePysEsQ"},{"type":"superscript","children":[{"type":"text","value":"2","key":"sukpbIhijI"}],"key":"Lf6Dv8RYFB"},{"type":"text","value":"/kg. Instead of normalizing by mass, SSA is sometimes defined by normalizing by the volume of the VOI (this is SSA","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KYpWlwdYF6"},{"type":"subscript","children":[{"type":"text","value":"v","key":"o4mJeDNIfF"}],"key":"Ntjh9Oo8Ir"},{"type":"text","value":" in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"VJW10E4BoG"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzl2010","identifier":"matzl2010","children":[{"type":"text","value":"Matzl & Schneebeli, 2010","key":"sLS0Ph2zhu"}],"enumerator":"3","key":"TEqmvio38D"}],"key":"oKvbIo7A1N"},{"type":"text","value":"), and sometimes by normalizing by the volume of the ice in the VOI (this is SSA","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"rjy9yGs8mu"},{"type":"subscript","children":[{"type":"text","value":"i","key":"YovIOeExWL"}],"key":"p6Wh44L7fJ"},{"type":"text","value":" in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"J5PnKWjbz9"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzl2010","identifier":"matzl2010","children":[{"type":"text","value":"Matzl & Schneebeli, 2010","key":"q8bjNlJtMK"}],"enumerator":"3","key":"obfEOH5M3C"}],"key":"Th6JIT3hku"},{"type":"text","value":", and q in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"QzYvNIYNuP"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"M√§tzler, 2002","key":"B4DOq8Shqo"}],"enumerator":"2","key":"aGjGw1Gkcm"}],"key":"jAuag5JYQm"},{"type":"text","value":"). Here let‚Äôs just go with the first definition I mentioned:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ULA7E6TTJe"}],"key":"xjFG4yeeqL"},{"type":"math","value":"SSA = \\frac{\\text{Surface area of ice-air interface}}{\\text{Mass of ice}} \\quad","position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>S</mi><mi>S</mi><mi>A</mi><mo>=</mo><mfrac><mtext>Surface¬†area¬†of¬†ice-air¬†interface</mtext><mtext>Mass¬†of¬†ice</mtext></mfrac><mspace width=\"1em\"/></mrow><annotation encoding=\"application/x-tex\">SSA = \\frac{\\text{Surface area of ice-air interface}}{\\text{Mass of ice}} \\quad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">SS</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">Mass¬†of¬†ice</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">Surface¬†area¬†of¬†ice-air¬†interface</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span></span></span></span></span>","enumerator":"1","key":"fLMpsUeW8v"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"SSA tends to take values between 5 and 150 m","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Wkg37kVIuT"},{"type":"superscript","children":[{"type":"text","value":"2","key":"xQj1GWwPja"}],"key":"shifhwm6vp"},{"type":"text","value":"/kg: fresh, fine-grained snow has high SSA, and coarse snow has low SSA. Because it takes a little while for SSA values to become intuitive, a useful derived metric is the equivalent grain diameter (D","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"KEvECdTT77"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"ZxduFc9xnw"}],"key":"RTntyCTCaj"},{"type":"text","value":"; note that this is identical to D","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"lFsqAH8D0P"},{"type":"subscript","children":[{"type":"text","value":"q","key":"E39KyPkczS"}],"key":"bNg6vYBpb8"},{"type":"text","value":" in ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"OdJ4Zk83OJ"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"M√§tzler, 2002","key":"V8lFGJNLWT"}],"enumerator":"2","key":"X9QqZ0kncx"}],"key":"ggok8zv6km"},{"type":"text","value":"), which by definition is the diameter that a sphere would have if it had a particular value of SSA. This is a one-to-one relationship, so there are no assumptions involved.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"swAZ9GnuXo"}],"key":"hjBJfqlg4M"},{"type":"math","value":"D_{eq} = \\frac{6}{SSA \\rho_i} \\quad","position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>D</mi><mrow><mi>e</mi><mi>q</mi></mrow></msub><mo>=</mo><mfrac><mn>6</mn><mrow><mi>S</mi><mi>S</mi><mi>A</mi><msub><mi>œÅ</mi><mi>i</mi></msub></mrow></mfrac><mspace width=\"1em\"/></mrow><annotation encoding=\"application/x-tex\">D_{eq} = \\frac{6}{SSA \\rho_i} \\quad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2019em;vertical-align:-0.8804em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">SS</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\">œÅ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span></span></span></span></span>","enumerator":"2","key":"T1bkCtRE0R"}],"key":"tjPaO0C6jq"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Relationships of specific surface area to other metrics are given in this list if you‚Äôre curious but otherwise just skip past this bit","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pITbvEtOjS"}],"key":"VRbuGdGqGU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Sometimes people refer to the ‚Äúoptical grain diameter‚Äù, which is the same as D","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dQChTs0AAA"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"GUzTXSBFRu"}],"key":"uqmyhWHgC1"},{"type":"text","value":". The ‚Äúoptical‚Äù refers to ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"T1Akg1ai0Y"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Grenfell1999","identifier":"grenfell1999","children":[{"type":"text","value":"Grenfell & Warren, 1999","key":"jcR4Y2mut9"}],"enumerator":"4","key":"Tx7nKUXwFK"}],"key":"CietnylEF6"},{"type":"text","value":", who showed that any snow with a particular SSA had similar (not identical) radiative transfer properties regardless of particle shape in the visible and near-infrared parts of the spectrum. But note the same is not true in the microwave spectrum.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KvYadCC9a4"}],"key":"yYzegcCPUx"}],"key":"xBupmJGLjf"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Autocorrelation length is usually one of two metrics that summarize the two-point microstructure autocorelation function of the three-dimensional ice-air matrix. Think of the probability that you change media (from ice to air or vice versa) as you move a certain distance within the snow microstructure. The length that defines the likelihood that you‚Äôll change media is (an approximation of the correlation length). SSA is by definition (with almost no assumptions) equal to the slope of the autocorrelation function at the origin. But microwave scattering is controlled by correlations at longer lags. For more check out ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YzhRGqMi3D"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Matzler2002","identifier":"matzler2002","children":[{"type":"text","value":"M√§tzler, 2002","key":"hu0uVJp4CJ"}],"enumerator":"2","key":"Im0ffO3YrV"}],"key":"JAIHY94BD9"},{"type":"text","value":". The lack of closing the loop between SSA and correlation length is a significant issue when we have measurements of SSA and microwaves as we do in SnowEx.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QJEmSGbIDP"}],"key":"U2VqqynNej"}],"key":"wZbdPt7YrB"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Geometric grain size is what we usually measure when we measure with a hand lens. You can try to relate it to SSA or corelation length, but it is not always possible, and will change with different observers.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"MHIHpHJW9p"}],"key":"AhN5EGTnSB"}],"key":"XEDOjd5mPy"}],"key":"AMiWqcniP5"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Time to stop this list but there are many other metrics as well.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hAUGOLJqoh"}],"key":"Jl81aKdbOB"}],"key":"lMt64ID6rO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Microstructure Instruments","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LWmW4lKg5k"}],"identifier":"microstructure-instruments","label":"Microstructure Instruments","html_id":"microstructure-instruments","implicit":true,"key":"he9ycDgyHz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now that we know what we‚Äôre trying to measure (SSA, or correlation length) how do we actually measure? let‚Äôs talk just about three techniques used in SnowEx 2020 Grand Mesa.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IZCY8hdwvU"}],"key":"b90C5LHo9E"},{"type":"image","url":"/snow-observations-cookbook/build/microCT-527320bc88c6532de2a940426fa8cd78.png","width":800,"key":"Wt88U55RtA","urlSource":"./images/microstructure/microCT.png"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Left: Lauren Farnsworth transports microCT samples from field sites back to Grand Mesa Lodge in a cold storage container. Right: the microCT machine in the lab at CRREL.","key":"HuWOVTECeD"}],"key":"AswW0uoZhX"}],"key":"tfMdvNrZod"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Micro-computed tomography (microCT) is the only laboratory-based method used here, and it is the gold standard, although it does still come with caveats. The idea of microCT is to remove a sample of snow from a snow pit face, and either cast it with a compound such as diethyl pthalate that is still a liquid at 0¬∞ C, or preserve the same at a very cold temperature. Then the sample is sent back to the laboratory, and bombared with x-rays, similar to how you get x-rays to see if a bone is broken at the doctor. For much more on microCT, check out ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"A7fRIrfHni"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Heggli2011","identifier":"heggli2011","children":[{"type":"text","value":"HEGGLI ","key":"enMVvbSSsZ"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"PR6yopqfhM"}],"key":"hatAAxEUkN"},{"type":"text","value":", 2011","key":"IyVmjLgech"}],"enumerator":"5","key":"dIFQlDuSy2"}],"key":"PoKTeJgio0"},{"type":"text","value":". microCT can be used to extract a ton of information about snow microstructure, including SSA, correlation length and many others.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"m7TSRdR88J"}],"key":"vsp2cDs6bW"},{"type":"image","url":"/snow-observations-cookbook/build/IntegratingSpheres-fbbc594e46e605f5e6a5ebee33f3f260.png","width":800,"key":"CXpdWWwJtC","urlSource":"./images/microstructure/IntegratingSpheres.png"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Left: Kehan Yang operates an IceCube unit at the Grand Mesa Lodge intercomparison snowpit. Top right: schematic showing the integrating sphere measurement principle, from","key":"G2I9cTiess"},{"type":"div","children":[{"type":"div","children":[],"key":"M7Zl4xqTUl"}],"key":"KUpQVbiowe"},{"type":"text","value":". Bottom right: snow in the IceCube sampling container, from","key":"FoNSb20dYV"},{"type":"div","children":[{"type":"div","children":[],"key":"eWPmJzevIF"}],"key":"CStSYkmZb2"},{"type":"text","value":".","key":"lr4cCplNgM"}],"key":"ZJD8mFD2WU"}],"key":"G9iBCloNUR"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Integrating spheres are field-based and you make the measurements on samples extracted from the snowpit face. The principle of the measurement is based on firing a laser at the snow sample, within a special reflective hollow sphere, where one side is filled by the snow sample, and measuring how much of the laser is reflected at a sensor at a known geometry. For more information, check out ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"WJUFODOl0F"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Gallet2009","identifier":"gallet2009","children":[{"type":"text","value":"Gallet ","key":"evzX8Dj63P"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"rwoL6wdEn8"}],"key":"dEfaru4Oak"},{"type":"text","value":", 2009","key":"F39yHzorUG"}],"enumerator":"6","key":"cudoAJVF0z"}],"key":"C5ua8KSR0a"},{"type":"text","value":".  Most integrating sphere measurements are either made by a commercial firm (A2 Photonics) known as the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"m9eNT39iYI"},{"type":"link","url":"https://a2photonicsensors.com/icecube-ssa/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"IceCube","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Q121zjXSgl"}],"urlSource":"https://a2photonicsensors.com/icecube-ssa/","key":"vkH0P75u6y"},{"type":"text","value":" or a version constructed at the University of Sherbrooke known as the IRIS ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"vuxGVD1Rzr"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Montpetit2012","identifier":"montpetit2012","children":[{"type":"text","value":"Montpetit ","key":"uPSqZvF2mB"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"EiH3XDJdLu"}],"key":"FElXa5x7er"},{"type":"text","value":", 2012","key":"Qrb66pcjWb"}],"enumerator":"7","key":"sTvgT3BxjE"}],"key":"Tkiq9Hq1Z2"},{"type":"text","value":". These approaches are set up to measure SSA only. There were three of these at Grand Mesa - one of the Sherbrooke IRIS units, and two IceCubes, one from Finnish Meteorological Institute, and one from Ohio State University.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"D3mAUJFMR1"}],"key":"q3nRh5IJRP"},{"type":"image","url":"/snow-observations-cookbook/build/SMP-0ab5beb9bf71bbc9637667021bd60069.png","width":800,"key":"UbR7xbdt1t","urlSource":"./images/microstructure/SMP.png"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Left: Megan Mason operates the SMP. Right: Closeup of the SMP sensor tip.","key":"urSVa0o7N8"}],"key":"ayENhBmwZS"}],"key":"fWPj3gkEaG"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Snow micropenetrometers are also a field-based approach, but they do not require a snowpit, enabling far more observations to be made. Instead, an automated motor pushes a probe vertically downwards into the snowpack. The probe measures the force required to break snow microstructure, yielding a wealth of information. Snow density, specific surface area and correlation length can be retrieved; for background see ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"jv7ajGozfY"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Lowe2012","identifier":"lowe2012","children":[{"type":"text","value":"L√∂we & Herwijnen, 2012","key":"jQxVMmJM4F"}],"enumerator":"8","key":"d7k2w80wK6"}],"key":"WdGRkNoRXj"},{"type":"text","value":" and ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"V2eanHUvNC"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"KfAWy9Ta5i"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"bnJO9CAEUG"}],"key":"jOrL6bpO9q"},{"type":"text","value":", 2015","key":"e781iG9JES"}],"enumerator":"9","key":"Uxw8eIjF7A"}],"key":"j92hCqQh7y"},{"type":"text","value":". The micropen effort at Grand Mesa was led by Boise State University. A key thing to be aware of is that differences in the various SMP instruments mean that the empirical relationship of ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"SvyHMRVwU3"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"Vzfiknwf1b"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"NJMcb5g3Q0"}],"key":"aAw0WuleUE"},{"type":"text","value":", 2015","key":"jI9t6HYw8d"}],"enumerator":"9","key":"Pb8daJozNg"}],"key":"oWL3ou8Z9N"},{"type":"text","value":" will give quite poor results for the particular instrument used in SnowEx, as fully explained in ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"UE7lXo4Sme"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Calonne2020","identifier":"calonne2020","children":[{"type":"text","value":"Calonne ","key":"Gse1dwxYNM"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"rMku9akNPk"}],"key":"JcOtiRzVCH"},{"type":"text","value":", 2020","key":"vhH1JnnkEb"}],"enumerator":"10","key":"hbNiFCAcuW"}],"key":"UNccWcnT9j"},{"type":"text","value":".","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"UICQ5a6CxM"}],"key":"Bd14aKEG79"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"These methods are not the only ways to measure microstructure! There are several others not mentioned here, but not used at Grand Mesa 2020. Ask if interested.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"sVgIq8DAVC"}],"key":"JzXMC2omdN"},{"type":"heading","depth":2,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"SnowEx Microstructure Measurement Data Overview","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"wm51SDcq0F"}],"identifier":"snowex-microstructure-measurement-data-overview","label":"SnowEx Microstructure Measurement Data Overview","html_id":"snowex-microstructure-measurement-data-overview","implicit":true,"key":"ASGDC9UR3B"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Of the three methods described above, microCT is by far the most expensive and most time consuming. Samples have to be transported back to the laboratory and the processing time requires a microCT machine. Thus the fewest CT sapmles are taken.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"XoCue1i3Db"}],"key":"DPKI5sIOuS"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"The integrating spheres require a snowpit to be dug, so we have an intermediate number of them: ~100.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"az2QThZLBO"}],"key":"eFTh33a3e4"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"The micropen measurements are by far the fastest to make, so a cross pattern of SMP measurements was made on orthogonal directions intersecting at the snowpit. There are thousands of SMP profiles from Grand Mesa 2020.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"JT7ckvYIkF"}],"key":"UFWY3FIbgl"}],"key":"z558383cWc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Working with the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jvXJshQCCc"}],"identifier":"working-with-the-data","label":"Working with the data","html_id":"working-with-the-data","implicit":true,"key":"TqOrjlkYht"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We‚Äôre going to do two things! First, we‚Äôll intercompare the three different integrating sphere instruments at four different pits where we had multiple instruments operating. We‚Äôd expect these data to be fairly self-consistent. Second, we‚Äôll compare all three methods (integrating sphere, SMP and microCT) at a single pit where we had all of these measurements present. Here especially with the SMP we would expect to need to intercalibrate the data to match local conditions; so far SSA has only been fit to SMP force measurements in one study, and we should assume we‚Äôll need a local calibration to get a tight fit.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uSz5fPveIa"}],"key":"TFdJ1XUNrT"}],"key":"EtWWoAgMu3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"0. Load needed modules","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yOHjJtOf8z"}],"identifier":"id-0-load-needed-modules","label":"0. Load needed modules","html_id":"id-0-load-needed-modules","implicit":true,"key":"rO11XhuNtW"}],"key":"MpDzrsbNmf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from snowexsql.lambda_client import SnowExLambdaClient\n\n# Modules needed to work with data\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nimport contextily as cx\n\nfrom snowmicropyn import Profile\nfrom snowmicropyn import proksch2015\n\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')","key":"h5ZpFYhagz"},{"type":"outputs","id":"ja85t1KrgI2s7s14Fi0oi","children":[],"key":"YLQ7VDCSRU"}],"key":"dWPkyx8Elh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Initialize client\nclient = SnowExLambdaClient()\n\n# Get all measurement classes dynamically\nclasses = client.get_measurement_classes()\nLayerMeasurements = classes['LayerMeasurements']\n\nprint(\"üîç Testing Lambda connection...\")\nconnection_test = client.test_connection()\nprint(f\"‚úÖ Connected: {connection_test.get('connected', False)}\")\nif connection_test.get('connected'):\n    print(f\"üìä Database: {connection_test.get('version', 'Unknown version')}\")\nelse:\n    print(\"‚ùå Connection failed\")","key":"oomrtIPuQY"},{"type":"outputs","id":"sr6kHABgBphApGwcaKmo7","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"üîç Testing Lambda connection...\n"},"key":"pwZMzxkrfB"},{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"‚úÖ Connected: True\nüìä Database: PostgreSQL 16.10 on x86_64-conda-linux-gnu, compiled by x86_64-conda-linux-gnu-cc (conda-forge gcc 14.3.0-4) 14.3.0, 64-bit\n"},"key":"JGiSedutzS"}],"key":"LG8JwcSy3A"}],"key":"BjXgTN358B"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. Intercompare Integrating Sphere Datasets","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FIHuV8x5E6"}],"identifier":"id-1-intercompare-integrating-sphere-datasets","label":"1. Intercompare Integrating Sphere Datasets","html_id":"id-1-intercompare-integrating-sphere-datasets","implicit":true,"key":"YxrPcPwhNq"}],"key":"KI9ckGs01u"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"There were three integrating spheres. The IRIS unit from University of Sherbrooke was operated by Celine Vargel. The IceCube unit from the Finnish Meteorological Institute was operated by Juha Lemmetyinen. And the IceCube unit from Ohio State was operated by Kehan Yang and Kate Hale. Carefully read the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WfW6ed5Xq8"},{"type":"link","url":"https://nsidc.org/data/SNEX20_SSA/versions/1","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"documentation page","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XDTBkpaGZ6"}],"urlSource":"https://nsidc.org/data/SNEX20_SSA/versions/1","key":"kuNYAaQQBJ"},{"type":"text","value":" at NSIDC if you are interested in the data. If you are using the data for a project, please contact the authors and mention what you‚Äôre doing - they‚Äôll appreciate it! Contact for SSA is Mike Durand (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YVEoqfSQoF"},{"type":"link","url":"mailto:durand.8@osu.edu","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"durand.8@osu.edu","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l0oiIexHUP"}],"urlSource":"mailto:durand.8@osu.edu","key":"CtEt5WWSSO"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ei966jDI9L"}],"key":"Gsk8giJ36y"}],"key":"LduhwjCYtg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"SSA = LayerMeasurements.from_filter(\n    type='specific_surface_area',\n    limit=3000,\n    verbose=True\n)\n\nSSA.head() #check out the results of the query","key":"Dv3Qr4Z9mB"},{"type":"outputs","id":"NHaV2DvfAWrwozbbdSs8x","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"   depth bottom_depth value          site_name site_description  slope_angle  \\\n0   92.0         None  46.5  COGM6N18_20200128             None          0.0   \n1   87.0         None  49.2  COGM6N18_20200128             None          0.0   \n2   82.0         None  39.8  COGM6N18_20200128             None          0.0   \n3   77.0         None  35.2  COGM6N18_20200128             None          0.0   \n4   72.0         None  30.5  COGM6N18_20200128             None          0.0   \n\n   aspect  air_temp  total_depth  \\\n0     NaN       NaN         92.0   \n1     NaN       NaN         92.0   \n2     NaN       NaN         92.0   \n3     NaN       NaN         92.0   \n4     NaN       NaN         92.0   \n\n                            weather_description  ...  \\\n0  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n1  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n2  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n3  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n4  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n\n                        date  \\\n0  2020-01-28T16:13:00+00:00   \n1  2020-01-28T16:13:00+00:00   \n2  2020-01-28T16:13:00+00:00   \n3  2020-01-28T16:13:00+00:00   \n4  2020-01-28T16:13:00+00:00   \n\n                                                geom                   type  \\\n0  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n1  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n2  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n3  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n4  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n\n    units type_derived instrument_name instrument_model  \\\n0  m^2/kg        False   IS3-SP-11-01F             None   \n1  m^2/kg        False   IS3-SP-11-01F             None   \n2  m^2/kg        False   IS3-SP-11-01F             None   \n3  m^2/kg        False   IS3-SP-11-01F             None   \n4  m^2/kg        False   IS3-SP-11-01F             None   \n\n  instrument_specifications                                      geom_wkt  \\\n0                      None  POINT(-108.19103463896819 39.03403816486377)   \n1                      None  POINT(-108.19103463896819 39.03403816486377)   \n2                      None  POINT(-108.19103463896819 39.03403816486377)   \n3                      None  POINT(-108.19103463896819 39.03403816486377)   \n4                      None  POINT(-108.19103463896819 39.03403816486377)   \n\n                      geometry  \n0  POINT (-108.19103 39.03404)  \n1  POINT (-108.19103 39.03404)  \n2  POINT (-108.19103 39.03404)  \n3  POINT (-108.19103 39.03404)  \n4  POINT (-108.19103 39.03404)  \n\n[5 rows x 29 columns]","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>depth</th>\n      <th>bottom_depth</th>\n      <th>value</th>\n      <th>site_name</th>\n      <th>site_description</th>\n      <th>slope_angle</th>\n      <th>aspect</th>\n      <th>air_temp</th>\n      <th>total_depth</th>\n      <th>weather_description</th>\n      <th>...</th>\n      <th>date</th>\n      <th>geom</th>\n      <th>type</th>\n      <th>units</th>\n      <th>type_derived</th>\n      <th>instrument_name</th>\n      <th>instrument_model</th>\n      <th>instrument_specifications</th>\n      <th>geom_wkt</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>92.0</td>\n      <td>None</td>\n      <td>46.5</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>87.0</td>\n      <td>None</td>\n      <td>49.2</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>82.0</td>\n      <td>None</td>\n      <td>39.8</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>77.0</td>\n      <td>None</td>\n      <td>35.2</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>72.0</td>\n      <td>None</td>\n      <td>30.5</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows √ó 29 columns</p>\n</div>","content_type":"text/html"}}},"key":"wN66963TBq"}],"key":"JgcOwrGWG1"}],"key":"JwgCjfHlon"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Since we want to intercompare integrating spheres, we need to isolate only the sites that actually had multiple integrating spheres measuring the same snow.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DXkzAZfcLG"}],"key":"G6ByrR8khX"}],"key":"KJu9RBqtFm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Grab all the sites with equivalent diameter data (set reduces a list to only its unique entries)\nsites = SSA['site_name'].unique()\n\n# Store all site names that have multiple SSA instruments\nmulti_instr_sites = []\ninstruments = []\n\nfor site in sites:\n\n    # Grab all the layers associated to this site\n    site_data = SSA.loc[SSA['site_name'] == site]\n\n    # Do a set on all the instruments used here\n    instruments_used = site_data['instrument_name'].unique()\n\n    if len(instruments_used) > 1:\n        multi_instr_sites.append(site)\n\n# Get a unqique list of SSA instruments that were colocated\ninstruments = SSA['instrument_name'].unique()\n\ninstruments #check out the list of instruments. note that the IceCube values are displayed as serial numbers","key":"d2Ejti7NZD"},{"type":"outputs","id":"LVwMZqO5_Q7HyMe0MrsgN","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"array(['IS3-SP-11-01F', 'IRIS', 'IS3-SP-15-01US'], dtype=object)","content_type":"text/plain"}}},"key":"MGrbTzavL0"}],"key":"evFQWMfvLK"}],"key":"xBUhA12qm7"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finally, plot all Integrating Sphere SSA profiles at all Multi-Integrating Sphere Sites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xE9OLXIYtw"}],"key":"MGHMCWyiKr"}],"key":"yJxOrmVD6C"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Setup the subplot for each site for each instrument\nfig, axes = plt.subplots(1, len(multi_instr_sites), figsize=(4*len(multi_instr_sites), 8))\n\n# Establish plot colors unique to the instrument\nc = ['k', 'm', 'c']\ncolors = {inst:c[i] for i,inst in enumerate(instruments)}\n\n# Loop over all the multi-instrument sites \nfor i, site in enumerate(multi_instr_sites):\n    \n    # Grab the plot for this site\n    ax = axes[i]\n    \n    # Loop over all the instruments at this site\n    for instr in instruments:\n\n        # Grab our profile by site and instrument\n        ind = SSA['site_name'] == site \n        ind2 = SSA['instrument_name'] == instr\n        profile = SSA.loc[ind & ind2].copy()\n\n        # Don't plot it unless there is data\n        if len(profile.index) > 0:\n            \n            # Sort by depth so samples that are take out of order won't mess up the plot\n            profile = profile.sort_values(by='depth')\n            \n            # Layer profiles are always stored as strings. \n            profile['value'] = profile['value'].astype(float)\n            \n            # Plot our profile\n            ax.plot(profile['value'], profile['depth'], colors[instr], label=instr)\n   \n    # Labeling and plot style choices\n    ax.legend()\n    ax.set_xlabel('SSA [m2/kg]')\n    ax.set_ylabel('Height above snow-soil interface [cm]')\n    ax.set_title('Site {}'.format(site.upper()))\n    \n    # Set the x limits to show more detail\n    ax.set_xlim((8, 75))\n    \nplt.tight_layout()\nplt.show()\n","key":"vJaiYbLBvK"},{"type":"outputs","id":"QTQttLdpGQ2RGjuGLbUPq","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1600x800 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"a40e791e8da5b8d0b8a911ef24bf3fe4","path":"/snow-observations-cookbook/build/a40e791e8da5b8d0b8a911ef24bf3fe4.png"}}},"key":"rrV4h9TJLY"}],"key":"a69CA9rJUb"}],"key":"bkfuneCD7k"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Pull the snowmicropenetrometer data and compute SSA","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PY9S6AcqE9"}],"identifier":"id-2-pull-the-snowmicropenetrometer-data-and-compute-ssa","label":"2. Pull the snowmicropenetrometer data and compute SSA","html_id":"id-2-pull-the-snowmicropenetrometer-data-and-compute-ssa","implicit":true,"key":"jNEhNQi4bR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The next step is to grab some SMP data to compare to. We‚Äôre going to get the SMP at site 2N13, where we have a copule of SSA profiles from integrating spheres (as well as microCT data, to be looked at in the next step!).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vHIU1ayNMQ"}],"key":"w2AmZ52pkD"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The SMP measurements for SnowEx 2020 GrandMesa were all made by Megan Mason. If you‚Äôre interested in working with the SMP data, please carefully read the NSIDC ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bRi0QYQEYf"},{"type":"link","url":"https://nsidc.org/data/SNEX20_SMP/versions/1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"documentation page","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QzxncW7cz8"}],"urlSource":"https://nsidc.org/data/SNEX20_SMP/versions/1","key":"IeJehTjSlm"},{"type":"text","value":". If you‚Äôre planning to work with the data, please reach out to the author; the contact is (Megan Mason ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pzoLoGCIeM"},{"type":"link","url":"mailto:megan.a.mason@nasa.gov","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"megan‚Äã.a‚Äã.mason@nasa‚Äã.gov","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"p10cgeJ2Jh"}],"urlSource":"mailto:megan.a.mason@nasa.gov","key":"yvfgcFdeJe"},{"type":"text","value":").","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jBRzp0iSTi"}],"key":"DPP2VwOlYf"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"As mentioned above, ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"oyK0ZeP99U"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Calonne2020","identifier":"calonne2020","children":[{"type":"text","value":"Calonne ","key":"PHXwgMm99C"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"YcrGTn4EIl"}],"key":"YKl5ER0Zx1"},{"type":"text","value":", 2020","key":"fasiMImqsq"}],"enumerator":"10","key":"Tnfr4Ob5hA"}],"key":"OcBmpBvoVT"},{"type":"text","value":" tested applying the relationship of ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"yVSxwoQ0dS"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"Uz6UareqJM"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"FqY0OrbA4J"}],"key":"wH89tHXEfX"},{"type":"text","value":", 2015","key":"UcFyQZFkPN"}],"enumerator":"9","key":"LbiiZQJ4a0"}],"key":"Eaabin1PgC"},{"type":"text","value":" and got quite poor results, explained them by the difference in hardware between generations of SMP instruments. We were unaware of that when designing the tutorial, and so set up use of the so-called official SMP processing repository, linked below, which has not yet been updated with the latest relationship. This would make a great project, as mentioned later!","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"yYSRhmmiGX"}],"key":"ujwI1WU2Tf"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"First up, we‚Äôll visualize the location of the SMP profiles, along with the snowpit location. All the data we will be working with is associated with the site label ‚Äò2N13‚Äô. We‚Äôll begin by querying all site names in the database and look for that string. We‚Äôll use the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ORDZuuLV3c"},{"type":"inlineCode","value":"get_sites","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HCgnyaUHVT"},{"type":"text","value":" method in the SnowEx API that provides basic information on the name and location of all layer measurement sites.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"P3hHFpNQ8x"}],"key":"bo7L5aeBnk"}],"key":"PiRYfea9bX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get all sites containing '2N13'\nsites_with_2N13 = [site for site in LayerMeasurements.all_sites if '2N13' in site]\nprint(f\"Found {len(sites_with_2N13)} sites containing '2N13':\")\nsiteLocations = LayerMeasurements.get_sites(site_names=sites_with_2N13)\nsiteLocations","key":"AbnUX5uP8n"},{"type":"outputs","id":"PC9q5Ad93pyukjwXV_n2R","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Found 16 sites containing '2N13':\n"},"key":"B9OxmlxEcq"},{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"                 name                                               geom  \\\n0          2N13-M1167  0101000020e6100000000000c0900c5bc0000000204a84...   \n1          2N13-M1172  0101000020e6100000000000008f0c5bc0000000405a84...   \n2          2N13-M1173  0101000020e6100000000000008f0c5bc0000000405a84...   \n3          2N13-M1174  0101000020e6100000000000408f0c5bc0000000c05884...   \n4          2N13-M1175  0101000020e6100000000000c08f0c5bc0000000c05984...   \n5          2N13-M1176  0101000020e610000000000020920c5bc0000000405884...   \n6          2N13-M1177  0101000020e6100000000000e0930c5bc0000000c05984...   \n7          2N13-M1178  0101000020e6100000000000c0950c5bc0000000205a84...   \n8          2N13-M1179  0101000020e6100000000000008c0c5bc0000000005884...   \n9          2N13-M1180  0101000020e6100000000000208b0c5bc0000000805584...   \n10         2N13-M1181  0101000020e610000000000040880c5bc0000000c05584...   \n11         2N13-M1182  0101000020e6100000000000c0840c5bc0000000605584...   \n12         2N13-M1185  0101000020e6100000000000608d0c5bc0000000c05d84...   \n13         2N13-M1186  0101000020e6100000000000408d0c5bc0000000005e84...   \n14         2N13-M1187  0101000020e6100000000000408d0c5bc0000000c05e84...   \n15  COGM2N13_20200206  0101000020e6100000271436808f0c5bc0d39554fd5884...   \n\n   description                   datetime                     geometry  \n0         None  2020-02-06T16:14:44+00:00  POINT (-108.19633 39.03351)  \n1         None  2020-02-06T16:47:43+00:00    POINT (-108.19623 39.034)  \n2         None  2020-02-06T16:50:16+00:00    POINT (-108.19623 39.034)  \n3         None  2020-02-06T16:52:56+00:00  POINT (-108.19624 39.03396)  \n4         None  2020-02-06T16:58:08+00:00  POINT (-108.19627 39.03399)  \n5         None  2020-02-06T17:01:15+00:00  POINT (-108.19642 39.03394)  \n6         None  2020-02-06T17:03:57+00:00  POINT (-108.19653 39.03399)  \n7         None  2020-02-06T17:06:55+00:00    POINT (-108.19664 39.034)  \n8         None  2020-02-06T17:10:40+00:00  POINT (-108.19604 39.03394)  \n9         None  2020-02-06T17:13:32+00:00  POINT (-108.19599 39.03386)  \n10        None  2020-02-06T17:16:06+00:00  POINT (-108.19582 39.03387)  \n11        None  2020-02-06T17:20:21+00:00   POINT (-108.1956 39.03386)  \n12        None  2020-02-06T17:26:42+00:00  POINT (-108.19613 39.03411)  \n13        None  2020-02-06T17:28:45+00:00  POINT (-108.19612 39.03412)  \n14        None  2020-02-06T17:31:21+00:00  POINT (-108.19612 39.03414)  \n15        None  2020-02-06T16:32:00+00:00  POINT (-108.19626 39.03397)  ","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>name</th>\n      <th>geom</th>\n      <th>description</th>\n      <th>datetime</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>2N13-M1167</td>\n      <td>0101000020e6100000000000c0900c5bc0000000204a84...</td>\n      <td>None</td>\n      <td>2020-02-06T16:14:44+00:00</td>\n      <td>POINT (-108.19633 39.03351)</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2N13-M1172</td>\n      <td>0101000020e6100000000000008f0c5bc0000000405a84...</td>\n      <td>None</td>\n      <td>2020-02-06T16:47:43+00:00</td>\n      <td>POINT (-108.19623 39.034)</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2N13-M1173</td>\n      <td>0101000020e6100000000000008f0c5bc0000000405a84...</td>\n      <td>None</td>\n      <td>2020-02-06T16:50:16+00:00</td>\n      <td>POINT (-108.19623 39.034)</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2N13-M1174</td>\n      <td>0101000020e6100000000000408f0c5bc0000000c05884...</td>\n      <td>None</td>\n      <td>2020-02-06T16:52:56+00:00</td>\n      <td>POINT (-108.19624 39.03396)</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2N13-M1175</td>\n      <td>0101000020e6100000000000c08f0c5bc0000000c05984...</td>\n      <td>None</td>\n      <td>2020-02-06T16:58:08+00:00</td>\n      <td>POINT (-108.19627 39.03399)</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>2N13-M1176</td>\n      <td>0101000020e610000000000020920c5bc0000000405884...</td>\n      <td>None</td>\n      <td>2020-02-06T17:01:15+00:00</td>\n      <td>POINT (-108.19642 39.03394)</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>2N13-M1177</td>\n      <td>0101000020e6100000000000e0930c5bc0000000c05984...</td>\n      <td>None</td>\n      <td>2020-02-06T17:03:57+00:00</td>\n      <td>POINT (-108.19653 39.03399)</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>2N13-M1178</td>\n      <td>0101000020e6100000000000c0950c5bc0000000205a84...</td>\n      <td>None</td>\n      <td>2020-02-06T17:06:55+00:00</td>\n      <td>POINT (-108.19664 39.034)</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>2N13-M1179</td>\n      <td>0101000020e6100000000000008c0c5bc0000000005884...</td>\n      <td>None</td>\n      <td>2020-02-06T17:10:40+00:00</td>\n      <td>POINT (-108.19604 39.03394)</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>2N13-M1180</td>\n      <td>0101000020e6100000000000208b0c5bc0000000805584...</td>\n      <td>None</td>\n      <td>2020-02-06T17:13:32+00:00</td>\n      <td>POINT (-108.19599 39.03386)</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>2N13-M1181</td>\n      <td>0101000020e610000000000040880c5bc0000000c05584...</td>\n      <td>None</td>\n      <td>2020-02-06T17:16:06+00:00</td>\n      <td>POINT (-108.19582 39.03387)</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>2N13-M1182</td>\n      <td>0101000020e6100000000000c0840c5bc0000000605584...</td>\n      <td>None</td>\n      <td>2020-02-06T17:20:21+00:00</td>\n      <td>POINT (-108.1956 39.03386)</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>2N13-M1185</td>\n      <td>0101000020e6100000000000608d0c5bc0000000c05d84...</td>\n      <td>None</td>\n      <td>2020-02-06T17:26:42+00:00</td>\n      <td>POINT (-108.19613 39.03411)</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>2N13-M1186</td>\n      <td>0101000020e6100000000000408d0c5bc0000000005e84...</td>\n      <td>None</td>\n      <td>2020-02-06T17:28:45+00:00</td>\n      <td>POINT (-108.19612 39.03412)</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>2N13-M1187</td>\n      <td>0101000020e6100000000000408d0c5bc0000000c05e84...</td>\n      <td>None</td>\n      <td>2020-02-06T17:31:21+00:00</td>\n      <td>POINT (-108.19612 39.03414)</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>COGM2N13_20200206</td>\n      <td>0101000020e6100000271436808f0c5bc0d39554fd5884...</td>\n      <td>None</td>\n      <td>2020-02-06T16:32:00+00:00</td>\n      <td>POINT (-108.19626 39.03397)</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}},"key":"payP1JC6A4"}],"key":"VBYxMykxMA"}],"key":"AzIKW8I8hA"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The site labeled ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SPl2KDzMyD"},{"type":"inlineCode","value":"COGM2N13_20200206","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YXhH3RTg6i"},{"type":"text","value":" refers to the snowpit location, while the remaining 15 sites are SMP observations.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Xq34w5WmUq"}],"key":"Tc5slhD2Ja"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Next we will plot the locations of these observations to assess their spatial proximity:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"n0HfMKSfum"}],"key":"ys9BJhPGJr"}],"key":"tloRxdQuPS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Separate the pit location from SMP locations\npit_location = siteLocations[siteLocations['name'] == 'COGM2N13_20200206']\nsmp_locations = siteLocations[siteLocations['name'] != 'COGM2N13_20200206']\n\n# Convert to Web Mercator for basemap\nsmp_locations_wm = smp_locations.to_crs(epsg=3857)\npit_location_wm = pit_location.to_crs(epsg=3857)\n\n# Create the plot\nfig, ax = plt.subplots(figsize=(10, 10))\nsmp_locations_wm.plot(ax=ax, marker='o', color='orange', markersize=100, edgecolor='black', label='SMP Locations')\npit_location_wm.plot(ax=ax, marker='s', color='black', markersize=150, edgecolor='black', label='Pit Location')\n\n# Add labels for SMP locations\nfor idx, row in smp_locations_wm.iterrows():\n    ax.annotate(row['name'], \n                xy=(row.geometry.x, row.geometry.y),\n                xytext=(5, 5), \n                textcoords='offset points',\n                fontsize=6,\n                bbox=dict(boxstyle='round,pad=0.3', facecolor='white', alpha=0.7, edgecolor='none'))\n\n# Add label for pit location\nfor idx, row in pit_location_wm.iterrows():\n    ax.annotate(row['name'], \n                xy=(row.geometry.x, row.geometry.y),\n                xytext=(5, 5), \n                textcoords='offset points',\n                fontsize=6,\n                bbox=dict(boxstyle='round,pad=0.3', facecolor='white', alpha=0.7, edgecolor='none'))\n\n# Zoom out by adding buffer to axis limits\nxlim = ax.get_xlim()\nylim = ax.get_ylim()\nx_buffer = (xlim[1] - xlim[0]) * 0.5\ny_buffer = (ylim[1] - ylim[0]) * 0.5\nax.set_xlim(xlim[0] - x_buffer, xlim[1] + x_buffer)\nax.set_ylim(ylim[0] - y_buffer, ylim[1] + y_buffer)\n\n# Add basemap - using Esri World Imagery for satellite view with terrain\ncx.add_basemap(ax, source=cx.providers.Esri.WorldImagery, alpha=0.5)\n\n# Avoid using Scientific notation for coords\nax.ticklabel_format(style='plain', useOffset=False)\n\nax.set_xlabel('Easting [m]', fontsize=12)\nax.set_ylabel('Northing [m]', fontsize=12)\nax.set_title('Site Locations', fontsize=14)\nax.legend()\nplt.tight_layout()\nplt.show()","key":"hoHKBIuaKx"},{"type":"outputs","id":"hDVTvfNojUuug-Pz9fYxi","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1000x1000 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"7350b00e2ee6797c4e8636c01175a9a5","path":"/snow-observations-cookbook/build/7350b00e2ee6797c4e8636c01175a9a5.png"}}},"key":"Qi9pW2vV6f"}],"key":"w2ZnZRyecy"}],"key":"RtpBoK8hKM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next up, let‚Äôs find the closest SMP profile to the snowpit, and then find the profile ID of that profile, which is in the comments in the database.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"utRzf83u0s"}],"key":"AjIqSNaCog"}],"key":"Tg1oPk8UOf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Find the closest SMP location to the pit\nfrom shapely.geometry import Point\n\n# Get pit coordinates\npit_coords = pit_location.geometry.values[0]\n\n# Calculate distance from each SMP location to the pit\nsmp_locations['distance_to_pit'] = smp_locations.geometry.apply(lambda x: x.distance(pit_coords))\n\n# Find the closest SMP location\nclosest_smp = smp_locations.loc[smp_locations['distance_to_pit'].idxmin()]\n\nprint(f\"Closest SMP location to pit: {closest_smp['name']}\")\nprint(f\"Distance: {closest_smp['distance_to_pit']:.2f} meters\")","key":"UHGlycmLDr"},{"type":"outputs","id":"5bQAl1fFBffrGlXp9mNxG","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"Closest SMP location to pit: 2N13-M1174\nDistance: 0.00 meters\n"},"key":"B4CAUXYAep"}],"key":"NQ3H0Gt5an"}],"key":"XYshaXcJbk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"So the id of the closest SMP profile is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eA94p0doA5"},{"type":"inlineCode","value":"2N13-M1174","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iq6HKHJWsC"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rQXNV3ECKO"}],"key":"RnHx8b7Yej"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we‚Äôll work on acquiring the associated data. Note that the SMP datasets are quite large and store a suite of observations. The SnowEx database currently stores a subset of the data, the force and depth profiles, but the remaining observations are not yet in the database. So for this exercise we will need to download the raw output from the sensor and do some additional processing.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NFoXLK3xlB"}],"key":"GonGruXYER"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To do this we go to the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WeZB3CM4yB"},{"type":"link","url":"https://nsidc.org/data/SNEX20_SMP/versions/1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"SMP page on NSIDC","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"R4tgJMNuDX"}],"urlSource":"https://nsidc.org/data/SNEX20_SMP/versions/1","key":"TYW0HAHVht"},{"type":"text","value":", choose ‚ÄúDownload‚Äù and searched for the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HzR6hpHxBV"},{"type":"inlineCode","value":"2N13-M1174","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OGVj9DWCRm"},{"type":"text","value":" ID. We‚Äôve downloaded two raw point files, located in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tAgwBxh45T"},{"type":"inlineCode","value":"data\\microstructure\\SMP","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yHlcUbNh0R"},{"type":"text","value":" directory in this repository, just for the sake of this tutorial.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dU8qDwUPrv"}],"key":"MCp7VS6D3N"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Now we have to compute SSA from the SMP data. For this, we‚Äôll use the ‚Äúsnowmicropyn‚Äù modules created by the Swiss SLF. You can read more about them ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SUTswLVQTQ"},{"type":"link","url":"https://snowmicropyn.readthedocs.io/en/latest/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"at this site","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JLc7jXAu9u"}],"urlSource":"https://snowmicropyn.readthedocs.io/en/latest/","key":"ecMMdjEWy4"},{"type":"text","value":". The software is a little out of date on Python versions; just ignore any warnings that pop up below! Also, the use of the  ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ZDdzVS2mfo"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"XgA34mzq0t"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"YKFabDeqaK"}],"key":"w74eQM0iqw"},{"type":"text","value":", 2015","key":"Rtg9swN98y"}],"enumerator":"9","key":"Y4xC5GnhyR"}],"key":"ljZgAkjqa7"},{"type":"text","value":" relationship is also out-of-date, as mentioned above.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uZhRBXQyOW"}],"key":"dF9N0yQYw1"}],"key":"Db7eYc35aa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"p = Profile.load('data/microstructure/SMP/SNEX20_SMP_S19M1174_2N13_20200206.PNT',)\nplt.plot(p.samples.distance, p.samples.force)\n# Prettify our plot a bit\nplt.title(p.name)\nplt.ylabel('Force [N]')\nplt.xlabel('Depth [mm]')\nplt.show()","key":"fYyTKfJpfY"},{"type":"outputs","id":"g3-cL-Zr-jnD-oVZO3vr1","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"c12425e333c3d9e0cf6a136e82148ab0","path":"/snow-observations-cookbook/build/c12425e333c3d9e0cf6a136e82148ab0.png"}}},"key":"urXPwaUw8Q"}],"key":"r8gZlo3h6l"}],"key":"WuM61AZKCq"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above shows the entire SMP profile; this includes the part of the force profile that is above the snow surface, and thus needs to be removed, in order to apply calculations only to the snow (not the air!).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lYYfthIxly"}],"key":"h4sKsXV7zs"}],"key":"ds9IXJOVR7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#extract the part of the profile that is in the snow (i.e. remove air)\ndepth_surf=p.detect_surface()\ndepth_ground=p.detect_ground()\nsamples_snow=p.samples_within_distance(begin=depth_surf, end=depth_ground, relativize=False)\nsamples_snow.distance-=depth_surf\nplt.plot(samples_snow.distance, samples_snow.force)\nplt.title(p.name)\nplt.ylabel('Force [N]')\nplt.xlabel('Depth [mm]')\nplt.show()","key":"yFl5wZHQIT"},{"type":"outputs","id":"AE1hdvTZLInrq_bh7VO3e","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"1c72da4483c513be98e16af7b163667f","path":"/snow-observations-cookbook/build/1c72da4483c513be98e16af7b163667f.png"}}},"key":"S48MJ6yWYR"}],"key":"pA5cYp4UPd"}],"key":"p8RIwFW1aZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above part of the profile is just the part that is in the snow. PLEASE NOTE that the automated functions are not infallible, and need to be used with care. For now, these need to be compared back to the notes and interpreted manually.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kgoQJHai0k"}],"key":"b94UjepRMd"}],"key":"dWcbjE6fNt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The next step is the actual calculation of SSA from the force data. It then displays the data and lets you see that there is now a column called SSA! Note that this function is ‚Äúproksch2015‚Äù. You can read about how it works in Martin Proksch‚Äôs paper ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UeuuWdPQba"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Proksch2015","identifier":"proksch2015","children":[{"type":"text","value":"Proksch ","key":"JWzubJ3CI4"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"E41RjM4F4c"}],"key":"LLIki7tieb"},{"type":"text","value":", 2015","key":"qtaSxLa1kf"}],"enumerator":"9","key":"abTq53JJIT"}],"key":"DrjoVH1Y6k"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cJk7TzCDOf"}],"key":"UbQbHw2fzt"}],"key":"K3RuyqOwwz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# call using the snowmicropyn library proksch2015\np2015 = proksch2015.calc(p.samples) \np2015.head() #check out the first few values of SSA","key":"J65Ea7WUDh"},{"type":"outputs","id":"jGft82m2ZBzcgFJX6L3ON","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"   distance  P2015_density  P2015_ssa\n0      0.00     147.401901  38.680453\n1      1.25     142.636652  43.154993\n2      2.50     127.721686  62.495789\n3      3.75     127.346289  63.284400\n4      5.00     129.146377  63.453641","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>distance</th>\n      <th>P2015_density</th>\n      <th>P2015_ssa</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.00</td>\n      <td>147.401901</td>\n      <td>38.680453</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.25</td>\n      <td>142.636652</td>\n      <td>43.154993</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2.50</td>\n      <td>127.721686</td>\n      <td>62.495789</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3.75</td>\n      <td>127.346289</td>\n      <td>63.284400</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>5.00</td>\n      <td>129.146377</td>\n      <td>63.453641</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}},"key":"PvuanWxdzv"}],"key":"khqZ6uOBQi"}],"key":"M01tIV4rxA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Read microCT data, and compare integrating sphere, SMP and CT data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B5tP3p0qlg"}],"identifier":"id-3-read-microct-data-and-compare-integrating-sphere-smp-and-ct-data","label":"3. Read microCT data, and compare integrating sphere, SMP and CT data","html_id":"id-3-read-microct-data-and-compare-integrating-sphere-smp-and-ct-data","implicit":true,"key":"l6nK01ydqk"}],"key":"pjK9AYRNhi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The microCT samples were extracted in the field and processed at CRREL by Lauren Farnsworth, and is not yet published at NSIDC. Please contact her with questions (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CKGGRUvXlu"},{"type":"link","url":"mailto:lauren.b.farnsworth@usace.army.mil","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"lauren‚Äã.b‚Äã.farnsworth@usace‚Äã.army‚Äã.mil","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VG7AyYqYL3"}],"urlSource":"mailto:lauren.b.farnsworth@usace.army.mil","key":"UqXquskzdL"},{"type":"text","value":")!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U2wSatLfcV"}],"key":"eEmyqK8zYh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This module reads in microCT datafiles which are stored as text. Some additional data are available, showing the computer generated slices through the ice-air interface: contact Mike (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TZ2Y8nxKPl"},{"type":"link","url":"mailto:durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"durand.8@osu.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Eb3xvtAmQG"}],"urlSource":"mailto:durand.8@osu.edu","key":"vUJuJJY6py"},{"type":"text","value":") if you want to look at a subset of these data that Lauren has shared.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WvE4oAKVwn"}],"key":"y69aoh3UHM"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Equivalent grain size is a useful quantity to compare: because it‚Äôs proportional to 1/SSA, and because after a point as you increase SSA more and more, all fine-grained snow acts more-or-less the same (converging to e.g. the ‚Äúfine-grained‚Äù curve in Figure 1, above), we‚Äôll look at equivalent diameter instead of SSA in this comparison.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hEbiCNa8Vw"}],"key":"E4Scn76vAv"}],"key":"yd22jb9Ngc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# function to read all microCT data in\n#    by Mike Durand June 2021\n\ndef read_CT_txt_files(DataDir):\n        \n    filenames = (f for f in os.scandir(DataDir) if not f.name.startswith('.'))\n    n=len(list(filenames)) #to preallocate S    \n    \n    SSA=np.empty([n])\n    height_min=np.empty([n])\n    height_max=np.empty([n])\n\n    filenames = (f for f in os.scandir(DataDir) if not f.name.startswith('.'))\n    \n    count=0\n    \n    for entry in filenames:\n\n        fname=DataDir + entry.name                \n        \n        #parse depth range\n        split_name=fname.split('_')\n        height_range=split_name[1]\n        height_min_max=height_range[0:-2].split('-')            \n        height_max[count]=float(height_min_max[0])\n        height_min[count]=float(height_min_max[1])                   \n                        \n        with open(fname,\"r\",encoding='iso-8859-1') as datafile:            \n            for line in datafile:                \n                if 'Object surface / volume ratio' in line:                \n                    split_line=line.split(',')                                        \n                    SSA[count]=float(split_line[2])\n                    count+=1                    \n\n    #convert from 1/mm to m^2/kg \n    SSA*=1000./917. \n    \n    # sort data\n    isort=np.argsort(height_min)\n    height_min=height_min[isort]\n    height_max=height_max[isort]\n    SSA=SSA[isort]\n \n    return SSA,height_min,height_max","key":"iEmq4Y1b4o"},{"type":"outputs","id":"G_9MF7ILOy1jbP006YIon","children":[],"key":"W2juGgj6Xe"}],"key":"HlOZbsIrQD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read micro CT data for 2N13","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jrnvvpZNAa"}],"identifier":"read-micro-ct-data-for-2n13","label":"Read micro CT data for 2N13","html_id":"read-micro-ct-data-for-2n13","implicit":true,"key":"SPAy4iZsQ2"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The full dataset of micro CT data can be found at ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ENM7eFJxaW"},{"type":"link","url":"https://doi.org/10.5281/zenodo.5504396/files/microstructure.zip","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://‚Äãzenodo‚Äã.org‚Äã/record‚Äã/5504396‚Äã/files‚Äã/microstructure‚Äã.zip","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Us78kSqalr"}],"urlSource":"https://zenodo.org/record/5504396/files/microstructure.zip","data":{"doi":"10.5281/zenodo.5504396/files/microstructure.zip"},"internal":false,"protocol":"doi","key":"y8jjE0s369"},{"type":"text","value":". Here we have already downloaded 5 of those files, just for illustration purposes.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Xxuadw6jt7"}],"key":"QHuJwyRvCm"}],"key":"z8DQax7IKO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# read micro CT for 2N13\ndata_dir='data/microstructure/microCT/txt/'\n[SSA_CT,height_min,height_max]=read_CT_txt_files(data_dir)","key":"cOiWdxn92O"},{"type":"outputs","id":"JvpWEM83B5ajbhE9YLCMA","children":[],"key":"V6E8wlMhKQ"}],"key":"e4D3RGehOz"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let‚Äôs get all the Specific Surface Area from the database for those sites associated with 2N13. We can use the list of sites we already generated above:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VpTfQS7x50"}],"key":"XO3tHFOo5n"}],"key":"fgmidLSCMb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"SSA_2N13 = LayerMeasurements.from_filter(\n    site=sites_with_2N13,\n    type = 'specific_surface_area',\n    limit = 3000,\n    verbose = True)\nSSA_2N13.head()","key":"OpY2CZgFWf"},{"type":"outputs","id":"NfEU_m8FsmHIih-e3HwFL","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{"text/plain":{"content":"   depth bottom_depth value          site_name site_description  slope_angle  \\\n0   92.0         None  46.5  COGM6N18_20200128             None          0.0   \n1   87.0         None  49.2  COGM6N18_20200128             None          0.0   \n2   82.0         None  39.8  COGM6N18_20200128             None          0.0   \n3   77.0         None  35.2  COGM6N18_20200128             None          0.0   \n4   72.0         None  30.5  COGM6N18_20200128             None          0.0   \n\n   aspect  air_temp  total_depth  \\\n0     NaN       NaN         92.0   \n1     NaN       NaN         92.0   \n2     NaN       NaN         92.0   \n3     NaN       NaN         92.0   \n4     NaN       NaN         92.0   \n\n                            weather_description  ...  \\\n0  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n1  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n2  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n3  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n4  Clear, sunny, calm, no clouds. Taken at 913.  ...   \n\n                        date  \\\n0  2020-01-28T16:13:00+00:00   \n1  2020-01-28T16:13:00+00:00   \n2  2020-01-28T16:13:00+00:00   \n3  2020-01-28T16:13:00+00:00   \n4  2020-01-28T16:13:00+00:00   \n\n                                                geom                   type  \\\n0  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n1  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n2  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n3  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n4  0101000020e610000061b159e9390c5bc0f073d25c5b84...  specific_surface_area   \n\n    units type_derived instrument_name instrument_model  \\\n0  m^2/kg        False   IS3-SP-11-01F             None   \n1  m^2/kg        False   IS3-SP-11-01F             None   \n2  m^2/kg        False   IS3-SP-11-01F             None   \n3  m^2/kg        False   IS3-SP-11-01F             None   \n4  m^2/kg        False   IS3-SP-11-01F             None   \n\n  instrument_specifications                                      geom_wkt  \\\n0                      None  POINT(-108.19103463896819 39.03403816486377)   \n1                      None  POINT(-108.19103463896819 39.03403816486377)   \n2                      None  POINT(-108.19103463896819 39.03403816486377)   \n3                      None  POINT(-108.19103463896819 39.03403816486377)   \n4                      None  POINT(-108.19103463896819 39.03403816486377)   \n\n                      geometry  \n0  POINT (-108.19103 39.03404)  \n1  POINT (-108.19103 39.03404)  \n2  POINT (-108.19103 39.03404)  \n3  POINT (-108.19103 39.03404)  \n4  POINT (-108.19103 39.03404)  \n\n[5 rows x 29 columns]","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>depth</th>\n      <th>bottom_depth</th>\n      <th>value</th>\n      <th>site_name</th>\n      <th>site_description</th>\n      <th>slope_angle</th>\n      <th>aspect</th>\n      <th>air_temp</th>\n      <th>total_depth</th>\n      <th>weather_description</th>\n      <th>...</th>\n      <th>date</th>\n      <th>geom</th>\n      <th>type</th>\n      <th>units</th>\n      <th>type_derived</th>\n      <th>instrument_name</th>\n      <th>instrument_model</th>\n      <th>instrument_specifications</th>\n      <th>geom_wkt</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>92.0</td>\n      <td>None</td>\n      <td>46.5</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>87.0</td>\n      <td>None</td>\n      <td>49.2</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>82.0</td>\n      <td>None</td>\n      <td>39.8</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>77.0</td>\n      <td>None</td>\n      <td>35.2</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>72.0</td>\n      <td>None</td>\n      <td>30.5</td>\n      <td>COGM6N18_20200128</td>\n      <td>None</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>92.0</td>\n      <td>Clear, sunny, calm, no clouds. Taken at 913.</td>\n      <td>...</td>\n      <td>2020-01-28T16:13:00+00:00</td>\n      <td>0101000020e610000061b159e9390c5bc0f073d25c5b84...</td>\n      <td>specific_surface_area</td>\n      <td>m^2/kg</td>\n      <td>False</td>\n      <td>IS3-SP-11-01F</td>\n      <td>None</td>\n      <td>None</td>\n      <td>POINT(-108.19103463896819 39.03403816486377)</td>\n      <td>POINT (-108.19103 39.03404)</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows √ó 29 columns</p>\n</div>","content_type":"text/html"}}},"key":"bQjAQL7w0J"}],"key":"McxaQlueZE"}],"key":"U8PrJaUDZh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"instruments_site = SSA_2N13['instrument_name'].unique()\n\n# Loop over all the integrating sphere instruments at this site. plot equivalent diameter\nfig,ax = plt.subplots(figsize=(6,8))\nfor instr in instruments_site:\n\n    # Grab our profile by site and instrument\n    ind = SSA_2N13['instrument_name'] == instr\n    profile = SSA_2N13.loc[ind].copy()\n    # Don't plot it unless there is data\n    if len(profile.index) > 0:\n\n        # Sort by depth so samples that are take out of order won't mess up the plot\n        profile = profile.sort_values(by='depth')\n\n        # Layer profiles are always stored as strings. \n        profile['value'] = 6/917/profile['value'].astype(float)*1000\n\n        # Plot our profile\n        ax.plot(profile['value'], profile['depth'], colors[instr], label=instr)\n        \n#All that's left to do is plot the CT and the SMP and label the plot!\nax.plot(6/917/SSA_CT*1000,height_min,label='microCT')        #CT data\n\nax.plot(6/917/p2015.P2015_ssa*1000,(max(p2015.distance)-p2015.distance)/10,label='SMP') #SMP data\n\n# Labeling and plot style choices\nax.legend()\nax.set_xlabel('Equivalent diameter, mm')\nax.set_ylabel('Height above snow-soil interface [cm]')\nax.set_title('Site {}'.format(site.upper()))\n    \nplt.tight_layout()\nplt.show()","key":"MvIU3Mduuv"},{"type":"outputs","id":"qetgjhKjFFt9_SwwSbmID","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 600x800 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"ad29c29fee348917e82dde81b6b1dda5","path":"/snow-observations-cookbook/build/ad29c29fee348917e82dde81b6b1dda5.png"}}},"key":"sqRs8MCEBN"}],"key":"VjjpH58U87"}],"key":"vXPhkmiUnK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wow, so the datasets are so very different, with the SMP being by far the most different. Comparing with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w9MtGYHhhp"},{"type":"citeGroup","kind":"parenthetical","children":[{"type":"cite","kind":"parenthetical","label":"Calonne2020","identifier":"calonne2020","children":[{"type":"text","value":"Calonne ","key":"vSQpavoBTG"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"fPEl3jkFoI"}],"key":"cYyWiylsYt"},{"type":"text","value":", 2020","key":"im0uMbbRnW"}],"enumerator":"10","key":"EQ21V2kTic"}],"key":"usBtxcFYk7"},{"type":"text","value":" shows that the SMP is off in the same direction as diagnosed in that paper. Thus, the difference is most likely due to the difference in SMP instruments. Dr. Mel Sandells of Northumbria University has a github branch of the SMP software SnowMicropyn that has the newer fit relationship integrated in the software. It would be a nice project to loop in Mel‚Äôs branch with this notebook and see how well things compare to SnowEx data. I‚Äôd be happy to help anyone interested get rolling on that!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HUReK2Oo8n"}],"key":"SvUB8V33mk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"There‚Äôs also significant differences between the microCT and the two integrating spheres. This is science - sometimes when we start intercomparing these quantities, we do not get a perfect match. This would also be a fascinating thing to explore in a Hackweek project.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pnrK8XrHNS"}],"key":"rtVXbPNruM"}],"key":"Pn5VeGwk4Z"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Some of the ways to could connect microstructure measurements to other quantities would be with the SWESARR radar data. Although the radar data does seem to have some orthorectification issues that haven‚Äôt been fully worked out, I can imagine these being worked around by careful choice of places you match up the microstructure to the radar. Note that places that are shallower tend to have larger D","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UToyh5jfe1"},{"type":"subscript","children":[{"type":"text","value":"eq","key":"uhAHDahAN0"}],"key":"yf1zjnF7cU"},{"type":"text","value":" and vice versa, and the spatial variability in SSA was fairly low in general in Grand Mesa 2020, so looking at multiple SSA vs radar samples might not yield a great correlation.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EPp62qL9cL"}],"key":"PqrYkOda8X"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"One thing that could be of great value is to calibrate the SMP estimates of SSA to the integrating spheres. It might also be interesting to compare the data to hand hardness measured in the snowpit, and to traditional hand lens measurements.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qwHtqHBacE"}],"key":"b8HdJKhJ57"}],"key":"RwDQVqL5cL"}],"key":"m44Tx0nQxU"},"references":{"cite":{"order":["Dozier2009","Matzler2002","Matzl2010","Grenfell1999","Heggli2011","Gallet2009","Montpetit2012","Lowe2012","Proksch2015","Calonne2020"],"data":{"Dozier2009":{"label":"Dozier2009","enumerator":"1","doi":"10.1016/j.rse.2007.07.029","html":"Dozier, J., Green, R. O., Nolin, A. W., & Painter, T. H. (2009). Interpretation of snow properties from imaging spectrometry. <i>Remote Sensing of Environment</i>, <i>113</i>, S25 S37. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/j.rse.2007.07.029\">10.1016/j.rse.2007.07.029</a>","url":"https://doi.org/10.1016/j.rse.2007.07.029"},"Matzler2002":{"label":"Matzler2002","enumerator":"2","doi":"10.3189/172756502781831287","html":"M√§tzler, C. (2002). Relation between grain-size and correlation length of snow. <i>Journal of Glaciology</i>, <i>48</i>(162), 461‚Äì466. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.3189/172756502781831287\">10.3189/172756502781831287</a>","url":"https://doi.org/10.3189/172756502781831287"},"Matzl2010":{"label":"Matzl2010","enumerator":"3","doi":"10.1016/j.coldregions.2010.06.006","html":"Matzl, M., & Schneebeli, M. (2010). Stereological measurement of the specific surface area of seasonal snow types: Comparison to other methods, and implications for mm-scale vertical profiling. <i>Cold Regions Science and Technology</i>, <i>64</i>(1), 1‚Äì8. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/j.coldregions.2010.06.006\">10.1016/j.coldregions.2010.06.006</a>","url":"https://doi.org/10.1016/j.coldregions.2010.06.006"},"Grenfell1999":{"label":"Grenfell1999","enumerator":"4","doi":"doi:10.1029/1999JD900496","html":"Grenfell, T. C., & Warren, S. G. (1999). Representation of a nonspherical ice particle by a collection of independent spheres for scattering and absorption of radiation. <i>Journal of Geophysical Research - Atmospheres</i>, <i>104</i>(D24), 31697 31709. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1029/1999JD900496\">doi:10.1029/1999JD900496</a>","url":"https://doi.org/10.1029/1999JD900496"},"Heggli2011":{"label":"Heggli2011","enumerator":"5","html":"HEGGLI, M., CHLE, B., Matzl, M., PINZER, B., RICHE, F., STEINER, S., STEINFELD, D., & Schneebeli, M. (2011). Measuring snow in 3-D using X-ray tomography: assessment of visualization techniques. <i>Annals of Glaciology</i>, <i>52</i>(58), 231."},"Gallet2009":{"label":"Gallet2009","enumerator":"6","html":"Gallet, J. C., Domine, F., Zender, C. S., & Picard, G. (2009). Measurement of the specific surface area of snow using infrared reflectance in an integrating sphere at 1310 and 1550 nm. <i>The Cryosphere</i>, <i>3</i>, 167 182."},"Montpetit2012":{"label":"Montpetit2012","enumerator":"7","doi":"10.3189/2012jog11j248","html":"Montpetit, B., Royer, A., Langlois, A., Cliche, P., Roy, A., Champollion, N., Picard, G., Domine, F., & Obbard, R. (2012). New shortwave infrared albedo measurements for snow specific surface area retrieval. <i>Journal of Glaciology</i>, <i>58</i>(211), 941 952. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.3189/2012jog11j248\">10.3189/2012jog11j248</a>","url":"https://doi.org/10.3189/2012jog11j248"},"Lowe2012":{"label":"Lowe2012","enumerator":"8","doi":"10.1016/j.coldregions.2011.09.001","html":"L√∂we, H., & Herwijnen, A. van. (2012). A Poisson shot noise model for micro-penetration of snow. <i>Cold Regions Science and Technology</i>, <i>70</i>, 62‚Äì70. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/j.coldregions.2011.09.001\">10.1016/j.coldregions.2011.09.001</a>","url":"https://doi.org/10.1016/j.coldregions.2011.09.001"},"Proksch2015":{"label":"Proksch2015","enumerator":"9","doi":"10.1002/2014jf003266","html":"Proksch, M., L√∂we, H., & Schneebeli, M. (2015). Density, specific surface area, and correlation length of snow measured by high‚Äêresolution penetrometry. <i>Journal of Geophysical Research: Earth Surface</i>, <i>120</i>(2), 346‚Äì362. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1002/2014jf003266\">10.1002/2014jf003266</a>","url":"https://doi.org/10.1002/2014jf003266"},"Calonne2020":{"label":"Calonne2020","enumerator":"10","doi":"10.5194/tc-14-1829-2020","html":"Calonne, N., Richter, B., L√∂we, H., Cetti, C., Schure, J. ter, Herwijnen, A. V., Fierz, C., Jaggi, M., & Schneebeli, M. (2020). The RHOSSA campaign: multi-resolution monitoring of the seasonal evolution of the structure and mechanical stability of an alpine snowpack. <i>The Cryosphere</i>, <i>14</i>(6), 1829‚Äì1848. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5194/tc-14-1829-2020\">10.5194/tc-14-1829-2020</a>","url":"https://doi.org/10.5194/tc-14-1829-2020"}}}},"footer":{"navigation":{"prev":{"title":"UAVSAR","url":"/notebooks/uavsar-tutorial","group":"Observations"},"next":{"title":"Introduction to AVIRIS-NG","url":"/notebooks/aviris-ng-tutorial","group":"Observations"}}},"domain":"http://localhost:3000"}